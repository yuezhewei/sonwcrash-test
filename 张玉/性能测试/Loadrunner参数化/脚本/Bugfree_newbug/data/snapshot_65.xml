<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="65">
  <HTTPTask id="114" hostname="192.168.109.1" path="/bugfree/assets/65cb0d52/jui/js/jquery-ui.min.js" url="http://192.168.109.1:8032/bugfree/assets/65cb0d52/jui/js/jquery-ui.min.js" ip="192.168.109.1" port="8032" connectionId="14" origin="Primary" frame="1" startTime="1073474" endTime="1073505">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovLzE5Mi4xNjguMTA5LjE6ODAzMi9idWdmcmVlL2luZGV4LnBocC9pbmZvL2VkaXQ/dHlwZT1idWcmYWN0aW9uPW9wZW5lZCZwcm9kdWN0X2lkPTE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>emgtQ04=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS80LjAgKGNvbXBhdGlibGU7IE1TSUUgOC4wOyBXaW5kb3dzIE5UIDYuMTsgV09XNjQ7IFRyaWRlbnQvNC4wOyBTTENDMjsgLk5FVCBDTFIgMi4wLjUwNzI3OyAuTkVUIENMUiAzLjUuMzA3Mjk7IC5ORVQgQ0xSIDMuMC4zMDcyOSk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="If-Modified-Since" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyMCBNYXIgMjAxOCAwMTozOTo1MyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="If-None-Match" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjMwZGE4LTU2N2NlMjZhZDRhODEtZ3ppcCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTkyLjE2OC4xMDkuMTo4MDMy</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MV9wcm9kdWN0PTdjNzBkOGJhYmY2YzI2MjIyODliZGRkMmQyMDk3YzJkODkwNjg2N2NzJTNBMSUzQSUyMjElMjIlM0I7IHBhZ2VTaXplPTJkZDdiNGIyNjBmMTUxM2E3M2I4NWI1MTExNGZiNTNlZjNkOGQwNTZzJTNBMiUzQSUyMjIwJTIyJTNCOyBhYy1jb29raWU9JTVCJTdCJTIyZGF0YSUyMiUzQSU1QiUyMiU1Q3U3Y2ZiJTVDdTdlZGYlNUN1N2JhMSU1Q3U3NDA2JTVDdTU0NTglMjIlMkMlMjIlNUN1N2NmYiU1Q3U3ZWRmJTVDdTdiYTElNUN1NzQwNiU1Q3U1NDU4JTVCYWRtaW4lNUQlMjIlNUQlMkMlMjJ2YWx1ZSUyMiUzQSUyMiU1Q3U3Y2ZiJTVDdTdlZGYlNUN1N2JhMSU1Q3U3NDA2JTVDdTU0NTglMjIlMkMlMjJyZXN1bHQlMjIlM0ElMjIlNUN1N2NmYiU1Q3U3ZWRmJTVDdTdiYTElNUN1NzQwNiU1Q3U1NDU4JTIyJTdEJTVEOyBQSFBTRVNTSUQ9Z2x2NThnajFnbXBxZmhwMGwwZ3NjZm9mbjc7IGxhbmd1YWdlPTMzMTQyMTkxYzhhODk1YjUwOWNhMmZiNmY2Y2M1OTdhMzEyNWYxNThzJTNBNSUzQSUyMnpoX2NuJTIyJTNC</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9idWdmcmVlL2Fzc2V0cy82NWNiMGQ1Mi9qdWkvanMvanF1ZXJ5LXVpLm1pbi5qcyBIVFRQLzEuMQ0KQWNjZXB0OiAqLyoNClJlZmVyZXI6IGh0dHA6Ly8xOTIuMTY4LjEwOS4xOjgwMzIvYnVnZnJlZS9pbmRleC5waHAvaW5mby9lZGl0P3R5cGU9YnVnJmFjdGlvbj1vcGVuZWQmcHJvZHVjdF9pZD0xDQpBY2NlcHQtTGFuZ3VhZ2U6IHpoLUNODQpVc2VyLUFnZW50OiBNb3ppbGxhLzQuMCAoY29tcGF0aWJsZTsgTVNJRSA4LjA7IFdpbmRvd3MgTlQgNi4xOyBXT1c2NDsgVHJpZGVudC80LjA7IFNMQ0MyOyAuTkVUIENMUiAyLjAuNTA3Mjc7IC5ORVQgQ0xSIDMuNS4zMDcyOTsgLk5FVCBDTFIgMy4wLjMwNzI5KQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpJZi1Nb2RpZmllZC1TaW5jZTogVHVlLCAyMCBNYXIgMjAxOCAwMTozOTo1MyBHTVQNCklmLU5vbmUtTWF0Y2g6ICIzMGRhOC01NjdjZTI2YWQ0YTgxLWd6aXAiDQpIb3N0OiAxOTIuMTY4LjEwOS4xOjgwMzINCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkNvb2tpZTogMV9wcm9kdWN0PTdjNzBkOGJhYmY2YzI2MjIyODliZGRkMmQyMDk3YzJkODkwNjg2N2NzJTNBMSUzQSUyMjElMjIlM0I7IHBhZ2VTaXplPTJkZDdiNGIyNjBmMTUxM2E3M2I4NWI1MTExNGZiNTNlZjNkOGQwNTZzJTNBMiUzQSUyMjIwJTIyJTNCOyBhYy1jb29raWU9JTVCJTdCJTIyZGF0YSUyMiUzQSU1QiUyMiU1Q3U3Y2ZiJTVDdTdlZGYlNUN1N2JhMSU1Q3U3NDA2JTVDdTU0NTglMjIlMkMlMjIlNUN1N2NmYiU1Q3U3ZWRmJTVDdTdiYTElNUN1NzQwNiU1Q3U1NDU4JTVCYWRtaW4lNUQlMjIlNUQlMkMlMjJ2YWx1ZSUyMiUzQSUyMiU1Q3U3Y2ZiJTVDdTdlZGYlNUN1N2JhMSU1Q3U3NDA2JTVDdTU0NTglMjIlMkMlMjJyZXN1bHQlMjIlM0ElMjIlNUN1N2NmYiU1Q3U3ZWRmJTVDdTdiYTElNUN1NzQwNiU1Q3U1NDU4JTIyJTdEJTVEOyBQSFBTRVNTSUQ9Z2x2NThnajFnbXBxZmhwMGwwZ3NjZm9mbjc7IGxhbmd1YWdlPTMzMTQyMTkxYzhhODk1YjUwOWNhMmZiNmY2Y2M1OTdhMzEyNWYxNThzJTNBNSUzQSUyMnpoX2NuJTIyJTNCDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="1_product" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>N2M3MGQ4YmFiZjZjMjYyMjI4OWJkZGQyZDIwOTdjMmQ4OTA2ODY3Y3MlM0ExJTNBJTIyMSUyMiUzQg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="pageSize" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MmRkN2I0YjI2MGYxNTEzYTczYjg1YjUxMTE0ZmI1M2VmM2Q4ZDA1NnMlM0EyJTNBJTIyMjAlMjIlM0I=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ac-cookie" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>JTVCJTdCJTIyZGF0YSUyMiUzQSU1QiUyMiU1Q3U3Y2ZiJTVDdTdlZGYlNUN1N2JhMSU1Q3U3NDA2JTVDdTU0NTglMjIlMkMlMjIlNUN1N2NmYiU1Q3U3ZWRmJTVDdTdiYTElNUN1NzQwNiU1Q3U1NDU4JTVCYWRtaW4lNUQlMjIlNUQlMkMlMjJ2YWx1ZSUyMiUzQSUyMiU1Q3U3Y2ZiJTVDdTdlZGYlNUN1N2JhMSU1Q3U3NDA2JTVDdTU0NTglMjIlMkMlMjJyZXN1bHQlMjIlM0ElMjIlNUN1N2NmYiU1Q3U3ZWRmJTVDdTdiYTElNUN1NzQwNiU1Q3U1NDU4JTIyJTdEJTVE</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="PHPSESSID" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z2x2NThnajFnbXBxZmhwMGwwZ3NjZm9mbjc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="language" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzMxNDIxOTFjOGE4OTViNTA5Y2EyZmI2ZjZjYzU5N2EzMTI1ZjE1OHMlM0E1JTNBJTIyemhfY24lMjIlM0I=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAyNyBNYXkgMjAxOSAwNjoyMDozNSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLzIuNC42IChXaW4zMikgUEhQLzUuNS4x</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyMCBNYXIgMjAxOCAwMTozOTo1MyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjMwZGE4LTU2N2NlMjZhZDRhODEtZ3ppcCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NTE1NzU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Keep-Alive" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGltZW91dD01LCBtYXg9ODY=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBNb24sIDI3IE1heSAyMDE5IDA2OjIwOjM1IEdNVA0KU2VydmVyOiBBcGFjaGUvMi40LjYgKFdpbjMyKSBQSFAvNS41LjENCkxhc3QtTW9kaWZpZWQ6IFR1ZSwgMjAgTWFyIDIwMTggMDE6Mzk6NTMgR01UDQpFVGFnOiAiMzBkYTgtNTY3Y2UyNmFkNGE4MS1nemlwIg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KQ29udGVudC1MZW5ndGg6IDUxNTc1DQpLZWVwLUFsaXZlOiB0aW1lb3V0PTUsIG1heD04Ng0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyohCiAqIGpRdWVyeSBVSSAxLjguMTMKICoKICogQ29weXJpZ2h0IDIwMTEsIEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy4KICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJCiAqLwooZnVuY3Rpb24oYSxkKXtmdW5jdGlvbiBjKGcsZSl7dmFyIGk9Zy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKCJhcmVhIj09PWkpe2U9Zy5wYXJlbnROb2RlO2k9ZS5uYW1lO2lmKCFnLmhyZWZ8fCFpfHxlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPT0ibWFwIilyZXR1cm4gZmFsc2U7Zz1hKCJpbWdbdXNlbWFwPSMiK2krIl0iKVswXTtyZXR1cm4hIWcmJmYoZyl9cmV0dXJuKC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdChpKT8hZy5kaXNhYmxlZDoiYSI9PWk/Zy5ocmVmfHxlOmUpJiZmKGcpfWZ1bmN0aW9uIGYoZyl7cmV0dXJuIWEoZykucGFyZW50cygpLmFuZFNlbGYoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gYS5jdXJDU1ModGhpcywidmlzaWJpbGl0eSIpPT09ImhpZGRlbiJ8fGEuZXhwci5maWx0ZXJzLmhpZGRlbih0aGlzKX0pLmxlbmd0aH1hLnVpPWEudWl8fHt9O2lmKCFhLnVpLnZlcnNpb24pe2EuZXh0ZW5kKGEudWkse3ZlcnNpb246IjEuOC4xMyIsCmtleUNvZGU6e0FMVDoxOCxCQUNLU1BBQ0U6OCxDQVBTX0xPQ0s6MjAsQ09NTUE6MTg4LENPTU1BTkQ6OTEsQ09NTUFORF9MRUZUOjkxLENPTU1BTkRfUklHSFQ6OTMsQ09OVFJPTDoxNyxERUxFVEU6NDYsRE9XTjo0MCxFTkQ6MzUsRU5URVI6MTMsRVNDQVBFOjI3LEhPTUU6MzYsSU5TRVJUOjQ1LExFRlQ6MzcsTUVOVTo5MyxOVU1QQURfQUREOjEwNyxOVU1QQURfREVDSU1BTDoxMTAsTlVNUEFEX0RJVklERToxMTEsTlVNUEFEX0VOVEVSOjEwOCxOVU1QQURfTVVMVElQTFk6MTA2LE5VTVBBRF9TVUJUUkFDVDoxMDksUEFHRV9ET1dOOjM0LFBBR0VfVVA6MzMsUEVSSU9EOjE5MCxSSUdIVDozOSxTSElGVDoxNixTUEFDRTozMixUQUI6OSxVUDozOCxXSU5ET1dTOjkxfX0pO2EuZm4uZXh0ZW5kKHtfZm9jdXM6YS5mbi5mb2N1cyxmb2N1czpmdW5jdGlvbihnLGUpe3JldHVybiB0eXBlb2YgZz09PSJudW1iZXIiP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBpPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe2EoaSkuZm9jdXMoKTsKZSYmZS5jYWxsKGkpfSxnKX0pOnRoaXMuX2ZvY3VzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2Nyb2xsUGFyZW50OmZ1bmN0aW9uKCl7dmFyIGc7Zz1hLmJyb3dzZXIubXNpZSYmLyhzdGF0aWN8cmVsYXRpdmUpLy50ZXN0KHRoaXMuY3NzKCJwb3NpdGlvbiIpKXx8L2Fic29sdXRlLy50ZXN0KHRoaXMuY3NzKCJwb3NpdGlvbiIpKT90aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4vKHJlbGF0aXZlfGFic29sdXRlfGZpeGVkKS8udGVzdChhLmN1ckNTUyh0aGlzLCJwb3NpdGlvbiIsMSkpJiYvKGF1dG98c2Nyb2xsKS8udGVzdChhLmN1ckNTUyh0aGlzLCJvdmVyZmxvdyIsMSkrYS5jdXJDU1ModGhpcywib3ZlcmZsb3cteSIsMSkrYS5jdXJDU1ModGhpcywib3ZlcmZsb3cteCIsMSkpfSkuZXEoMCk6dGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuLyhhdXRvfHNjcm9sbCkvLnRlc3QoYS5jdXJDU1ModGhpcywib3ZlcmZsb3ciLDEpK2EuY3VyQ1NTKHRoaXMsCiJvdmVyZmxvdy15IiwxKSthLmN1ckNTUyh0aGlzLCJvdmVyZmxvdy14IiwxKSl9KS5lcSgwKTtyZXR1cm4vZml4ZWQvLnRlc3QodGhpcy5jc3MoInBvc2l0aW9uIikpfHwhZy5sZW5ndGg/YShkb2N1bWVudCk6Z30sekluZGV4OmZ1bmN0aW9uKGcpe2lmKGchPT1kKXJldHVybiB0aGlzLmNzcygiekluZGV4IixnKTtpZih0aGlzLmxlbmd0aCl7Zz1hKHRoaXNbMF0pO2Zvcih2YXIgZTtnLmxlbmd0aCYmZ1swXSE9PWRvY3VtZW50Oyl7ZT1nLmNzcygicG9zaXRpb24iKTtpZihlPT09ImFic29sdXRlInx8ZT09PSJyZWxhdGl2ZSJ8fGU9PT0iZml4ZWQiKXtlPXBhcnNlSW50KGcuY3NzKCJ6SW5kZXgiKSwxMCk7aWYoIWlzTmFOKGUpJiZlIT09MClyZXR1cm4gZX1nPWcucGFyZW50KCl9fXJldHVybiAwfSxkaXNhYmxlU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmluZCgoYS5zdXBwb3J0LnNlbGVjdHN0YXJ0PyJzZWxlY3RzdGFydCI6Im1vdXNlZG93biIpKyIudWktZGlzYWJsZVNlbGVjdGlvbiIsCmZ1bmN0aW9uKGcpe2cucHJldmVudERlZmF1bHQoKX0pfSxlbmFibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmJpbmQoIi51aS1kaXNhYmxlU2VsZWN0aW9uIil9fSk7YS5lYWNoKFsiV2lkdGgiLCJIZWlnaHQiXSxmdW5jdGlvbihnLGUpe2Z1bmN0aW9uIGkobCxvLG4sayl7YS5lYWNoKGIsZnVuY3Rpb24oKXtvLT1wYXJzZUZsb2F0KGEuY3VyQ1NTKGwsInBhZGRpbmciK3RoaXMsdHJ1ZSkpfHwwO2lmKG4pby09cGFyc2VGbG9hdChhLmN1ckNTUyhsLCJib3JkZXIiK3RoaXMrIldpZHRoIix0cnVlKSl8fDA7aWYoaylvLT1wYXJzZUZsb2F0KGEuY3VyQ1NTKGwsIm1hcmdpbiIrdGhpcyx0cnVlKSl8fDB9KTtyZXR1cm4gb312YXIgYj1lPT09IldpZHRoIj9bIkxlZnQiLCJSaWdodCJdOlsiVG9wIiwiQm90dG9tIl0saD1lLnRvTG93ZXJDYXNlKCksaj17aW5uZXJXaWR0aDphLmZuLmlubmVyV2lkdGgsaW5uZXJIZWlnaHQ6YS5mbi5pbm5lckhlaWdodCxvdXRlcldpZHRoOmEuZm4ub3V0ZXJXaWR0aCwKb3V0ZXJIZWlnaHQ6YS5mbi5vdXRlckhlaWdodH07YS5mblsiaW5uZXIiK2VdPWZ1bmN0aW9uKGwpe2lmKGw9PT1kKXJldHVybiBqWyJpbm5lciIrZV0uY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoaCxpKHRoaXMsbCkrInB4Iil9KX07YS5mblsib3V0ZXIiK2VdPWZ1bmN0aW9uKGwsbyl7aWYodHlwZW9mIGwhPT0ibnVtYmVyIilyZXR1cm4galsib3V0ZXIiK2VdLmNhbGwodGhpcyxsKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoaCxpKHRoaXMsbCx0cnVlLG8pKyJweCIpfSl9fSk7YS5leHRlbmQoYS5leHByWyI6Il0se2RhdGE6ZnVuY3Rpb24oZyxlLGkpe3JldHVybiEhYS5kYXRhKGcsaVszXSl9LGZvY3VzYWJsZTpmdW5jdGlvbihnKXtyZXR1cm4gYyhnLCFpc05hTihhLmF0dHIoZywidGFiaW5kZXgiKSkpfSx0YWJiYWJsZTpmdW5jdGlvbihnKXt2YXIgZT1hLmF0dHIoZywidGFiaW5kZXgiKSxpPWlzTmFOKGUpOwpyZXR1cm4oaXx8ZT49MCkmJmMoZywhaSl9fSk7YShmdW5jdGlvbigpe3ZhciBnPWRvY3VtZW50LmJvZHksZT1nLmFwcGVuZENoaWxkKGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO2EuZXh0ZW5kKGUuc3R5bGUse21pbkhlaWdodDoiMTAwcHgiLGhlaWdodDoiYXV0byIscGFkZGluZzowLGJvcmRlcldpZHRoOjB9KTthLnN1cHBvcnQubWluSGVpZ2h0PWUub2Zmc2V0SGVpZ2h0PT09MTAwO2Euc3VwcG9ydC5zZWxlY3RzdGFydD0ib25zZWxlY3RzdGFydCJpbiBlO2cucmVtb3ZlQ2hpbGQoZSkuc3R5bGUuZGlzcGxheT0ibm9uZSJ9KTthLmV4dGVuZChhLnVpLHtwbHVnaW46e2FkZDpmdW5jdGlvbihnLGUsaSl7Zz1hLnVpW2ddLnByb3RvdHlwZTtmb3IodmFyIGIgaW4gaSl7Zy5wbHVnaW5zW2JdPWcucGx1Z2luc1tiXXx8W107Zy5wbHVnaW5zW2JdLnB1c2goW2UsaVtiXV0pfX0sY2FsbDpmdW5jdGlvbihnLGUsaSl7aWYoKGU9Zy5wbHVnaW5zW2VdKSYmZy5lbGVtZW50WzBdLnBhcmVudE5vZGUpZm9yKHZhciBiPQowO2I8ZS5sZW5ndGg7YisrKWcub3B0aW9uc1tlW2JdWzBdXSYmZVtiXVsxXS5hcHBseShnLmVsZW1lbnQsaSl9fSxjb250YWluczpmdW5jdGlvbihnLGUpe3JldHVybiBkb2N1bWVudC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9nLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGUpJjE2OmchPT1lJiZnLmNvbnRhaW5zKGUpfSxoYXNTY3JvbGw6ZnVuY3Rpb24oZyxlKXtpZihhKGcpLmNzcygib3ZlcmZsb3ciKT09PSJoaWRkZW4iKXJldHVybiBmYWxzZTtlPWUmJmU9PT0ibGVmdCI/InNjcm9sbExlZnQiOiJzY3JvbGxUb3AiO3ZhciBpPWZhbHNlO2lmKGdbZV0+MClyZXR1cm4gdHJ1ZTtnW2VdPTE7aT1nW2VdPjA7Z1tlXT0wO3JldHVybiBpfSxpc092ZXJBeGlzOmZ1bmN0aW9uKGcsZSxpKXtyZXR1cm4gZz5lJiZnPGUraX0saXNPdmVyOmZ1bmN0aW9uKGcsZSxpLGIsaCxqKXtyZXR1cm4gYS51aS5pc092ZXJBeGlzKGcsaSxoKSYmYS51aS5pc092ZXJBeGlzKGUsYixqKX19KX19KShqUXVlcnkpOwooZnVuY3Rpb24oYSxkKXtpZihhLmNsZWFuRGF0YSl7dmFyIGM9YS5jbGVhbkRhdGE7YS5jbGVhbkRhdGE9ZnVuY3Rpb24oZyl7Zm9yKHZhciBlPTAsaTsoaT1nW2VdKSE9bnVsbDtlKyspYShpKS50cmlnZ2VySGFuZGxlcigicmVtb3ZlIik7YyhnKX19ZWxzZXt2YXIgZj1hLmZuLnJlbW92ZTthLmZuLnJlbW92ZT1mdW5jdGlvbihnLGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZighZSlpZighZ3x8YS5maWx0ZXIoZyxbdGhpc10pLmxlbmd0aClhKCIqIix0aGlzKS5hZGQoW3RoaXNdKS5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS50cmlnZ2VySGFuZGxlcigicmVtb3ZlIil9KTtyZXR1cm4gZi5jYWxsKGEodGhpcyksZyxlKX0pfX1hLndpZGdldD1mdW5jdGlvbihnLGUsaSl7dmFyIGI9Zy5zcGxpdCgiLiIpWzBdLGg7Zz1nLnNwbGl0KCIuIilbMV07aD1iKyItIitnO2lmKCFpKXtpPWU7ZT1hLldpZGdldH1hLmV4cHJbIjoiXVtoXT1mdW5jdGlvbihqKXtyZXR1cm4hIWEuZGF0YShqLApnKX07YVtiXT1hW2JdfHx7fTthW2JdW2ddPWZ1bmN0aW9uKGosbCl7YXJndW1lbnRzLmxlbmd0aCYmdGhpcy5fY3JlYXRlV2lkZ2V0KGosbCl9O2U9bmV3IGU7ZS5vcHRpb25zPWEuZXh0ZW5kKHRydWUse30sZS5vcHRpb25zKTthW2JdW2ddLnByb3RvdHlwZT1hLmV4dGVuZCh0cnVlLGUse25hbWVzcGFjZTpiLHdpZGdldE5hbWU6Zyx3aWRnZXRFdmVudFByZWZpeDphW2JdW2ddLnByb3RvdHlwZS53aWRnZXRFdmVudFByZWZpeHx8Zyx3aWRnZXRCYXNlQ2xhc3M6aH0saSk7YS53aWRnZXQuYnJpZGdlKGcsYVtiXVtnXSl9O2Eud2lkZ2V0LmJyaWRnZT1mdW5jdGlvbihnLGUpe2EuZm5bZ109ZnVuY3Rpb24oaSl7dmFyIGI9dHlwZW9mIGk9PT0ic3RyaW5nIixoPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxqPXRoaXM7aT0hYiYmaC5sZW5ndGg/YS5leHRlbmQuYXBwbHkobnVsbCxbdHJ1ZSxpXS5jb25jYXQoaCkpOmk7aWYoYiYmaS5jaGFyQXQoMCk9PT0iXyIpcmV0dXJuIGo7CmI/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGw9YS5kYXRhKHRoaXMsZyksbz1sJiZhLmlzRnVuY3Rpb24obFtpXSk/bFtpXS5hcHBseShsLGgpOmw7aWYobyE9PWwmJm8hPT1kKXtqPW87cmV0dXJuIGZhbHNlfX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBsPWEuZGF0YSh0aGlzLGcpO2w/bC5vcHRpb24oaXx8e30pLl9pbml0KCk6YS5kYXRhKHRoaXMsZyxuZXcgZShpLHRoaXMpKX0pO3JldHVybiBqfX07YS5XaWRnZXQ9ZnVuY3Rpb24oZyxlKXthcmd1bWVudHMubGVuZ3RoJiZ0aGlzLl9jcmVhdGVXaWRnZXQoZyxlKX07YS5XaWRnZXQucHJvdG90eXBlPXt3aWRnZXROYW1lOiJ3aWRnZXQiLHdpZGdldEV2ZW50UHJlZml4OiIiLG9wdGlvbnM6e2Rpc2FibGVkOmZhbHNlfSxfY3JlYXRlV2lkZ2V0OmZ1bmN0aW9uKGcsZSl7YS5kYXRhKGUsdGhpcy53aWRnZXROYW1lLHRoaXMpO3RoaXMuZWxlbWVudD1hKGUpO3RoaXMub3B0aW9ucz1hLmV4dGVuZCh0cnVlLHt9LHRoaXMub3B0aW9ucywKdGhpcy5fZ2V0Q3JlYXRlT3B0aW9ucygpLGcpO3ZhciBpPXRoaXM7dGhpcy5lbGVtZW50LmJpbmQoInJlbW92ZS4iK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbigpe2kuZGVzdHJveSgpfSk7dGhpcy5fY3JlYXRlKCk7dGhpcy5fdHJpZ2dlcigiY3JlYXRlIik7dGhpcy5faW5pdCgpfSxfZ2V0Q3JlYXRlT3B0aW9uczpmdW5jdGlvbigpe3JldHVybiBhLm1ldGFkYXRhJiZhLm1ldGFkYXRhLmdldCh0aGlzLmVsZW1lbnRbMF0pW3RoaXMud2lkZ2V0TmFtZV19LF9jcmVhdGU6ZnVuY3Rpb24oKXt9LF9pbml0OmZ1bmN0aW9uKCl7fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnVuYmluZCgiLiIrdGhpcy53aWRnZXROYW1lKS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0TmFtZSk7dGhpcy53aWRnZXQoKS51bmJpbmQoIi4iK3RoaXMud2lkZ2V0TmFtZSkucmVtb3ZlQXR0cigiYXJpYS1kaXNhYmxlZCIpLnJlbW92ZUNsYXNzKHRoaXMud2lkZ2V0QmFzZUNsYXNzKyItZGlzYWJsZWQgdWktc3RhdGUtZGlzYWJsZWQiKX0sCndpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnR9LG9wdGlvbjpmdW5jdGlvbihnLGUpe3ZhciBpPWc7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApcmV0dXJuIGEuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyk7aWYodHlwZW9mIGc9PT0ic3RyaW5nIil7aWYoZT09PWQpcmV0dXJuIHRoaXMub3B0aW9uc1tnXTtpPXt9O2lbZ109ZX10aGlzLl9zZXRPcHRpb25zKGkpO3JldHVybiB0aGlzfSxfc2V0T3B0aW9uczpmdW5jdGlvbihnKXt2YXIgZT10aGlzO2EuZWFjaChnLGZ1bmN0aW9uKGksYil7ZS5fc2V0T3B0aW9uKGksYil9KTtyZXR1cm4gdGhpc30sX3NldE9wdGlvbjpmdW5jdGlvbihnLGUpe3RoaXMub3B0aW9uc1tnXT1lO2lmKGc9PT0iZGlzYWJsZWQiKXRoaXMud2lkZ2V0KClbZT8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKHRoaXMud2lkZ2V0QmFzZUNsYXNzKyItZGlzYWJsZWQgdWktc3RhdGUtZGlzYWJsZWQiKS5hdHRyKCJhcmlhLWRpc2FibGVkIixlKTtyZXR1cm4gdGhpc30sCmVuYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZXRPcHRpb24oImRpc2FibGVkIixmYWxzZSl9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2V0T3B0aW9uKCJkaXNhYmxlZCIsdHJ1ZSl9LF90cmlnZ2VyOmZ1bmN0aW9uKGcsZSxpKXt2YXIgYj10aGlzLm9wdGlvbnNbZ107ZT1hLkV2ZW50KGUpO2UudHlwZT0oZz09PXRoaXMud2lkZ2V0RXZlbnRQcmVmaXg/Zzp0aGlzLndpZGdldEV2ZW50UHJlZml4K2cpLnRvTG93ZXJDYXNlKCk7aT1pfHx7fTtpZihlLm9yaWdpbmFsRXZlbnQpe2c9YS5ldmVudC5wcm9wcy5sZW5ndGg7Zm9yKHZhciBoO2c7KXtoPWEuZXZlbnQucHJvcHNbLS1nXTtlW2hdPWUub3JpZ2luYWxFdmVudFtoXX19dGhpcy5lbGVtZW50LnRyaWdnZXIoZSxpKTtyZXR1cm4hKGEuaXNGdW5jdGlvbihiKSYmYi5jYWxsKHRoaXMuZWxlbWVudFswXSxlLGkpPT09ZmFsc2V8fGUuaXNEZWZhdWx0UHJldmVudGVkKCkpfX19KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7dmFyIGQ9ZmFsc2U7YShkb2N1bWVudCkubW91c2Vkb3duKGZ1bmN0aW9uKCl7ZD1mYWxzZX0pO2Eud2lkZ2V0KCJ1aS5tb3VzZSIse29wdGlvbnM6e2NhbmNlbDoiOmlucHV0LG9wdGlvbiIsZGlzdGFuY2U6MSxkZWxheTowfSxfbW91c2VJbml0OmZ1bmN0aW9uKCl7dmFyIGM9dGhpczt0aGlzLmVsZW1lbnQuYmluZCgibW91c2Vkb3duLiIrdGhpcy53aWRnZXROYW1lLGZ1bmN0aW9uKGYpe3JldHVybiBjLl9tb3VzZURvd24oZil9KS5iaW5kKCJjbGljay4iK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbihmKXtpZih0cnVlPT09YS5kYXRhKGYudGFyZ2V0LGMud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50Iikpe2EucmVtb3ZlRGF0YShmLnRhcmdldCxjLndpZGdldE5hbWUrIi5wcmV2ZW50Q2xpY2tFdmVudCIpO2Yuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7cmV0dXJuIGZhbHNlfX0pO3RoaXMuc3RhcnRlZD1mYWxzZX0sX21vdXNlRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC51bmJpbmQoIi4iKwp0aGlzLndpZGdldE5hbWUpfSxfbW91c2VEb3duOmZ1bmN0aW9uKGMpe2lmKCFkKXt0aGlzLl9tb3VzZVN0YXJ0ZWQmJnRoaXMuX21vdXNlVXAoYyk7dGhpcy5fbW91c2VEb3duRXZlbnQ9Yzt2YXIgZj10aGlzLGc9Yy53aGljaD09MSxlPXR5cGVvZiB0aGlzLm9wdGlvbnMuY2FuY2VsPT0ic3RyaW5nIj9hKGMudGFyZ2V0KS5wYXJlbnRzKCkuYWRkKGMudGFyZ2V0KS5maWx0ZXIodGhpcy5vcHRpb25zLmNhbmNlbCkubGVuZ3RoOmZhbHNlO2lmKCFnfHxlfHwhdGhpcy5fbW91c2VDYXB0dXJlKGMpKXJldHVybiB0cnVlO3RoaXMubW91c2VEZWxheU1ldD0hdGhpcy5vcHRpb25zLmRlbGF5O2lmKCF0aGlzLm1vdXNlRGVsYXlNZXQpdGhpcy5fbW91c2VEZWxheVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtmLm1vdXNlRGVsYXlNZXQ9dHJ1ZX0sdGhpcy5vcHRpb25zLmRlbGF5KTtpZih0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGMpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KGMpKXt0aGlzLl9tb3VzZVN0YXJ0ZWQ9CnRoaXMuX21vdXNlU3RhcnQoYykhPT1mYWxzZTtpZighdGhpcy5fbW91c2VTdGFydGVkKXtjLnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIHRydWV9fXRydWU9PT1hLmRhdGEoYy50YXJnZXQsdGhpcy53aWRnZXROYW1lKyIucHJldmVudENsaWNrRXZlbnQiKSYmYS5yZW1vdmVEYXRhKGMudGFyZ2V0LHRoaXMud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50Iik7dGhpcy5fbW91c2VNb3ZlRGVsZWdhdGU9ZnVuY3Rpb24oaSl7cmV0dXJuIGYuX21vdXNlTW92ZShpKX07dGhpcy5fbW91c2VVcERlbGVnYXRlPWZ1bmN0aW9uKGkpe3JldHVybiBmLl9tb3VzZVVwKGkpfTthKGRvY3VtZW50KS5iaW5kKCJtb3VzZW1vdmUuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLmJpbmQoIm1vdXNldXAuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VVcERlbGVnYXRlKTtjLnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIGQ9dHJ1ZX19LF9tb3VzZU1vdmU6ZnVuY3Rpb24oYyl7aWYoYS5icm93c2VyLm1zaWUmJgohKGRvY3VtZW50LmRvY3VtZW50TW9kZT49OSkmJiFjLmJ1dHRvbilyZXR1cm4gdGhpcy5fbW91c2VVcChjKTtpZih0aGlzLl9tb3VzZVN0YXJ0ZWQpe3RoaXMuX21vdXNlRHJhZyhjKTtyZXR1cm4gYy5wcmV2ZW50RGVmYXVsdCgpfWlmKHRoaXMuX21vdXNlRGlzdGFuY2VNZXQoYykmJnRoaXMuX21vdXNlRGVsYXlNZXQoYykpKHRoaXMuX21vdXNlU3RhcnRlZD10aGlzLl9tb3VzZVN0YXJ0KHRoaXMuX21vdXNlRG93bkV2ZW50LGMpIT09ZmFsc2UpP3RoaXMuX21vdXNlRHJhZyhjKTp0aGlzLl9tb3VzZVVwKGMpO3JldHVybiF0aGlzLl9tb3VzZVN0YXJ0ZWR9LF9tb3VzZVVwOmZ1bmN0aW9uKGMpe2EoZG9jdW1lbnQpLnVuYmluZCgibW91c2Vtb3ZlLiIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKS51bmJpbmQoIm1vdXNldXAuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VVcERlbGVnYXRlKTtpZih0aGlzLl9tb3VzZVN0YXJ0ZWQpe3RoaXMuX21vdXNlU3RhcnRlZD0KZmFsc2U7Yy50YXJnZXQ9PXRoaXMuX21vdXNlRG93bkV2ZW50LnRhcmdldCYmYS5kYXRhKGMudGFyZ2V0LHRoaXMud2lkZ2V0TmFtZSsiLnByZXZlbnRDbGlja0V2ZW50Iix0cnVlKTt0aGlzLl9tb3VzZVN0b3AoYyl9cmV0dXJuIGZhbHNlfSxfbW91c2VEaXN0YW5jZU1ldDpmdW5jdGlvbihjKXtyZXR1cm4gTWF0aC5tYXgoTWF0aC5hYnModGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVgtYy5wYWdlWCksTWF0aC5hYnModGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVktYy5wYWdlWSkpPj10aGlzLm9wdGlvbnMuZGlzdGFuY2V9LF9tb3VzZURlbGF5TWV0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW91c2VEZWxheU1ldH0sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oKXt9LF9tb3VzZURyYWc6ZnVuY3Rpb24oKXt9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oKXt9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX19KX0pKGpRdWVyeSk7CihmdW5jdGlvbihhKXthLndpZGdldCgidWkuZHJhZ2dhYmxlIixhLnVpLm1vdXNlLHt3aWRnZXRFdmVudFByZWZpeDoiZHJhZyIsb3B0aW9uczp7YWRkQ2xhc3Nlczp0cnVlLGFwcGVuZFRvOiJwYXJlbnQiLGF4aXM6ZmFsc2UsY29ubmVjdFRvU29ydGFibGU6ZmFsc2UsY29udGFpbm1lbnQ6ZmFsc2UsY3Vyc29yOiJhdXRvIixjdXJzb3JBdDpmYWxzZSxncmlkOmZhbHNlLGhhbmRsZTpmYWxzZSxoZWxwZXI6Im9yaWdpbmFsIixpZnJhbWVGaXg6ZmFsc2Usb3BhY2l0eTpmYWxzZSxyZWZyZXNoUG9zaXRpb25zOmZhbHNlLHJldmVydDpmYWxzZSxyZXZlcnREdXJhdGlvbjo1MDAsc2NvcGU6ImRlZmF1bHQiLHNjcm9sbDp0cnVlLHNjcm9sbFNlbnNpdGl2aXR5OjIwLHNjcm9sbFNwZWVkOjIwLHNuYXA6ZmFsc2Usc25hcE1vZGU6ImJvdGgiLHNuYXBUb2xlcmFuY2U6MjAsc3RhY2s6ZmFsc2UsekluZGV4OmZhbHNlfSxfY3JlYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmhlbHBlcj09CiJvcmlnaW5hbCImJiEvXig/OnJ8YXxmKS8udGVzdCh0aGlzLmVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpKSl0aGlzLmVsZW1lbnRbMF0uc3R5bGUucG9zaXRpb249InJlbGF0aXZlIjt0aGlzLm9wdGlvbnMuYWRkQ2xhc3NlcyYmdGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1kcmFnZ2FibGUiKTt0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMuZWxlbWVudC5hZGRDbGFzcygidWktZHJhZ2dhYmxlLWRpc2FibGVkIik7dGhpcy5fbW91c2VJbml0KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLmVsZW1lbnQuZGF0YSgiZHJhZ2dhYmxlIikpe3RoaXMuZWxlbWVudC5yZW1vdmVEYXRhKCJkcmFnZ2FibGUiKS51bmJpbmQoIi5kcmFnZ2FibGUiKS5yZW1vdmVDbGFzcygidWktZHJhZ2dhYmxlIHVpLWRyYWdnYWJsZS1kcmFnZ2luZyB1aS1kcmFnZ2FibGUtZGlzYWJsZWQiKTt0aGlzLl9tb3VzZURlc3Ryb3koKTtyZXR1cm4gdGhpc319LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oZCl7dmFyIGM9CnRoaXMub3B0aW9ucztpZih0aGlzLmhlbHBlcnx8Yy5kaXNhYmxlZHx8YShkLnRhcmdldCkuaXMoIi51aS1yZXNpemFibGUtaGFuZGxlIikpcmV0dXJuIGZhbHNlO3RoaXMuaGFuZGxlPXRoaXMuX2dldEhhbmRsZShkKTtpZighdGhpcy5oYW5kbGUpcmV0dXJuIGZhbHNlO2EoYy5pZnJhbWVGaXg9PT10cnVlPyJpZnJhbWUiOmMuaWZyYW1lRml4KS5lYWNoKGZ1bmN0aW9uKCl7YSgnPGRpdiBjbGFzcz0idWktZHJhZ2dhYmxlLWlmcmFtZUZpeCIgc3R5bGU9ImJhY2tncm91bmQ6ICNmZmY7Ij48L2Rpdj4nKS5jc3Moe3dpZHRoOnRoaXMub2Zmc2V0V2lkdGgrInB4IixoZWlnaHQ6dGhpcy5vZmZzZXRIZWlnaHQrInB4Iixwb3NpdGlvbjoiYWJzb2x1dGUiLG9wYWNpdHk6IjAuMDAxIix6SW5kZXg6MUUzfSkuY3NzKGEodGhpcykub2Zmc2V0KCkpLmFwcGVuZFRvKCJib2R5Iil9KTtyZXR1cm4gdHJ1ZX0sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcy5vcHRpb25zO3RoaXMuaGVscGVyPQp0aGlzLl9jcmVhdGVIZWxwZXIoZCk7dGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpO2lmKGEudWkuZGRtYW5hZ2VyKWEudWkuZGRtYW5hZ2VyLmN1cnJlbnQ9dGhpczt0aGlzLl9jYWNoZU1hcmdpbnMoKTt0aGlzLmNzc1Bvc2l0aW9uPXRoaXMuaGVscGVyLmNzcygicG9zaXRpb24iKTt0aGlzLnNjcm9sbFBhcmVudD10aGlzLmhlbHBlci5zY3JvbGxQYXJlbnQoKTt0aGlzLm9mZnNldD10aGlzLnBvc2l0aW9uQWJzPXRoaXMuZWxlbWVudC5vZmZzZXQoKTt0aGlzLm9mZnNldD17dG9wOnRoaXMub2Zmc2V0LnRvcC10aGlzLm1hcmdpbnMudG9wLGxlZnQ6dGhpcy5vZmZzZXQubGVmdC10aGlzLm1hcmdpbnMubGVmdH07YS5leHRlbmQodGhpcy5vZmZzZXQse2NsaWNrOntsZWZ0OmQucGFnZVgtdGhpcy5vZmZzZXQubGVmdCx0b3A6ZC5wYWdlWS10aGlzLm9mZnNldC50b3B9LHBhcmVudDp0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSxyZWxhdGl2ZTp0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpfSk7CnRoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZCk7dGhpcy5vcmlnaW5hbFBhZ2VYPWQucGFnZVg7dGhpcy5vcmlnaW5hbFBhZ2VZPWQucGFnZVk7Yy5jdXJzb3JBdCYmdGhpcy5fYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcihjLmN1cnNvckF0KTtjLmNvbnRhaW5tZW50JiZ0aGlzLl9zZXRDb250YWlubWVudCgpO2lmKHRoaXMuX3RyaWdnZXIoInN0YXJ0IixkKT09PWZhbHNlKXt0aGlzLl9jbGVhcigpO3JldHVybiBmYWxzZX10aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7YS51aS5kZG1hbmFnZXImJiFjLmRyb3BCZWhhdmlvdXImJmEudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKHRoaXMsZCk7dGhpcy5oZWxwZXIuYWRkQ2xhc3MoInVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpO3RoaXMuX21vdXNlRHJhZyhkLHRydWUpO3JldHVybiB0cnVlfSxfbW91c2VEcmFnOmZ1bmN0aW9uKGQsYyl7dGhpcy5wb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGQpOwp0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpO2lmKCFjKXtjPXRoaXMuX3VpSGFzaCgpO2lmKHRoaXMuX3RyaWdnZXIoImRyYWciLGQsYyk9PT1mYWxzZSl7dGhpcy5fbW91c2VVcCh7fSk7cmV0dXJuIGZhbHNlfXRoaXMucG9zaXRpb249Yy5wb3NpdGlvbn1pZighdGhpcy5vcHRpb25zLmF4aXN8fHRoaXMub3B0aW9ucy5heGlzIT0ieSIpdGhpcy5oZWxwZXJbMF0uc3R5bGUubGVmdD10aGlzLnBvc2l0aW9uLmxlZnQrInB4IjtpZighdGhpcy5vcHRpb25zLmF4aXN8fHRoaXMub3B0aW9ucy5heGlzIT0ieCIpdGhpcy5oZWxwZXJbMF0uc3R5bGUudG9wPXRoaXMucG9zaXRpb24udG9wKyJweCI7YS51aS5kZG1hbmFnZXImJmEudWkuZGRtYW5hZ2VyLmRyYWcodGhpcyxkKTtyZXR1cm4gZmFsc2V9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oZCl7dmFyIGM9ZmFsc2U7aWYoYS51aS5kZG1hbmFnZXImJiF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91ciljPQphLnVpLmRkbWFuYWdlci5kcm9wKHRoaXMsZCk7aWYodGhpcy5kcm9wcGVkKXtjPXRoaXMuZHJvcHBlZDt0aGlzLmRyb3BwZWQ9ZmFsc2V9aWYoKCF0aGlzLmVsZW1lbnRbMF18fCF0aGlzLmVsZW1lbnRbMF0ucGFyZW50Tm9kZSkmJnRoaXMub3B0aW9ucy5oZWxwZXI9PSJvcmlnaW5hbCIpcmV0dXJuIGZhbHNlO2lmKHRoaXMub3B0aW9ucy5yZXZlcnQ9PSJpbnZhbGlkIiYmIWN8fHRoaXMub3B0aW9ucy5yZXZlcnQ9PSJ2YWxpZCImJmN8fHRoaXMub3B0aW9ucy5yZXZlcnQ9PT10cnVlfHxhLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLnJldmVydCkmJnRoaXMub3B0aW9ucy5yZXZlcnQuY2FsbCh0aGlzLmVsZW1lbnQsYykpe3ZhciBmPXRoaXM7YSh0aGlzLmhlbHBlcikuYW5pbWF0ZSh0aGlzLm9yaWdpbmFsUG9zaXRpb24scGFyc2VJbnQodGhpcy5vcHRpb25zLnJldmVydER1cmF0aW9uLDEwKSxmdW5jdGlvbigpe2YuX3RyaWdnZXIoInN0b3AiLGQpIT09ZmFsc2UmJmYuX2NsZWFyKCl9KX1lbHNlIHRoaXMuX3RyaWdnZXIoInN0b3AiLApkKSE9PWZhbHNlJiZ0aGlzLl9jbGVhcigpO3JldHVybiBmYWxzZX0sX21vdXNlVXA6ZnVuY3Rpb24oZCl7dGhpcy5vcHRpb25zLmlmcmFtZUZpeD09PXRydWUmJmEoImRpdi51aS1kcmFnZ2FibGUtaWZyYW1lRml4IikuZWFjaChmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKX0pO3JldHVybiBhLnVpLm1vdXNlLnByb3RvdHlwZS5fbW91c2VVcC5jYWxsKHRoaXMsZCl9LGNhbmNlbDpmdW5jdGlvbigpe3RoaXMuaGVscGVyLmlzKCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nIik/dGhpcy5fbW91c2VVcCh7fSk6dGhpcy5fY2xlYXIoKTtyZXR1cm4gdGhpc30sX2dldEhhbmRsZTpmdW5jdGlvbihkKXt2YXIgYz0hdGhpcy5vcHRpb25zLmhhbmRsZXx8IWEodGhpcy5vcHRpb25zLmhhbmRsZSx0aGlzLmVsZW1lbnQpLmxlbmd0aD90cnVlOmZhbHNlO2EodGhpcy5vcHRpb25zLmhhbmRsZSx0aGlzLmVsZW1lbnQpLmZpbmQoIioiKS5hbmRTZWxmKCkuZWFjaChmdW5jdGlvbigpe2lmKHRoaXM9PQpkLnRhcmdldCljPXRydWV9KTtyZXR1cm4gY30sX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbihkKXt2YXIgYz10aGlzLm9wdGlvbnM7ZD1hLmlzRnVuY3Rpb24oYy5oZWxwZXIpP2EoYy5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFtkXSkpOmMuaGVscGVyPT0iY2xvbmUiP3RoaXMuZWxlbWVudC5jbG9uZSgpLnJlbW92ZUF0dHIoImlkIik6dGhpcy5lbGVtZW50O2QucGFyZW50cygiYm9keSIpLmxlbmd0aHx8ZC5hcHBlbmRUbyhjLmFwcGVuZFRvPT0icGFyZW50Ij90aGlzLmVsZW1lbnRbMF0ucGFyZW50Tm9kZTpjLmFwcGVuZFRvKTtkWzBdIT10aGlzLmVsZW1lbnRbMF0mJiEvKGZpeGVkfGFic29sdXRlKS8udGVzdChkLmNzcygicG9zaXRpb24iKSkmJmQuY3NzKCJwb3NpdGlvbiIsImFic29sdXRlIik7cmV0dXJuIGR9LF9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOmZ1bmN0aW9uKGQpe2lmKHR5cGVvZiBkPT0ic3RyaW5nIilkPWQuc3BsaXQoIiAiKTtpZihhLmlzQXJyYXkoZCkpZD0Ke2xlZnQ6K2RbMF0sdG9wOitkWzFdfHwwfTtpZigibGVmdCJpbiBkKXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ9ZC5sZWZ0K3RoaXMubWFyZ2lucy5sZWZ0O2lmKCJyaWdodCJpbiBkKXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC1kLnJpZ2h0K3RoaXMubWFyZ2lucy5sZWZ0O2lmKCJ0b3AiaW4gZCl0aGlzLm9mZnNldC5jbGljay50b3A9ZC50b3ArdGhpcy5tYXJnaW5zLnRvcDtpZigiYm90dG9tImluIGQpdGhpcy5vZmZzZXQuY2xpY2sudG9wPXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LWQuYm90dG9tK3RoaXMubWFyZ2lucy50b3B9LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTt2YXIgZD10aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTtpZih0aGlzLmNzc1Bvc2l0aW9uPT0iYWJzb2x1dGUiJiZ0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJgphLnVpLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSl7ZC5sZWZ0Kz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk7ZC50b3ArPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpfWlmKHRoaXMub2Zmc2V0UGFyZW50WzBdPT1kb2N1bWVudC5ib2R5fHx0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lJiZ0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJodG1sIiYmYS5icm93c2VyLm1zaWUpZD17dG9wOjAsbGVmdDowfTtyZXR1cm57dG9wOmQudG9wKyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSxsZWZ0OmQubGVmdCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApfX0sX2dldFJlbGF0aXZlT2Zmc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5jc3NQb3NpdGlvbj09InJlbGF0aXZlIil7dmFyIGQ9CnRoaXMuZWxlbWVudC5wb3NpdGlvbigpO3JldHVybnt0b3A6ZC50b3AtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygidG9wIiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxsZWZ0OmQubGVmdC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJsZWZ0IiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCl9fWVsc2UgcmV0dXJue3RvcDowLGxlZnQ6MH19LF9jYWNoZU1hcmdpbnM6ZnVuY3Rpb24oKXt0aGlzLm1hcmdpbnM9e2xlZnQ6cGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luTGVmdCIpLDEwKXx8MCx0b3A6cGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcygibWFyZ2luVG9wIiksMTApfHwwLHJpZ2h0OnBhcnNlSW50KHRoaXMuZWxlbWVudC5jc3MoIm1hcmdpblJpZ2h0IiksMTApfHwwLGJvdHRvbTpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5Cb3R0b20iKSwxMCl8fDB9fSxfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczpmdW5jdGlvbigpe3RoaXMuaGVscGVyUHJvcG9ydGlvbnM9Cnt3aWR0aDp0aGlzLmhlbHBlci5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuaGVscGVyLm91dGVySGVpZ2h0KCl9fSxfc2V0Q29udGFpbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm9wdGlvbnM7aWYoZC5jb250YWlubWVudD09InBhcmVudCIpZC5jb250YWlubWVudD10aGlzLmhlbHBlclswXS5wYXJlbnROb2RlO2lmKGQuY29udGFpbm1lbnQ9PSJkb2N1bWVudCJ8fGQuY29udGFpbm1lbnQ9PSJ3aW5kb3ciKXRoaXMuY29udGFpbm1lbnQ9WyhkLmNvbnRhaW5tZW50PT0iZG9jdW1lbnQiPzA6YSh3aW5kb3cpLnNjcm9sbExlZnQoKSktdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCwoZC5jb250YWlubWVudD09ImRvY3VtZW50Ij8wOmEod2luZG93KS5zY3JvbGxUb3AoKSktdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3AsKGQuY29udGFpbm1lbnQ9PSJkb2N1bWVudCI/MDphKHdpbmRvdykuc2Nyb2xsTGVmdCgpKSsKYShkLmNvbnRhaW5tZW50PT0iZG9jdW1lbnQiP2RvY3VtZW50OndpbmRvdykud2lkdGgoKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LChkLmNvbnRhaW5tZW50PT0iZG9jdW1lbnQiPzA6YSh3aW5kb3cpLnNjcm9sbFRvcCgpKSsoYShkLmNvbnRhaW5tZW50PT0iZG9jdW1lbnQiP2RvY3VtZW50OndpbmRvdykuaGVpZ2h0KCl8fGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZS5zY3JvbGxIZWlnaHQpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3BdO2lmKCEvXihkb2N1bWVudHx3aW5kb3d8cGFyZW50KSQvLnRlc3QoZC5jb250YWlubWVudCkmJmQuY29udGFpbm1lbnQuY29uc3RydWN0b3IhPUFycmF5KXtkPWEoZC5jb250YWlubWVudCk7dmFyIGM9ZFswXTtpZihjKXtkLm9mZnNldCgpO3ZhciBmPWEoYykuY3NzKCJvdmVyZmxvdyIpIT0iaGlkZGVuIjt0aGlzLmNvbnRhaW5tZW50PVsocGFyc2VJbnQoYShjKS5jc3MoImJvcmRlckxlZnRXaWR0aCIpLAoxMCl8fDApKyhwYXJzZUludChhKGMpLmNzcygicGFkZGluZ0xlZnQiKSwxMCl8fDApLChwYXJzZUludChhKGMpLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApKyhwYXJzZUludChhKGMpLmNzcygicGFkZGluZ1RvcCIpLDEwKXx8MCksKGY/TWF0aC5tYXgoYy5zY3JvbGxXaWR0aCxjLm9mZnNldFdpZHRoKTpjLm9mZnNldFdpZHRoKS0ocGFyc2VJbnQoYShjKS5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KGEoYykuY3NzKCJwYWRkaW5nUmlnaHQiKSwxMCl8fDApLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQtdGhpcy5tYXJnaW5zLnJpZ2h0LChmP01hdGgubWF4KGMuc2Nyb2xsSGVpZ2h0LGMub2Zmc2V0SGVpZ2h0KTpjLm9mZnNldEhlaWdodCktKHBhcnNlSW50KGEoYykuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KGEoYykuY3NzKCJwYWRkaW5nQm90dG9tIiksMTApfHwwKS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC0KdGhpcy5tYXJnaW5zLnRvcC10aGlzLm1hcmdpbnMuYm90dG9tXTt0aGlzLnJlbGF0aXZlX2NvbnRhaW5lcj1kfX1lbHNlIGlmKGQuY29udGFpbm1lbnQuY29uc3RydWN0b3I9PUFycmF5KXRoaXMuY29udGFpbm1lbnQ9ZC5jb250YWlubWVudH0sX2NvbnZlcnRQb3NpdGlvblRvOmZ1bmN0aW9uKGQsYyl7aWYoIWMpYz10aGlzLnBvc2l0aW9uO2Q9ZD09ImFic29sdXRlIj8xOi0xO3ZhciBmPXRoaXMuY3NzUG9zaXRpb249PSJhYnNvbHV0ZSImJiEodGhpcy5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiZhLnVpLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSk/dGhpcy5vZmZzZXRQYXJlbnQ6dGhpcy5zY3JvbGxQYXJlbnQsZz0vKGh0bWx8Ym9keSkvaS50ZXN0KGZbMF0udGFnTmFtZSk7cmV0dXJue3RvcDpjLnRvcCt0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AqZCt0aGlzLm9mZnNldC5wYXJlbnQudG9wKmQtKGEuYnJvd3Nlci5zYWZhcmkmJgphLmJyb3dzZXIudmVyc2lvbjw1MjYmJnRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/MDoodGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk6Zz8wOmYuc2Nyb2xsVG9wKCkpKmQpLGxlZnQ6Yy5sZWZ0K3RoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQqZCt0aGlzLm9mZnNldC5wYXJlbnQubGVmdCpkLShhLmJyb3dzZXIuc2FmYXJpJiZhLmJyb3dzZXIudmVyc2lvbjw1MjYmJnRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/MDoodGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOmc/MDpmLnNjcm9sbExlZnQoKSkqZCl9fSxfZ2VuZXJhdGVQb3NpdGlvbjpmdW5jdGlvbihkKXt2YXIgYz10aGlzLm9wdGlvbnMsZj10aGlzLmNzc1Bvc2l0aW9uPT0iYWJzb2x1dGUiJiYhKHRoaXMuc2Nyb2xsUGFyZW50WzBdIT1kb2N1bWVudCYmYS51aS5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSwKdGhpcy5vZmZzZXRQYXJlbnRbMF0pKT90aGlzLm9mZnNldFBhcmVudDp0aGlzLnNjcm9sbFBhcmVudCxnPS8oaHRtbHxib2R5KS9pLnRlc3QoZlswXS50YWdOYW1lKSxlPWQucGFnZVgsaT1kLnBhZ2VZO2lmKHRoaXMub3JpZ2luYWxQb3NpdGlvbil7dmFyIGI7aWYodGhpcy5jb250YWlubWVudCl7aWYodGhpcy5yZWxhdGl2ZV9jb250YWluZXIpe2I9dGhpcy5yZWxhdGl2ZV9jb250YWluZXIub2Zmc2V0KCk7Yj1bdGhpcy5jb250YWlubWVudFswXStiLmxlZnQsdGhpcy5jb250YWlubWVudFsxXStiLnRvcCx0aGlzLmNvbnRhaW5tZW50WzJdK2IubGVmdCx0aGlzLmNvbnRhaW5tZW50WzNdK2IudG9wXX1lbHNlIGI9dGhpcy5jb250YWlubWVudDtpZihkLnBhZ2VYLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ8YlswXSllPWJbMF0rdGhpcy5vZmZzZXQuY2xpY2subGVmdDtpZihkLnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDxiWzFdKWk9YlsxXSt0aGlzLm9mZnNldC5jbGljay50b3A7CmlmKGQucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdD5iWzJdKWU9YlsyXSt0aGlzLm9mZnNldC5jbGljay5sZWZ0O2lmKGQucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPmJbM10paT1iWzNdK3RoaXMub2Zmc2V0LmNsaWNrLnRvcH1pZihjLmdyaWQpe2k9dGhpcy5vcmlnaW5hbFBhZ2VZK01hdGgucm91bmQoKGktdGhpcy5vcmlnaW5hbFBhZ2VZKS9jLmdyaWRbMV0pKmMuZ3JpZFsxXTtpPWI/IShpLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDxiWzFdfHxpLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD5iWzNdKT9pOiEoaS10aGlzLm9mZnNldC5jbGljay50b3A8YlsxXSk/aS1jLmdyaWRbMV06aStjLmdyaWRbMV06aTtlPXRoaXMub3JpZ2luYWxQYWdlWCtNYXRoLnJvdW5kKChlLXRoaXMub3JpZ2luYWxQYWdlWCkvYy5ncmlkWzBdKSpjLmdyaWRbMF07ZT1iPyEoZS10aGlzLm9mZnNldC5jbGljay5sZWZ0PGJbMF18fGUtdGhpcy5vZmZzZXQuY2xpY2subGVmdD5iWzJdKT9lOiEoZS10aGlzLm9mZnNldC5jbGljay5sZWZ0PApiWzBdKT9lLWMuZ3JpZFswXTplK2MuZ3JpZFswXTplfX1yZXR1cm57dG9wOmktdGhpcy5vZmZzZXQuY2xpY2sudG9wLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wKyhhLmJyb3dzZXIuc2FmYXJpJiZhLmJyb3dzZXIudmVyc2lvbjw1MjYmJnRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/MDp0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTpnPzA6Zi5zY3JvbGxUb3AoKSksbGVmdDplLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCsoYS5icm93c2VyLnNhZmFyaSYmYS5icm93c2VyLnZlcnNpb248NTI2JiZ0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPzA6dGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOmc/MDpmLnNjcm9sbExlZnQoKSl9fSxfY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmhlbHBlci5yZW1vdmVDbGFzcygidWktZHJhZ2dhYmxlLWRyYWdnaW5nIik7CnRoaXMuaGVscGVyWzBdIT10aGlzLmVsZW1lbnRbMF0mJiF0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwmJnRoaXMuaGVscGVyLnJlbW92ZSgpO3RoaXMuaGVscGVyPW51bGw7dGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsPWZhbHNlfSxfdHJpZ2dlcjpmdW5jdGlvbihkLGMsZil7Zj1mfHx0aGlzLl91aUhhc2goKTthLnVpLnBsdWdpbi5jYWxsKHRoaXMsZCxbYyxmXSk7aWYoZD09ImRyYWciKXRoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIik7cmV0dXJuIGEuV2lkZ2V0LnByb3RvdHlwZS5fdHJpZ2dlci5jYWxsKHRoaXMsZCxjLGYpfSxwbHVnaW5zOnt9LF91aUhhc2g6ZnVuY3Rpb24oKXtyZXR1cm57aGVscGVyOnRoaXMuaGVscGVyLHBvc2l0aW9uOnRoaXMucG9zaXRpb24sb3JpZ2luYWxQb3NpdGlvbjp0aGlzLm9yaWdpbmFsUG9zaXRpb24sb2Zmc2V0OnRoaXMucG9zaXRpb25BYnN9fX0pO2EuZXh0ZW5kKGEudWkuZHJhZ2dhYmxlLHt2ZXJzaW9uOiIxLjguMTMifSk7CmEudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwiY29ubmVjdFRvU29ydGFibGUiLHtzdGFydDpmdW5jdGlvbihkLGMpe3ZhciBmPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIiksZz1mLm9wdGlvbnMsZT1hLmV4dGVuZCh7fSxjLHtpdGVtOmYuZWxlbWVudH0pO2Yuc29ydGFibGVzPVtdO2EoZy5jb25uZWN0VG9Tb3J0YWJsZSkuZWFjaChmdW5jdGlvbigpe3ZhciBpPWEuZGF0YSh0aGlzLCJzb3J0YWJsZSIpO2lmKGkmJiFpLm9wdGlvbnMuZGlzYWJsZWQpe2Yuc29ydGFibGVzLnB1c2goe2luc3RhbmNlOmksc2hvdWxkUmV2ZXJ0Omkub3B0aW9ucy5yZXZlcnR9KTtpLnJlZnJlc2hQb3NpdGlvbnMoKTtpLl90cmlnZ2VyKCJhY3RpdmF0ZSIsZCxlKX19KX0sc3RvcDpmdW5jdGlvbihkLGMpe3ZhciBmPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIiksZz1hLmV4dGVuZCh7fSxjLHtpdGVtOmYuZWxlbWVudH0pO2EuZWFjaChmLnNvcnRhYmxlcyxmdW5jdGlvbigpe2lmKHRoaXMuaW5zdGFuY2UuaXNPdmVyKXt0aGlzLmluc3RhbmNlLmlzT3Zlcj0KMDtmLmNhbmNlbEhlbHBlclJlbW92YWw9dHJ1ZTt0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWw9ZmFsc2U7aWYodGhpcy5zaG91bGRSZXZlcnQpdGhpcy5pbnN0YW5jZS5vcHRpb25zLnJldmVydD10cnVlO3RoaXMuaW5zdGFuY2UuX21vdXNlU3RvcChkKTt0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyPXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5faGVscGVyO2Yub3B0aW9ucy5oZWxwZXI9PSJvcmlnaW5hbCImJnRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW0uY3NzKHt0b3A6ImF1dG8iLGxlZnQ6ImF1dG8ifSl9ZWxzZXt0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWw9ZmFsc2U7dGhpcy5pbnN0YW5jZS5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsZCxnKX19KX0sZHJhZzpmdW5jdGlvbihkLGMpe3ZhciBmPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIiksZz10aGlzO2EuZWFjaChmLnNvcnRhYmxlcyxmdW5jdGlvbigpe3RoaXMuaW5zdGFuY2UucG9zaXRpb25BYnM9CmYucG9zaXRpb25BYnM7dGhpcy5pbnN0YW5jZS5oZWxwZXJQcm9wb3J0aW9ucz1mLmhlbHBlclByb3BvcnRpb25zO3RoaXMuaW5zdGFuY2Uub2Zmc2V0LmNsaWNrPWYub2Zmc2V0LmNsaWNrO2lmKHRoaXMuaW5zdGFuY2UuX2ludGVyc2VjdHNXaXRoKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyQ2FjaGUpKXtpZighdGhpcy5pbnN0YW5jZS5pc092ZXIpe3RoaXMuaW5zdGFuY2UuaXNPdmVyPTE7dGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbT1hKGcpLmNsb25lKCkucmVtb3ZlQXR0cigiaWQiKS5hcHBlbmRUbyh0aGlzLmluc3RhbmNlLmVsZW1lbnQpLmRhdGEoInNvcnRhYmxlLWl0ZW0iLHRydWUpO3RoaXMuaW5zdGFuY2Uub3B0aW9ucy5faGVscGVyPXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oZWxwZXI7dGhpcy5pbnN0YW5jZS5vcHRpb25zLmhlbHBlcj1mdW5jdGlvbigpe3JldHVybiBjLmhlbHBlclswXX07ZC50YXJnZXQ9dGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbVswXTt0aGlzLmluc3RhbmNlLl9tb3VzZUNhcHR1cmUoZCwKdHJ1ZSk7dGhpcy5pbnN0YW5jZS5fbW91c2VTdGFydChkLHRydWUsdHJ1ZSk7dGhpcy5pbnN0YW5jZS5vZmZzZXQuY2xpY2sudG9wPWYub2Zmc2V0LmNsaWNrLnRvcDt0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljay5sZWZ0PWYub2Zmc2V0LmNsaWNrLmxlZnQ7dGhpcy5pbnN0YW5jZS5vZmZzZXQucGFyZW50LmxlZnQtPWYub2Zmc2V0LnBhcmVudC5sZWZ0LXRoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC5sZWZ0O3RoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC50b3AtPWYub2Zmc2V0LnBhcmVudC50b3AtdGhpcy5pbnN0YW5jZS5vZmZzZXQucGFyZW50LnRvcDtmLl90cmlnZ2VyKCJ0b1NvcnRhYmxlIixkKTtmLmRyb3BwZWQ9dGhpcy5pbnN0YW5jZS5lbGVtZW50O2YuY3VycmVudEl0ZW09Zi5lbGVtZW50O3RoaXMuaW5zdGFuY2UuZnJvbU91dHNpZGU9Zn10aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtJiZ0aGlzLmluc3RhbmNlLl9tb3VzZURyYWcoZCl9ZWxzZSBpZih0aGlzLmluc3RhbmNlLmlzT3Zlcil7dGhpcy5pbnN0YW5jZS5pc092ZXI9CjA7dGhpcy5pbnN0YW5jZS5jYW5jZWxIZWxwZXJSZW1vdmFsPXRydWU7dGhpcy5pbnN0YW5jZS5vcHRpb25zLnJldmVydD1mYWxzZTt0aGlzLmluc3RhbmNlLl90cmlnZ2VyKCJvdXQiLGQsdGhpcy5pbnN0YW5jZS5fdWlIYXNoKHRoaXMuaW5zdGFuY2UpKTt0aGlzLmluc3RhbmNlLl9tb3VzZVN0b3AoZCx0cnVlKTt0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyPXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5faGVscGVyO3RoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW0ucmVtb3ZlKCk7dGhpcy5pbnN0YW5jZS5wbGFjZWhvbGRlciYmdGhpcy5pbnN0YW5jZS5wbGFjZWhvbGRlci5yZW1vdmUoKTtmLl90cmlnZ2VyKCJmcm9tU29ydGFibGUiLGQpO2YuZHJvcHBlZD1mYWxzZX19KX19KTthLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsImN1cnNvciIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIGQ9YSgiYm9keSIpLGM9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKS5vcHRpb25zO2lmKGQuY3NzKCJjdXJzb3IiKSljLl9jdXJzb3I9CmQuY3NzKCJjdXJzb3IiKTtkLmNzcygiY3Vyc29yIixjLmN1cnNvcil9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLm9wdGlvbnM7ZC5fY3Vyc29yJiZhKCJib2R5IikuY3NzKCJjdXJzb3IiLGQuX2N1cnNvcil9fSk7YS51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJvcGFjaXR5Iix7c3RhcnQ6ZnVuY3Rpb24oZCxjKXtkPWEoYy5oZWxwZXIpO2M9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKS5vcHRpb25zO2lmKGQuY3NzKCJvcGFjaXR5IikpYy5fb3BhY2l0eT1kLmNzcygib3BhY2l0eSIpO2QuY3NzKCJvcGFjaXR5IixjLm9wYWNpdHkpfSxzdG9wOmZ1bmN0aW9uKGQsYyl7ZD1hKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLm9wdGlvbnM7ZC5fb3BhY2l0eSYmYShjLmhlbHBlcikuY3NzKCJvcGFjaXR5IixkLl9vcGFjaXR5KX19KTthLnVpLnBsdWdpbi5hZGQoImRyYWdnYWJsZSIsInNjcm9sbCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKTsKaWYoZC5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiZkLnNjcm9sbFBhcmVudFswXS50YWdOYW1lIT0iSFRNTCIpZC5vdmVyZmxvd09mZnNldD1kLnNjcm9sbFBhcmVudC5vZmZzZXQoKX0sZHJhZzpmdW5jdGlvbihkKXt2YXIgYz1hKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLGY9Yy5vcHRpb25zLGc9ZmFsc2U7aWYoYy5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiZjLnNjcm9sbFBhcmVudFswXS50YWdOYW1lIT0iSFRNTCIpe2lmKCFmLmF4aXN8fGYuYXhpcyE9IngiKWlmKGMub3ZlcmZsb3dPZmZzZXQudG9wK2Muc2Nyb2xsUGFyZW50WzBdLm9mZnNldEhlaWdodC1kLnBhZ2VZPGYuc2Nyb2xsU2Vuc2l0aXZpdHkpYy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wPWc9Yy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wK2Yuc2Nyb2xsU3BlZWQ7ZWxzZSBpZihkLnBhZ2VZLWMub3ZlcmZsb3dPZmZzZXQudG9wPGYuc2Nyb2xsU2Vuc2l0aXZpdHkpYy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wPQpnPWMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcC1mLnNjcm9sbFNwZWVkO2lmKCFmLmF4aXN8fGYuYXhpcyE9InkiKWlmKGMub3ZlcmZsb3dPZmZzZXQubGVmdCtjLnNjcm9sbFBhcmVudFswXS5vZmZzZXRXaWR0aC1kLnBhZ2VYPGYuc2Nyb2xsU2Vuc2l0aXZpdHkpYy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdD1nPWMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQrZi5zY3JvbGxTcGVlZDtlbHNlIGlmKGQucGFnZVgtYy5vdmVyZmxvd09mZnNldC5sZWZ0PGYuc2Nyb2xsU2Vuc2l0aXZpdHkpYy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdD1nPWMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQtZi5zY3JvbGxTcGVlZH1lbHNle2lmKCFmLmF4aXN8fGYuYXhpcyE9IngiKWlmKGQucGFnZVktYShkb2N1bWVudCkuc2Nyb2xsVG9wKCk8Zi5zY3JvbGxTZW5zaXRpdml0eSlnPWEoZG9jdW1lbnQpLnNjcm9sbFRvcChhKGRvY3VtZW50KS5zY3JvbGxUb3AoKS1mLnNjcm9sbFNwZWVkKTsKZWxzZSBpZihhKHdpbmRvdykuaGVpZ2h0KCktKGQucGFnZVktYShkb2N1bWVudCkuc2Nyb2xsVG9wKCkpPGYuc2Nyb2xsU2Vuc2l0aXZpdHkpZz1hKGRvY3VtZW50KS5zY3JvbGxUb3AoYShkb2N1bWVudCkuc2Nyb2xsVG9wKCkrZi5zY3JvbGxTcGVlZCk7aWYoIWYuYXhpc3x8Zi5heGlzIT0ieSIpaWYoZC5wYWdlWC1hKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCk8Zi5zY3JvbGxTZW5zaXRpdml0eSlnPWEoZG9jdW1lbnQpLnNjcm9sbExlZnQoYShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpLWYuc2Nyb2xsU3BlZWQpO2Vsc2UgaWYoYSh3aW5kb3cpLndpZHRoKCktKGQucGFnZVgtYShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKTxmLnNjcm9sbFNlbnNpdGl2aXR5KWc9YShkb2N1bWVudCkuc2Nyb2xsTGVmdChhKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkrZi5zY3JvbGxTcGVlZCl9ZyE9PWZhbHNlJiZhLnVpLmRkbWFuYWdlciYmIWYuZHJvcEJlaGF2aW91ciYmYS51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoYywKZCl9fSk7YS51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJzbmFwIix7c3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLGM9ZC5vcHRpb25zO2Quc25hcEVsZW1lbnRzPVtdO2EoYy5zbmFwLmNvbnN0cnVjdG9yIT1TdHJpbmc/Yy5zbmFwLml0ZW1zfHwiOmRhdGEoZHJhZ2dhYmxlKSI6Yy5zbmFwKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGY9YSh0aGlzKSxnPWYub2Zmc2V0KCk7dGhpcyE9ZC5lbGVtZW50WzBdJiZkLnNuYXBFbGVtZW50cy5wdXNoKHtpdGVtOnRoaXMsd2lkdGg6Zi5vdXRlcldpZHRoKCksaGVpZ2h0OmYub3V0ZXJIZWlnaHQoKSx0b3A6Zy50b3AsbGVmdDpnLmxlZnR9KX0pfSxkcmFnOmZ1bmN0aW9uKGQsYyl7Zm9yKHZhciBmPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIiksZz1mLm9wdGlvbnMsZT1nLnNuYXBUb2xlcmFuY2UsaT1jLm9mZnNldC5sZWZ0LGI9aStmLmhlbHBlclByb3BvcnRpb25zLndpZHRoLGg9Yy5vZmZzZXQudG9wLApqPWgrZi5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbD1mLnNuYXBFbGVtZW50cy5sZW5ndGgtMTtsPj0wO2wtLSl7dmFyIG89Zi5zbmFwRWxlbWVudHNbbF0ubGVmdCxuPW8rZi5zbmFwRWxlbWVudHNbbF0ud2lkdGgsaz1mLnNuYXBFbGVtZW50c1tsXS50b3AsbT1rK2Yuc25hcEVsZW1lbnRzW2xdLmhlaWdodDtpZihvLWU8aSYmaTxuK2UmJmstZTxoJiZoPG0rZXx8by1lPGkmJmk8bitlJiZrLWU8aiYmajxtK2V8fG8tZTxiJiZiPG4rZSYmay1lPGgmJmg8bStlfHxvLWU8YiYmYjxuK2UmJmstZTxqJiZqPG0rZSl7aWYoZy5zbmFwTW9kZSE9ImlubmVyIil7dmFyIHA9TWF0aC5hYnMoay1qKTw9ZSxxPU1hdGguYWJzKG0taCk8PWUscz1NYXRoLmFicyhvLWIpPD1lLHI9TWF0aC5hYnMobi1pKTw9ZTtpZihwKWMucG9zaXRpb24udG9wPWYuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDprLWYuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGxlZnQ6MH0pLnRvcC1mLm1hcmdpbnMudG9wOwppZihxKWMucG9zaXRpb24udG9wPWYuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDptLGxlZnQ6MH0pLnRvcC1mLm1hcmdpbnMudG9wO2lmKHMpYy5wb3NpdGlvbi5sZWZ0PWYuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6by1mLmhlbHBlclByb3BvcnRpb25zLndpZHRofSkubGVmdC1mLm1hcmdpbnMubGVmdDtpZihyKWMucG9zaXRpb24ubGVmdD1mLl9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6MCxsZWZ0Om59KS5sZWZ0LWYubWFyZ2lucy5sZWZ0fXZhciB1PXB8fHF8fHN8fHI7aWYoZy5zbmFwTW9kZSE9Im91dGVyIil7cD1NYXRoLmFicyhrLWgpPD1lO3E9TWF0aC5hYnMobS1qKTw9ZTtzPU1hdGguYWJzKG8taSk8PWU7cj1NYXRoLmFicyhuLWIpPD1lO2lmKHApYy5wb3NpdGlvbi50b3A9Zi5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOmssbGVmdDowfSkudG9wLWYubWFyZ2lucy50b3A7aWYocSljLnBvc2l0aW9uLnRvcD0KZi5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOm0tZi5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbGVmdDowfSkudG9wLWYubWFyZ2lucy50b3A7aWYocyljLnBvc2l0aW9uLmxlZnQ9Zi5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOjAsbGVmdDpvfSkubGVmdC1mLm1hcmdpbnMubGVmdDtpZihyKWMucG9zaXRpb24ubGVmdD1mLl9jb252ZXJ0UG9zaXRpb25UbygicmVsYXRpdmUiLHt0b3A6MCxsZWZ0Om4tZi5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aH0pLmxlZnQtZi5tYXJnaW5zLmxlZnR9aWYoIWYuc25hcEVsZW1lbnRzW2xdLnNuYXBwaW5nJiYocHx8cXx8c3x8cnx8dSkpZi5vcHRpb25zLnNuYXAuc25hcCYmZi5vcHRpb25zLnNuYXAuc25hcC5jYWxsKGYuZWxlbWVudCxkLGEuZXh0ZW5kKGYuX3VpSGFzaCgpLHtzbmFwSXRlbTpmLnNuYXBFbGVtZW50c1tsXS5pdGVtfSkpO2Yuc25hcEVsZW1lbnRzW2xdLnNuYXBwaW5nPXB8fHF8fHN8fHJ8fHV9ZWxzZXtmLnNuYXBFbGVtZW50c1tsXS5zbmFwcGluZyYmCmYub3B0aW9ucy5zbmFwLnJlbGVhc2UmJmYub3B0aW9ucy5zbmFwLnJlbGVhc2UuY2FsbChmLmVsZW1lbnQsZCxhLmV4dGVuZChmLl91aUhhc2goKSx7c25hcEl0ZW06Zi5zbmFwRWxlbWVudHNbbF0uaXRlbX0pKTtmLnNuYXBFbGVtZW50c1tsXS5zbmFwcGluZz1mYWxzZX19fX0pO2EudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwic3RhY2siLHtzdGFydDpmdW5jdGlvbigpe3ZhciBkPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIikub3B0aW9ucztkPWEubWFrZUFycmF5KGEoZC5zdGFjaykpLnNvcnQoZnVuY3Rpb24oZixnKXtyZXR1cm4ocGFyc2VJbnQoYShmKS5jc3MoInpJbmRleCIpLDEwKXx8MCktKHBhcnNlSW50KGEoZykuY3NzKCJ6SW5kZXgiKSwxMCl8fDApfSk7aWYoZC5sZW5ndGgpe3ZhciBjPXBhcnNlSW50KGRbMF0uc3R5bGUuekluZGV4KXx8MDthKGQpLmVhY2goZnVuY3Rpb24oZil7dGhpcy5zdHlsZS56SW5kZXg9YytmfSk7dGhpc1swXS5zdHlsZS56SW5kZXg9YytkLmxlbmd0aH19fSk7CmEudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwiekluZGV4Iix7c3RhcnQ6ZnVuY3Rpb24oZCxjKXtkPWEoYy5oZWxwZXIpO2M9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKS5vcHRpb25zO2lmKGQuY3NzKCJ6SW5kZXgiKSljLl96SW5kZXg9ZC5jc3MoInpJbmRleCIpO2QuY3NzKCJ6SW5kZXgiLGMuekluZGV4KX0sc3RvcDpmdW5jdGlvbihkLGMpe2Q9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKS5vcHRpb25zO2QuX3pJbmRleCYmYShjLmhlbHBlcikuY3NzKCJ6SW5kZXgiLGQuX3pJbmRleCl9fSl9KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS53aWRnZXQoInVpLmRyb3BwYWJsZSIse3dpZGdldEV2ZW50UHJlZml4OiJkcm9wIixvcHRpb25zOnthY2NlcHQ6IioiLGFjdGl2ZUNsYXNzOmZhbHNlLGFkZENsYXNzZXM6dHJ1ZSxncmVlZHk6ZmFsc2UsaG92ZXJDbGFzczpmYWxzZSxzY29wZToiZGVmYXVsdCIsdG9sZXJhbmNlOiJpbnRlcnNlY3QifSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vcHRpb25zLGM9ZC5hY2NlcHQ7dGhpcy5pc292ZXI9MDt0aGlzLmlzb3V0PTE7dGhpcy5hY2NlcHQ9YS5pc0Z1bmN0aW9uKGMpP2M6ZnVuY3Rpb24oZil7cmV0dXJuIGYuaXMoYyl9O3RoaXMucHJvcG9ydGlvbnM9e3dpZHRoOnRoaXMuZWxlbWVudFswXS5vZmZzZXRXaWR0aCxoZWlnaHQ6dGhpcy5lbGVtZW50WzBdLm9mZnNldEhlaWdodH07YS51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tkLnNjb3BlXT1hLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW2Quc2NvcGVdfHxbXTthLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW2Quc2NvcGVdLnB1c2godGhpcyk7CmQuYWRkQ2xhc3NlcyYmdGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1kcm9wcGFibGUiKX0sZGVzdHJveTpmdW5jdGlvbigpe2Zvcih2YXIgZD1hLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3RoaXMub3B0aW9ucy5zY29wZV0sYz0wO2M8ZC5sZW5ndGg7YysrKWRbY109PXRoaXMmJmQuc3BsaWNlKGMsMSk7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1kcm9wcGFibGUgdWktZHJvcHBhYmxlLWRpc2FibGVkIikucmVtb3ZlRGF0YSgiZHJvcHBhYmxlIikudW5iaW5kKCIuZHJvcHBhYmxlIik7cmV0dXJuIHRoaXN9LF9zZXRPcHRpb246ZnVuY3Rpb24oZCxjKXtpZihkPT0iYWNjZXB0Iil0aGlzLmFjY2VwdD1hLmlzRnVuY3Rpb24oYyk/YzpmdW5jdGlvbihmKXtyZXR1cm4gZi5pcyhjKX07YS5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxfYWN0aXZhdGU6ZnVuY3Rpb24oZCl7dmFyIGM9YS51aS5kZG1hbmFnZXIuY3VycmVudDt0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MmJgp0aGlzLmVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtjJiZ0aGlzLl90cmlnZ2VyKCJhY3RpdmF0ZSIsZCx0aGlzLnVpKGMpKX0sX2RlYWN0aXZhdGU6ZnVuY3Rpb24oZCl7dmFyIGM9YS51aS5kZG1hbmFnZXIuY3VycmVudDt0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MmJnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO2MmJnRoaXMuX3RyaWdnZXIoImRlYWN0aXZhdGUiLGQsdGhpcy51aShjKSl9LF9vdmVyOmZ1bmN0aW9uKGQpe3ZhciBjPWEudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7aWYoISghY3x8KGMuY3VycmVudEl0ZW18fGMuZWxlbWVudClbMF09PXRoaXMuZWxlbWVudFswXSkpaWYodGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sYy5jdXJyZW50SXRlbXx8Yy5lbGVtZW50KSl7dGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyk7CnRoaXMuX3RyaWdnZXIoIm92ZXIiLGQsdGhpcy51aShjKSl9fSxfb3V0OmZ1bmN0aW9uKGQpe3ZhciBjPWEudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7aWYoISghY3x8KGMuY3VycmVudEl0ZW18fGMuZWxlbWVudClbMF09PXRoaXMuZWxlbWVudFswXSkpaWYodGhpcy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sYy5jdXJyZW50SXRlbXx8Yy5lbGVtZW50KSl7dGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MmJnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyk7dGhpcy5fdHJpZ2dlcigib3V0IixkLHRoaXMudWkoYykpfX0sX2Ryb3A6ZnVuY3Rpb24oZCxjKXt2YXIgZj1jfHxhLnVpLmRkbWFuYWdlci5jdXJyZW50O2lmKCFmfHwoZi5jdXJyZW50SXRlbXx8Zi5lbGVtZW50KVswXT09dGhpcy5lbGVtZW50WzBdKXJldHVybiBmYWxzZTt2YXIgZz1mYWxzZTt0aGlzLmVsZW1lbnQuZmluZCgiOmRhdGEoZHJvcHBhYmxlKSIpLm5vdCgiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT0KYS5kYXRhKHRoaXMsImRyb3BwYWJsZSIpO2lmKGUub3B0aW9ucy5ncmVlZHkmJiFlLm9wdGlvbnMuZGlzYWJsZWQmJmUub3B0aW9ucy5zY29wZT09Zi5vcHRpb25zLnNjb3BlJiZlLmFjY2VwdC5jYWxsKGUuZWxlbWVudFswXSxmLmN1cnJlbnRJdGVtfHxmLmVsZW1lbnQpJiZhLnVpLmludGVyc2VjdChmLGEuZXh0ZW5kKGUse29mZnNldDplLmVsZW1lbnQub2Zmc2V0KCl9KSxlLm9wdGlvbnMudG9sZXJhbmNlKSl7Zz10cnVlO3JldHVybiBmYWxzZX19KTtpZihnKXJldHVybiBmYWxzZTtpZih0aGlzLmFjY2VwdC5jYWxsKHRoaXMuZWxlbWVudFswXSxmLmN1cnJlbnRJdGVtfHxmLmVsZW1lbnQpKXt0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MmJnRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO3RoaXMub3B0aW9ucy5ob3ZlckNsYXNzJiZ0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpO3RoaXMuX3RyaWdnZXIoImRyb3AiLApkLHRoaXMudWkoZikpO3JldHVybiB0aGlzLmVsZW1lbnR9cmV0dXJuIGZhbHNlfSx1aTpmdW5jdGlvbihkKXtyZXR1cm57ZHJhZ2dhYmxlOmQuY3VycmVudEl0ZW18fGQuZWxlbWVudCxoZWxwZXI6ZC5oZWxwZXIscG9zaXRpb246ZC5wb3NpdGlvbixvZmZzZXQ6ZC5wb3NpdGlvbkFic319fSk7YS5leHRlbmQoYS51aS5kcm9wcGFibGUse3ZlcnNpb246IjEuOC4xMyJ9KTthLnVpLmludGVyc2VjdD1mdW5jdGlvbihkLGMsZil7aWYoIWMub2Zmc2V0KXJldHVybiBmYWxzZTt2YXIgZz0oZC5wb3NpdGlvbkFic3x8ZC5wb3NpdGlvbi5hYnNvbHV0ZSkubGVmdCxlPWcrZC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aCxpPShkLnBvc2l0aW9uQWJzfHxkLnBvc2l0aW9uLmFic29sdXRlKS50b3AsYj1pK2QuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGg9Yy5vZmZzZXQubGVmdCxqPWgrYy5wcm9wb3J0aW9ucy53aWR0aCxsPWMub2Zmc2V0LnRvcCxvPWwrYy5wcm9wb3J0aW9ucy5oZWlnaHQ7CnN3aXRjaChmKXtjYXNlICJmaXQiOnJldHVybiBoPD1nJiZlPD1qJiZsPD1pJiZiPD1vO2Nhc2UgImludGVyc2VjdCI6cmV0dXJuIGg8ZytkLmhlbHBlclByb3BvcnRpb25zLndpZHRoLzImJmUtZC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yPGomJmw8aStkLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC8yJiZiLWQuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzI8bztjYXNlICJwb2ludGVyIjpyZXR1cm4gYS51aS5pc092ZXIoKGQucG9zaXRpb25BYnN8fGQucG9zaXRpb24uYWJzb2x1dGUpLnRvcCsoZC5jbGlja09mZnNldHx8ZC5vZmZzZXQuY2xpY2spLnRvcCwoZC5wb3NpdGlvbkFic3x8ZC5wb3NpdGlvbi5hYnNvbHV0ZSkubGVmdCsoZC5jbGlja09mZnNldHx8ZC5vZmZzZXQuY2xpY2spLmxlZnQsbCxoLGMucHJvcG9ydGlvbnMuaGVpZ2h0LGMucHJvcG9ydGlvbnMud2lkdGgpO2Nhc2UgInRvdWNoIjpyZXR1cm4oaT49bCYmaTw9b3x8Yj49bCYmYjw9b3x8aTxsJiZiPm8pJiYoZz49CmgmJmc8PWp8fGU+PWgmJmU8PWp8fGc8aCYmZT5qKTtkZWZhdWx0OnJldHVybiBmYWxzZX19O2EudWkuZGRtYW5hZ2VyPXtjdXJyZW50Om51bGwsZHJvcHBhYmxlczp7ImRlZmF1bHQiOltdfSxwcmVwYXJlT2Zmc2V0czpmdW5jdGlvbihkLGMpe3ZhciBmPWEudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbZC5vcHRpb25zLnNjb3BlXXx8W10sZz1jP2MudHlwZTpudWxsLGU9KGQuY3VycmVudEl0ZW18fGQuZWxlbWVudCkuZmluZCgiOmRhdGEoZHJvcHBhYmxlKSIpLmFuZFNlbGYoKSxpPTA7YTpmb3IoO2k8Zi5sZW5ndGg7aSsrKWlmKCEoZltpXS5vcHRpb25zLmRpc2FibGVkfHxkJiYhZltpXS5hY2NlcHQuY2FsbChmW2ldLmVsZW1lbnRbMF0sZC5jdXJyZW50SXRlbXx8ZC5lbGVtZW50KSkpe2Zvcih2YXIgYj0wO2I8ZS5sZW5ndGg7YisrKWlmKGVbYl09PWZbaV0uZWxlbWVudFswXSl7ZltpXS5wcm9wb3J0aW9ucy5oZWlnaHQ9MDtjb250aW51ZSBhfWZbaV0udmlzaWJsZT1mW2ldLmVsZW1lbnQuY3NzKCJkaXNwbGF5IikhPQoibm9uZSI7aWYoZltpXS52aXNpYmxlKXtnPT0ibW91c2Vkb3duIiYmZltpXS5fYWN0aXZhdGUuY2FsbChmW2ldLGMpO2ZbaV0ub2Zmc2V0PWZbaV0uZWxlbWVudC5vZmZzZXQoKTtmW2ldLnByb3BvcnRpb25zPXt3aWR0aDpmW2ldLmVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsaGVpZ2h0OmZbaV0uZWxlbWVudFswXS5vZmZzZXRIZWlnaHR9fX19LGRyb3A6ZnVuY3Rpb24oZCxjKXt2YXIgZj1mYWxzZTthLmVhY2goYS51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tkLm9wdGlvbnMuc2NvcGVdfHxbXSxmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucyl7aWYoIXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmdGhpcy52aXNpYmxlJiZhLnVpLmludGVyc2VjdChkLHRoaXMsdGhpcy5vcHRpb25zLnRvbGVyYW5jZSkpZj1mfHx0aGlzLl9kcm9wLmNhbGwodGhpcyxjKTtpZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLnZpc2libGUmJnRoaXMuYWNjZXB0LmNhbGwodGhpcy5lbGVtZW50WzBdLGQuY3VycmVudEl0ZW18fApkLmVsZW1lbnQpKXt0aGlzLmlzb3V0PTE7dGhpcy5pc292ZXI9MDt0aGlzLl9kZWFjdGl2YXRlLmNhbGwodGhpcyxjKX19fSk7cmV0dXJuIGZ9LGRyYWc6ZnVuY3Rpb24oZCxjKXtkLm9wdGlvbnMucmVmcmVzaFBvc2l0aW9ucyYmYS51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHMoZCxjKTthLmVhY2goYS51aS5kZG1hbmFnZXIuZHJvcHBhYmxlc1tkLm9wdGlvbnMuc2NvcGVdfHxbXSxmdW5jdGlvbigpe2lmKCEodGhpcy5vcHRpb25zLmRpc2FibGVkfHx0aGlzLmdyZWVkeUNoaWxkfHwhdGhpcy52aXNpYmxlKSl7dmFyIGY9YS51aS5pbnRlcnNlY3QoZCx0aGlzLHRoaXMub3B0aW9ucy50b2xlcmFuY2UpO2lmKGY9IWYmJnRoaXMuaXNvdmVyPT0xPyJpc291dCI6ZiYmdGhpcy5pc292ZXI9PTA/Imlzb3ZlciI6bnVsbCl7dmFyIGc7aWYodGhpcy5vcHRpb25zLmdyZWVkeSl7dmFyIGU9dGhpcy5lbGVtZW50LnBhcmVudHMoIjpkYXRhKGRyb3BwYWJsZSk6ZXEoMCkiKTtpZihlLmxlbmd0aCl7Zz0KYS5kYXRhKGVbMF0sImRyb3BwYWJsZSIpO2cuZ3JlZWR5Q2hpbGQ9Zj09Imlzb3ZlciI/MTowfX1pZihnJiZmPT0iaXNvdmVyIil7Zy5pc292ZXI9MDtnLmlzb3V0PTE7Zy5fb3V0LmNhbGwoZyxjKX10aGlzW2ZdPTE7dGhpc1tmPT0iaXNvdXQiPyJpc292ZXIiOiJpc291dCJdPTA7dGhpc1tmPT0iaXNvdmVyIj8iX292ZXIiOiJfb3V0Il0uY2FsbCh0aGlzLGMpO2lmKGcmJmY9PSJpc291dCIpe2cuaXNvdXQ9MDtnLmlzb3Zlcj0xO2cuX292ZXIuY2FsbChnLGMpfX19fSl9fX0pKGpRdWVyeSk7CihmdW5jdGlvbihhKXthLndpZGdldCgidWkucmVzaXphYmxlIixhLnVpLm1vdXNlLHt3aWRnZXRFdmVudFByZWZpeDoicmVzaXplIixvcHRpb25zOnthbHNvUmVzaXplOmZhbHNlLGFuaW1hdGU6ZmFsc2UsYW5pbWF0ZUR1cmF0aW9uOiJzbG93IixhbmltYXRlRWFzaW5nOiJzd2luZyIsYXNwZWN0UmF0aW86ZmFsc2UsYXV0b0hpZGU6ZmFsc2UsY29udGFpbm1lbnQ6ZmFsc2UsZ2hvc3Q6ZmFsc2UsZ3JpZDpmYWxzZSxoYW5kbGVzOiJlLHMsc2UiLGhlbHBlcjpmYWxzZSxtYXhIZWlnaHQ6bnVsbCxtYXhXaWR0aDpudWxsLG1pbkhlaWdodDoxMCxtaW5XaWR0aDoxMCx6SW5kZXg6MUUzfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGY9dGhpcyxnPXRoaXMub3B0aW9uczt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXJlc2l6YWJsZSIpO2EuZXh0ZW5kKHRoaXMse19hc3BlY3RSYXRpbzohIWcuYXNwZWN0UmF0aW8sYXNwZWN0UmF0aW86Zy5hc3BlY3RSYXRpbyxvcmlnaW5hbEVsZW1lbnQ6dGhpcy5lbGVtZW50LApfcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50czpbXSxfaGVscGVyOmcuaGVscGVyfHxnLmdob3N0fHxnLmFuaW1hdGU/Zy5oZWxwZXJ8fCJ1aS1yZXNpemFibGUtaGVscGVyIjpudWxsfSk7aWYodGhpcy5lbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC9jYW52YXN8dGV4dGFyZWF8aW5wdXR8c2VsZWN0fGJ1dHRvbnxpbWcvaSkpey9yZWxhdGl2ZS8udGVzdCh0aGlzLmVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpKSYmYS5icm93c2VyLm9wZXJhJiZ0aGlzLmVsZW1lbnQuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLHRvcDoiYXV0byIsbGVmdDoiYXV0byJ9KTt0aGlzLmVsZW1lbnQud3JhcChhKCc8ZGl2IGNsYXNzPSJ1aS13cmFwcGVyIiBzdHlsZT0ib3ZlcmZsb3c6IGhpZGRlbjsiPjwvZGl2PicpLmNzcyh7cG9zaXRpb246dGhpcy5lbGVtZW50LmNzcygicG9zaXRpb24iKSx3aWR0aDp0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSwKdG9wOnRoaXMuZWxlbWVudC5jc3MoInRvcCIpLGxlZnQ6dGhpcy5lbGVtZW50LmNzcygibGVmdCIpfSkpO3RoaXMuZWxlbWVudD10aGlzLmVsZW1lbnQucGFyZW50KCkuZGF0YSgicmVzaXphYmxlIix0aGlzLmVsZW1lbnQuZGF0YSgicmVzaXphYmxlIikpO3RoaXMuZWxlbWVudElzV3JhcHBlcj10cnVlO3RoaXMuZWxlbWVudC5jc3Moe21hcmdpbkxlZnQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5MZWZ0IiksbWFyZ2luVG9wOnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luVG9wIiksbWFyZ2luUmlnaHQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5SaWdodCIpLG1hcmdpbkJvdHRvbTp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpbkJvdHRvbSIpfSk7dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHttYXJnaW5MZWZ0OjAsbWFyZ2luVG9wOjAsbWFyZ2luUmlnaHQ6MCxtYXJnaW5Cb3R0b206MH0pO3RoaXMub3JpZ2luYWxSZXNpemVTdHlsZT0KdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJyZXNpemUiKTt0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoInJlc2l6ZSIsIm5vbmUiKTt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLnB1c2godGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHtwb3NpdGlvbjoic3RhdGljIix6b29tOjEsZGlzcGxheToiYmxvY2sifSkpO3RoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7bWFyZ2luOnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luIil9KTt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpfXRoaXMuaGFuZGxlcz1nLmhhbmRsZXN8fCghYSgiLnVpLXJlc2l6YWJsZS1oYW5kbGUiLHRoaXMuZWxlbWVudCkubGVuZ3RoPyJlLHMsc2UiOntuOiIudWktcmVzaXphYmxlLW4iLGU6Ii51aS1yZXNpemFibGUtZSIsczoiLnVpLXJlc2l6YWJsZS1zIix3OiIudWktcmVzaXphYmxlLXciLHNlOiIudWktcmVzaXphYmxlLXNlIixzdzoiLnVpLXJlc2l6YWJsZS1zdyIsbmU6Ii51aS1yZXNpemFibGUtbmUiLApudzoiLnVpLXJlc2l6YWJsZS1udyJ9KTtpZih0aGlzLmhhbmRsZXMuY29uc3RydWN0b3I9PVN0cmluZyl7aWYodGhpcy5oYW5kbGVzPT0iYWxsIil0aGlzLmhhbmRsZXM9Im4sZSxzLHcsc2Usc3csbmUsbnciO3ZhciBlPXRoaXMuaGFuZGxlcy5zcGxpdCgiLCIpO3RoaXMuaGFuZGxlcz17fTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIGI9YS50cmltKGVbaV0pLGg9YSgnPGRpdiBjbGFzcz0idWktcmVzaXphYmxlLWhhbmRsZSAnKygidWktcmVzaXphYmxlLSIrYikrJyI+PC9kaXY+Jyk7L3N3fHNlfG5lfG53Ly50ZXN0KGIpJiZoLmNzcyh7ekluZGV4OisrZy56SW5kZXh9KTsic2UiPT1iJiZoLmFkZENsYXNzKCJ1aS1pY29uIHVpLWljb24tZ3JpcHNtYWxsLWRpYWdvbmFsLXNlIik7dGhpcy5oYW5kbGVzW2JdPSIudWktcmVzaXphYmxlLSIrYjt0aGlzLmVsZW1lbnQuYXBwZW5kKGgpfX10aGlzLl9yZW5kZXJBeGlzPWZ1bmN0aW9uKGope2o9anx8dGhpcy5lbGVtZW50O2Zvcih2YXIgbCBpbiB0aGlzLmhhbmRsZXMpe2lmKHRoaXMuaGFuZGxlc1tsXS5jb25zdHJ1Y3Rvcj09ClN0cmluZyl0aGlzLmhhbmRsZXNbbF09YSh0aGlzLmhhbmRsZXNbbF0sdGhpcy5lbGVtZW50KS5zaG93KCk7aWYodGhpcy5lbGVtZW50SXNXcmFwcGVyJiZ0aGlzLm9yaWdpbmFsRWxlbWVudFswXS5ub2RlTmFtZS5tYXRjaCgvdGV4dGFyZWF8aW5wdXR8c2VsZWN0fGJ1dHRvbi9pKSl7dmFyIG89YSh0aGlzLmhhbmRsZXNbbF0sdGhpcy5lbGVtZW50KSxuPTA7bj0vc3d8bmV8bnd8c2V8bnxzLy50ZXN0KGwpP28ub3V0ZXJIZWlnaHQoKTpvLm91dGVyV2lkdGgoKTtvPVsicGFkZGluZyIsL25lfG53fG4vLnRlc3QobCk/IlRvcCI6L3NlfHN3fHMvLnRlc3QobCk/IkJvdHRvbSI6L15lJC8udGVzdChsKT8iUmlnaHQiOiJMZWZ0Il0uam9pbigiIik7ai5jc3MobyxuKTt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpfWEodGhpcy5oYW5kbGVzW2xdKX19O3RoaXMuX3JlbmRlckF4aXModGhpcy5lbGVtZW50KTt0aGlzLl9oYW5kbGVzPWEoIi51aS1yZXNpemFibGUtaGFuZGxlIix0aGlzLmVsZW1lbnQpLmRpc2FibGVTZWxlY3Rpb24oKTsKdGhpcy5faGFuZGxlcy5tb3VzZW92ZXIoZnVuY3Rpb24oKXtpZighZi5yZXNpemluZyl7aWYodGhpcy5jbGFzc05hbWUpdmFyIGo9dGhpcy5jbGFzc05hbWUubWF0Y2goL3VpLXJlc2l6YWJsZS0oc2V8c3d8bmV8bnd8bnxlfHN8dykvaSk7Zi5heGlzPWomJmpbMV0/alsxXToic2UifX0pO2lmKGcuYXV0b0hpZGUpe3RoaXMuX2hhbmRsZXMuaGlkZSgpO2EodGhpcy5lbGVtZW50KS5hZGRDbGFzcygidWktcmVzaXphYmxlLWF1dG9oaWRlIikuaG92ZXIoZnVuY3Rpb24oKXtpZighZy5kaXNhYmxlZCl7YSh0aGlzKS5yZW1vdmVDbGFzcygidWktcmVzaXphYmxlLWF1dG9oaWRlIik7Zi5faGFuZGxlcy5zaG93KCl9fSxmdW5jdGlvbigpe2lmKCFnLmRpc2FibGVkKWlmKCFmLnJlc2l6aW5nKXthKHRoaXMpLmFkZENsYXNzKCJ1aS1yZXNpemFibGUtYXV0b2hpZGUiKTtmLl9oYW5kbGVzLmhpZGUoKX19KX10aGlzLl9tb3VzZUluaXQoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX21vdXNlRGVzdHJveSgpOwp2YXIgZj1mdW5jdGlvbihlKXthKGUpLnJlbW92ZUNsYXNzKCJ1aS1yZXNpemFibGUgdWktcmVzaXphYmxlLWRpc2FibGVkIHVpLXJlc2l6YWJsZS1yZXNpemluZyIpLnJlbW92ZURhdGEoInJlc2l6YWJsZSIpLnVuYmluZCgiLnJlc2l6YWJsZSIpLmZpbmQoIi51aS1yZXNpemFibGUtaGFuZGxlIikucmVtb3ZlKCl9O2lmKHRoaXMuZWxlbWVudElzV3JhcHBlcil7Zih0aGlzLmVsZW1lbnQpO3ZhciBnPXRoaXMuZWxlbWVudDtnLmFmdGVyKHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7cG9zaXRpb246Zy5jc3MoInBvc2l0aW9uIiksd2lkdGg6Zy5vdXRlcldpZHRoKCksaGVpZ2h0Omcub3V0ZXJIZWlnaHQoKSx0b3A6Zy5jc3MoInRvcCIpLGxlZnQ6Zy5jc3MoImxlZnQiKX0pKS5yZW1vdmUoKX10aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoInJlc2l6ZSIsdGhpcy5vcmlnaW5hbFJlc2l6ZVN0eWxlKTtmKHRoaXMub3JpZ2luYWxFbGVtZW50KTtyZXR1cm4gdGhpc30sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbihmKXt2YXIgZz0KZmFsc2U7Zm9yKHZhciBlIGluIHRoaXMuaGFuZGxlcylpZihhKHRoaXMuaGFuZGxlc1tlXSlbMF09PWYudGFyZ2V0KWc9dHJ1ZTtyZXR1cm4hdGhpcy5vcHRpb25zLmRpc2FibGVkJiZnfSxfbW91c2VTdGFydDpmdW5jdGlvbihmKXt2YXIgZz10aGlzLm9wdGlvbnMsZT10aGlzLmVsZW1lbnQucG9zaXRpb24oKSxpPXRoaXMuZWxlbWVudDt0aGlzLnJlc2l6aW5nPXRydWU7dGhpcy5kb2N1bWVudFNjcm9sbD17dG9wOmEoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLGxlZnQ6YShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpfTtpZihpLmlzKCIudWktZHJhZ2dhYmxlIil8fC9hYnNvbHV0ZS8udGVzdChpLmNzcygicG9zaXRpb24iKSkpaS5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdG9wOmUudG9wLGxlZnQ6ZS5sZWZ0fSk7YS5icm93c2VyLm9wZXJhJiYvcmVsYXRpdmUvLnRlc3QoaS5jc3MoInBvc2l0aW9uIikpJiZpLmNzcyh7cG9zaXRpb246InJlbGF0aXZlIix0b3A6ImF1dG8iLGxlZnQ6ImF1dG8ifSk7CnRoaXMuX3JlbmRlclByb3h5KCk7ZT1kKHRoaXMuaGVscGVyLmNzcygibGVmdCIpKTt2YXIgYj1kKHRoaXMuaGVscGVyLmNzcygidG9wIikpO2lmKGcuY29udGFpbm1lbnQpe2UrPWEoZy5jb250YWlubWVudCkuc2Nyb2xsTGVmdCgpfHwwO2IrPWEoZy5jb250YWlubWVudCkuc2Nyb2xsVG9wKCl8fDB9dGhpcy5vZmZzZXQ9dGhpcy5oZWxwZXIub2Zmc2V0KCk7dGhpcy5wb3NpdGlvbj17bGVmdDplLHRvcDpifTt0aGlzLnNpemU9dGhpcy5faGVscGVyP3t3aWR0aDppLm91dGVyV2lkdGgoKSxoZWlnaHQ6aS5vdXRlckhlaWdodCgpfTp7d2lkdGg6aS53aWR0aCgpLGhlaWdodDppLmhlaWdodCgpfTt0aGlzLm9yaWdpbmFsU2l6ZT10aGlzLl9oZWxwZXI/e3dpZHRoOmkub3V0ZXJXaWR0aCgpLGhlaWdodDppLm91dGVySGVpZ2h0KCl9Ont3aWR0aDppLndpZHRoKCksaGVpZ2h0OmkuaGVpZ2h0KCl9O3RoaXMub3JpZ2luYWxQb3NpdGlvbj17bGVmdDplLHRvcDpifTt0aGlzLnNpemVEaWZmPQp7d2lkdGg6aS5vdXRlcldpZHRoKCktaS53aWR0aCgpLGhlaWdodDppLm91dGVySGVpZ2h0KCktaS5oZWlnaHQoKX07dGhpcy5vcmlnaW5hbE1vdXNlUG9zaXRpb249e2xlZnQ6Zi5wYWdlWCx0b3A6Zi5wYWdlWX07dGhpcy5hc3BlY3RSYXRpbz10eXBlb2YgZy5hc3BlY3RSYXRpbz09Im51bWJlciI/Zy5hc3BlY3RSYXRpbzp0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aC90aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHR8fDE7Zz1hKCIudWktcmVzaXphYmxlLSIrdGhpcy5heGlzKS5jc3MoImN1cnNvciIpO2EoImJvZHkiKS5jc3MoImN1cnNvciIsZz09ImF1dG8iP3RoaXMuYXhpcysiLXJlc2l6ZSI6Zyk7aS5hZGRDbGFzcygidWktcmVzaXphYmxlLXJlc2l6aW5nIik7dGhpcy5fcHJvcGFnYXRlKCJzdGFydCIsZik7cmV0dXJuIHRydWV9LF9tb3VzZURyYWc6ZnVuY3Rpb24oZil7dmFyIGc9dGhpcy5oZWxwZXIsZT10aGlzLm9yaWdpbmFsTW91c2VQb3NpdGlvbixpPXRoaXMuX2NoYW5nZVt0aGlzLmF4aXNdOwppZighaSlyZXR1cm4gZmFsc2U7ZT1pLmFwcGx5KHRoaXMsW2YsZi5wYWdlWC1lLmxlZnR8fDAsZi5wYWdlWS1lLnRvcHx8MF0pO2lmKHRoaXMuX2FzcGVjdFJhdGlvfHxmLnNoaWZ0S2V5KWU9dGhpcy5fdXBkYXRlUmF0aW8oZSxmKTtlPXRoaXMuX3Jlc3BlY3RTaXplKGUsZik7dGhpcy5fcHJvcGFnYXRlKCJyZXNpemUiLGYpO2cuY3NzKHt0b3A6dGhpcy5wb3NpdGlvbi50b3ArInB4IixsZWZ0OnRoaXMucG9zaXRpb24ubGVmdCsicHgiLHdpZHRoOnRoaXMuc2l6ZS53aWR0aCsicHgiLGhlaWdodDp0aGlzLnNpemUuaGVpZ2h0KyJweCJ9KTshdGhpcy5faGVscGVyJiZ0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aCYmdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKTt0aGlzLl91cGRhdGVDYWNoZShlKTt0aGlzLl90cmlnZ2VyKCJyZXNpemUiLGYsdGhpcy51aSgpKTtyZXR1cm4gZmFsc2V9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oZil7dGhpcy5yZXNpemluZz0KZmFsc2U7dmFyIGc9dGhpcy5vcHRpb25zLGU9dGhpcztpZih0aGlzLl9oZWxwZXIpe3ZhciBpPXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMsYj1pLmxlbmd0aCYmL3RleHRhcmVhL2kudGVzdChpWzBdLm5vZGVOYW1lKTtpPWImJmEudWkuaGFzU2Nyb2xsKGlbMF0sImxlZnQiKT8wOmUuc2l6ZURpZmYuaGVpZ2h0O2I9Yj8wOmUuc2l6ZURpZmYud2lkdGg7Yj17d2lkdGg6ZS5oZWxwZXIud2lkdGgoKS1iLGhlaWdodDplLmhlbHBlci5oZWlnaHQoKS1pfTtpPXBhcnNlSW50KGUuZWxlbWVudC5jc3MoImxlZnQiKSwxMCkrKGUucG9zaXRpb24ubGVmdC1lLm9yaWdpbmFsUG9zaXRpb24ubGVmdCl8fG51bGw7dmFyIGg9cGFyc2VJbnQoZS5lbGVtZW50LmNzcygidG9wIiksMTApKyhlLnBvc2l0aW9uLnRvcC1lLm9yaWdpbmFsUG9zaXRpb24udG9wKXx8bnVsbDtnLmFuaW1hdGV8fHRoaXMuZWxlbWVudC5jc3MoYS5leHRlbmQoYix7dG9wOmgsbGVmdDppfSkpO2UuaGVscGVyLmhlaWdodChlLnNpemUuaGVpZ2h0KTsKZS5oZWxwZXIud2lkdGgoZS5zaXplLndpZHRoKTt0aGlzLl9oZWxwZXImJiFnLmFuaW1hdGUmJnRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCl9YSgiYm9keSIpLmNzcygiY3Vyc29yIiwiYXV0byIpO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktcmVzaXphYmxlLXJlc2l6aW5nIik7dGhpcy5fcHJvcGFnYXRlKCJzdG9wIixmKTt0aGlzLl9oZWxwZXImJnRoaXMuaGVscGVyLnJlbW92ZSgpO3JldHVybiBmYWxzZX0sX3VwZGF0ZUNhY2hlOmZ1bmN0aW9uKGYpe3RoaXMub2Zmc2V0PXRoaXMuaGVscGVyLm9mZnNldCgpO2lmKGMoZi5sZWZ0KSl0aGlzLnBvc2l0aW9uLmxlZnQ9Zi5sZWZ0O2lmKGMoZi50b3ApKXRoaXMucG9zaXRpb24udG9wPWYudG9wO2lmKGMoZi5oZWlnaHQpKXRoaXMuc2l6ZS5oZWlnaHQ9Zi5oZWlnaHQ7aWYoYyhmLndpZHRoKSl0aGlzLnNpemUud2lkdGg9Zi53aWR0aH0sX3VwZGF0ZVJhdGlvOmZ1bmN0aW9uKGYpe3ZhciBnPXRoaXMucG9zaXRpb24sZT10aGlzLnNpemUsCmk9dGhpcy5heGlzO2lmKGYuaGVpZ2h0KWYud2lkdGg9ZS5oZWlnaHQqdGhpcy5hc3BlY3RSYXRpbztlbHNlIGlmKGYud2lkdGgpZi5oZWlnaHQ9ZS53aWR0aC90aGlzLmFzcGVjdFJhdGlvO2lmKGk9PSJzdyIpe2YubGVmdD1nLmxlZnQrKGUud2lkdGgtZi53aWR0aCk7Zi50b3A9bnVsbH1pZihpPT0ibnciKXtmLnRvcD1nLnRvcCsoZS5oZWlnaHQtZi5oZWlnaHQpO2YubGVmdD1nLmxlZnQrKGUud2lkdGgtZi53aWR0aCl9cmV0dXJuIGZ9LF9yZXNwZWN0U2l6ZTpmdW5jdGlvbihmKXt2YXIgZz10aGlzLm9wdGlvbnMsZT10aGlzLmF4aXMsaT1jKGYud2lkdGgpJiZnLm1heFdpZHRoJiZnLm1heFdpZHRoPGYud2lkdGgsYj1jKGYuaGVpZ2h0KSYmZy5tYXhIZWlnaHQmJmcubWF4SGVpZ2h0PGYuaGVpZ2h0LGg9YyhmLndpZHRoKSYmZy5taW5XaWR0aCYmZy5taW5XaWR0aD5mLndpZHRoLGo9YyhmLmhlaWdodCkmJmcubWluSGVpZ2h0JiZnLm1pbkhlaWdodD5mLmhlaWdodDtpZihoKWYud2lkdGg9CmcubWluV2lkdGg7aWYoailmLmhlaWdodD1nLm1pbkhlaWdodDtpZihpKWYud2lkdGg9Zy5tYXhXaWR0aDtpZihiKWYuaGVpZ2h0PWcubWF4SGVpZ2h0O3ZhciBsPXRoaXMub3JpZ2luYWxQb3NpdGlvbi5sZWZ0K3RoaXMub3JpZ2luYWxTaXplLndpZHRoLG89dGhpcy5wb3NpdGlvbi50b3ArdGhpcy5zaXplLmhlaWdodCxuPS9zd3xud3x3Ly50ZXN0KGUpO2U9L253fG5lfG4vLnRlc3QoZSk7aWYoaCYmbilmLmxlZnQ9bC1nLm1pbldpZHRoO2lmKGkmJm4pZi5sZWZ0PWwtZy5tYXhXaWR0aDtpZihqJiZlKWYudG9wPW8tZy5taW5IZWlnaHQ7aWYoYiYmZSlmLnRvcD1vLWcubWF4SGVpZ2h0O2lmKChnPSFmLndpZHRoJiYhZi5oZWlnaHQpJiYhZi5sZWZ0JiZmLnRvcClmLnRvcD1udWxsO2Vsc2UgaWYoZyYmIWYudG9wJiZmLmxlZnQpZi5sZWZ0PW51bGw7cmV0dXJuIGZ9LF9wcm9wb3J0aW9uYWxseVJlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMubGVuZ3RoKWZvcih2YXIgZj0KdGhpcy5oZWxwZXJ8fHRoaXMuZWxlbWVudCxnPTA7Zzx0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aDtnKyspe3ZhciBlPXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHNbZ107aWYoIXRoaXMuYm9yZGVyRGlmKXt2YXIgaT1bZS5jc3MoImJvcmRlclRvcFdpZHRoIiksZS5jc3MoImJvcmRlclJpZ2h0V2lkdGgiKSxlLmNzcygiYm9yZGVyQm90dG9tV2lkdGgiKSxlLmNzcygiYm9yZGVyTGVmdFdpZHRoIildLGI9W2UuY3NzKCJwYWRkaW5nVG9wIiksZS5jc3MoInBhZGRpbmdSaWdodCIpLGUuY3NzKCJwYWRkaW5nQm90dG9tIiksZS5jc3MoInBhZGRpbmdMZWZ0IildO3RoaXMuYm9yZGVyRGlmPWEubWFwKGksZnVuY3Rpb24oaCxqKXtoPXBhcnNlSW50KGgsMTApfHwwO2o9cGFyc2VJbnQoYltqXSwxMCl8fDA7cmV0dXJuIGgran0pfWEuYnJvd3Nlci5tc2llJiYoYShmKS5pcygiOmhpZGRlbiIpfHxhKGYpLnBhcmVudHMoIjpoaWRkZW4iKS5sZW5ndGgpfHwKZS5jc3Moe2hlaWdodDpmLmhlaWdodCgpLXRoaXMuYm9yZGVyRGlmWzBdLXRoaXMuYm9yZGVyRGlmWzJdfHwwLHdpZHRoOmYud2lkdGgoKS10aGlzLmJvcmRlckRpZlsxXS10aGlzLmJvcmRlckRpZlszXXx8MH0pfX0sX3JlbmRlclByb3h5OmZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5vcHRpb25zO3RoaXMuZWxlbWVudE9mZnNldD10aGlzLmVsZW1lbnQub2Zmc2V0KCk7aWYodGhpcy5faGVscGVyKXt0aGlzLmhlbHBlcj10aGlzLmhlbHBlcnx8YSgnPGRpdiBzdHlsZT0ib3ZlcmZsb3c6aGlkZGVuOyI+PC9kaXY+Jyk7dmFyIGc9YS5icm93c2VyLm1zaWUmJmEuYnJvd3Nlci52ZXJzaW9uPDcsZT1nPzE6MDtnPWc/MjotMTt0aGlzLmhlbHBlci5hZGRDbGFzcyh0aGlzLl9oZWxwZXIpLmNzcyh7d2lkdGg6dGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKStnLGhlaWdodDp0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKStnLHBvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDp0aGlzLmVsZW1lbnRPZmZzZXQubGVmdC0KZSsicHgiLHRvcDp0aGlzLmVsZW1lbnRPZmZzZXQudG9wLWUrInB4Iix6SW5kZXg6KytmLnpJbmRleH0pO3RoaXMuaGVscGVyLmFwcGVuZFRvKCJib2R5IikuZGlzYWJsZVNlbGVjdGlvbigpfWVsc2UgdGhpcy5oZWxwZXI9dGhpcy5lbGVtZW50fSxfY2hhbmdlOntlOmZ1bmN0aW9uKGYsZyl7cmV0dXJue3dpZHRoOnRoaXMub3JpZ2luYWxTaXplLndpZHRoK2d9fSx3OmZ1bmN0aW9uKGYsZyl7cmV0dXJue2xlZnQ6dGhpcy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQrZyx3aWR0aDp0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aC1nfX0sbjpmdW5jdGlvbihmLGcsZSl7cmV0dXJue3RvcDp0aGlzLm9yaWdpbmFsUG9zaXRpb24udG9wK2UsaGVpZ2h0OnRoaXMub3JpZ2luYWxTaXplLmhlaWdodC1lfX0sczpmdW5jdGlvbihmLGcsZSl7cmV0dXJue2hlaWdodDp0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQrZX19LHNlOmZ1bmN0aW9uKGYsZyxlKXtyZXR1cm4gYS5leHRlbmQodGhpcy5fY2hhbmdlLnMuYXBwbHkodGhpcywKYXJndW1lbnRzKSx0aGlzLl9jaGFuZ2UuZS5hcHBseSh0aGlzLFtmLGcsZV0pKX0sc3c6ZnVuY3Rpb24oZixnLGUpe3JldHVybiBhLmV4dGVuZCh0aGlzLl9jaGFuZ2Uucy5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLncuYXBwbHkodGhpcyxbZixnLGVdKSl9LG5lOmZ1bmN0aW9uKGYsZyxlKXtyZXR1cm4gYS5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsW2YsZyxlXSkpfSxudzpmdW5jdGlvbihmLGcsZSl7cmV0dXJuIGEuZXh0ZW5kKHRoaXMuX2NoYW5nZS5uLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9jaGFuZ2Uudy5hcHBseSh0aGlzLFtmLGcsZV0pKX19LF9wcm9wYWdhdGU6ZnVuY3Rpb24oZixnKXthLnVpLnBsdWdpbi5jYWxsKHRoaXMsZixbZyx0aGlzLnVpKCldKTtmIT0icmVzaXplIiYmdGhpcy5fdHJpZ2dlcihmLGcsdGhpcy51aSgpKX0scGx1Z2luczp7fSx1aTpmdW5jdGlvbigpe3JldHVybntvcmlnaW5hbEVsZW1lbnQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQsCmVsZW1lbnQ6dGhpcy5lbGVtZW50LGhlbHBlcjp0aGlzLmhlbHBlcixwb3NpdGlvbjp0aGlzLnBvc2l0aW9uLHNpemU6dGhpcy5zaXplLG9yaWdpbmFsU2l6ZTp0aGlzLm9yaWdpbmFsU2l6ZSxvcmlnaW5hbFBvc2l0aW9uOnRoaXMub3JpZ2luYWxQb3NpdGlvbn19fSk7YS5leHRlbmQoYS51aS5yZXNpemFibGUse3ZlcnNpb246IjEuOC4xMyJ9KTthLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImFsc29SZXNpemUiLHtzdGFydDpmdW5jdGlvbigpe3ZhciBmPWEodGhpcykuZGF0YSgicmVzaXphYmxlIikub3B0aW9ucyxnPWZ1bmN0aW9uKGUpe2EoZSkuZWFjaChmdW5jdGlvbigpe3ZhciBpPWEodGhpcyk7aS5kYXRhKCJyZXNpemFibGUtYWxzb3Jlc2l6ZSIse3dpZHRoOnBhcnNlSW50KGkud2lkdGgoKSwxMCksaGVpZ2h0OnBhcnNlSW50KGkuaGVpZ2h0KCksMTApLGxlZnQ6cGFyc2VJbnQoaS5jc3MoImxlZnQiKSwxMCksdG9wOnBhcnNlSW50KGkuY3NzKCJ0b3AiKSwxMCkscG9zaXRpb246aS5jc3MoInBvc2l0aW9uIil9KX0pfTsKaWYodHlwZW9mIGYuYWxzb1Jlc2l6ZT09Im9iamVjdCImJiFmLmFsc29SZXNpemUucGFyZW50Tm9kZSlpZihmLmFsc29SZXNpemUubGVuZ3RoKXtmLmFsc29SZXNpemU9Zi5hbHNvUmVzaXplWzBdO2coZi5hbHNvUmVzaXplKX1lbHNlIGEuZWFjaChmLmFsc29SZXNpemUsZnVuY3Rpb24oZSl7ZyhlKX0pO2Vsc2UgZyhmLmFsc29SZXNpemUpfSxyZXNpemU6ZnVuY3Rpb24oZixnKXt2YXIgZT1hKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpO2Y9ZS5vcHRpb25zO3ZhciBpPWUub3JpZ2luYWxTaXplLGI9ZS5vcmlnaW5hbFBvc2l0aW9uLGg9e2hlaWdodDplLnNpemUuaGVpZ2h0LWkuaGVpZ2h0fHwwLHdpZHRoOmUuc2l6ZS53aWR0aC1pLndpZHRofHwwLHRvcDplLnBvc2l0aW9uLnRvcC1iLnRvcHx8MCxsZWZ0OmUucG9zaXRpb24ubGVmdC1iLmxlZnR8fDB9LGo9ZnVuY3Rpb24obCxvKXthKGwpLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1hKHRoaXMpLGs9YSh0aGlzKS5kYXRhKCJyZXNpemFibGUtYWxzb3Jlc2l6ZSIpLAptPXt9LHA9byYmby5sZW5ndGg/bzpuLnBhcmVudHMoZy5vcmlnaW5hbEVsZW1lbnRbMF0pLmxlbmd0aD9bIndpZHRoIiwiaGVpZ2h0Il06WyJ3aWR0aCIsImhlaWdodCIsInRvcCIsImxlZnQiXTthLmVhY2gocCxmdW5jdGlvbihxLHMpe2lmKChxPShrW3NdfHwwKSsoaFtzXXx8MCkpJiZxPj0wKW1bc109cXx8bnVsbH0pO2lmKGEuYnJvd3Nlci5vcGVyYSYmL3JlbGF0aXZlLy50ZXN0KG4uY3NzKCJwb3NpdGlvbiIpKSl7ZS5fcmV2ZXJ0VG9SZWxhdGl2ZVBvc2l0aW9uPXRydWU7bi5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdG9wOiJhdXRvIixsZWZ0OiJhdXRvIn0pfW4uY3NzKG0pfSl9O3R5cGVvZiBmLmFsc29SZXNpemU9PSJvYmplY3QiJiYhZi5hbHNvUmVzaXplLm5vZGVUeXBlP2EuZWFjaChmLmFsc29SZXNpemUsZnVuY3Rpb24obCxvKXtqKGwsbyl9KTpqKGYuYWxzb1Jlc2l6ZSl9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgZj1hKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGc9Zi5vcHRpb25zLAplPWZ1bmN0aW9uKGkpe2EoaSkuZWFjaChmdW5jdGlvbigpe3ZhciBiPWEodGhpcyk7Yi5jc3Moe3Bvc2l0aW9uOmIuZGF0YSgicmVzaXphYmxlLWFsc29yZXNpemUiKS5wb3NpdGlvbn0pfSl9O2lmKGYuX3JldmVydFRvUmVsYXRpdmVQb3NpdGlvbil7Zi5fcmV2ZXJ0VG9SZWxhdGl2ZVBvc2l0aW9uPWZhbHNlO3R5cGVvZiBnLmFsc29SZXNpemU9PSJvYmplY3QiJiYhZy5hbHNvUmVzaXplLm5vZGVUeXBlP2EuZWFjaChnLmFsc29SZXNpemUsZnVuY3Rpb24oaSl7ZShpKX0pOmUoZy5hbHNvUmVzaXplKX1hKHRoaXMpLnJlbW92ZURhdGEoInJlc2l6YWJsZS1hbHNvcmVzaXplIil9fSk7YS51aS5wbHVnaW4uYWRkKCJyZXNpemFibGUiLCJhbmltYXRlIix7c3RvcDpmdW5jdGlvbihmKXt2YXIgZz1hKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGU9Zy5vcHRpb25zLGk9Zy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cyxiPWkubGVuZ3RoJiYvdGV4dGFyZWEvaS50ZXN0KGlbMF0ubm9kZU5hbWUpLApoPWImJmEudWkuaGFzU2Nyb2xsKGlbMF0sImxlZnQiKT8wOmcuc2l6ZURpZmYuaGVpZ2h0O2I9e3dpZHRoOmcuc2l6ZS53aWR0aC0oYj8wOmcuc2l6ZURpZmYud2lkdGgpLGhlaWdodDpnLnNpemUuaGVpZ2h0LWh9O2g9cGFyc2VJbnQoZy5lbGVtZW50LmNzcygibGVmdCIpLDEwKSsoZy5wb3NpdGlvbi5sZWZ0LWcub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KXx8bnVsbDt2YXIgaj1wYXJzZUludChnLmVsZW1lbnQuY3NzKCJ0b3AiKSwxMCkrKGcucG9zaXRpb24udG9wLWcub3JpZ2luYWxQb3NpdGlvbi50b3ApfHxudWxsO2cuZWxlbWVudC5hbmltYXRlKGEuZXh0ZW5kKGIsaiYmaD97dG9wOmosbGVmdDpofTp7fSkse2R1cmF0aW9uOmUuYW5pbWF0ZUR1cmF0aW9uLGVhc2luZzplLmFuaW1hdGVFYXNpbmcsc3RlcDpmdW5jdGlvbigpe3ZhciBsPXt3aWR0aDpwYXJzZUludChnLmVsZW1lbnQuY3NzKCJ3aWR0aCIpLDEwKSxoZWlnaHQ6cGFyc2VJbnQoZy5lbGVtZW50LmNzcygiaGVpZ2h0IiksCjEwKSx0b3A6cGFyc2VJbnQoZy5lbGVtZW50LmNzcygidG9wIiksMTApLGxlZnQ6cGFyc2VJbnQoZy5lbGVtZW50LmNzcygibGVmdCIpLDEwKX07aSYmaS5sZW5ndGgmJmEoaVswXSkuY3NzKHt3aWR0aDpsLndpZHRoLGhlaWdodDpsLmhlaWdodH0pO2cuX3VwZGF0ZUNhY2hlKGwpO2cuX3Byb3BhZ2F0ZSgicmVzaXplIixmKX19KX19KTthLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImNvbnRhaW5tZW50Iix7c3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZj1hKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGc9Zi5lbGVtZW50LGU9Zi5vcHRpb25zLmNvbnRhaW5tZW50O2lmKGc9ZSBpbnN0YW5jZW9mIGE/ZS5nZXQoMCk6L3BhcmVudC8udGVzdChlKT9nLnBhcmVudCgpLmdldCgwKTplKXtmLmNvbnRhaW5lckVsZW1lbnQ9YShnKTtpZigvZG9jdW1lbnQvLnRlc3QoZSl8fGU9PWRvY3VtZW50KXtmLmNvbnRhaW5lck9mZnNldD17bGVmdDowLHRvcDowfTtmLmNvbnRhaW5lclBvc2l0aW9uPXtsZWZ0OjAsCnRvcDowfTtmLnBhcmVudERhdGE9e2VsZW1lbnQ6YShkb2N1bWVudCksbGVmdDowLHRvcDowLHdpZHRoOmEoZG9jdW1lbnQpLndpZHRoKCksaGVpZ2h0OmEoZG9jdW1lbnQpLmhlaWdodCgpfHxkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0fX1lbHNle3ZhciBpPWEoZyksYj1bXTthKFsiVG9wIiwiUmlnaHQiLCJMZWZ0IiwiQm90dG9tIl0pLmVhY2goZnVuY3Rpb24obCxvKXtiW2xdPWQoaS5jc3MoInBhZGRpbmciK28pKX0pO2YuY29udGFpbmVyT2Zmc2V0PWkub2Zmc2V0KCk7Zi5jb250YWluZXJQb3NpdGlvbj1pLnBvc2l0aW9uKCk7Zi5jb250YWluZXJTaXplPXtoZWlnaHQ6aS5pbm5lckhlaWdodCgpLWJbM10sd2lkdGg6aS5pbm5lcldpZHRoKCktYlsxXX07ZT1mLmNvbnRhaW5lck9mZnNldDt2YXIgaD1mLmNvbnRhaW5lclNpemUuaGVpZ2h0LGo9Zi5jb250YWluZXJTaXplLndpZHRoO2o9YS51aS5oYXNTY3JvbGwoZywibGVmdCIpP2cuc2Nyb2xsV2lkdGg6ajsKaD1hLnVpLmhhc1Njcm9sbChnKT9nLnNjcm9sbEhlaWdodDpoO2YucGFyZW50RGF0YT17ZWxlbWVudDpnLGxlZnQ6ZS5sZWZ0LHRvcDplLnRvcCx3aWR0aDpqLGhlaWdodDpofX19fSxyZXNpemU6ZnVuY3Rpb24oZil7dmFyIGc9YSh0aGlzKS5kYXRhKCJyZXNpemFibGUiKSxlPWcub3B0aW9ucyxpPWcuY29udGFpbmVyT2Zmc2V0LGI9Zy5wb3NpdGlvbjtmPWcuX2FzcGVjdFJhdGlvfHxmLnNoaWZ0S2V5O3ZhciBoPXt0b3A6MCxsZWZ0OjB9LGo9Zy5jb250YWluZXJFbGVtZW50O2lmKGpbMF0hPWRvY3VtZW50JiYvc3RhdGljLy50ZXN0KGouY3NzKCJwb3NpdGlvbiIpKSloPWk7aWYoYi5sZWZ0PChnLl9oZWxwZXI/aS5sZWZ0OjApKXtnLnNpemUud2lkdGgrPWcuX2hlbHBlcj9nLnBvc2l0aW9uLmxlZnQtaS5sZWZ0OmcucG9zaXRpb24ubGVmdC1oLmxlZnQ7aWYoZilnLnNpemUuaGVpZ2h0PWcuc2l6ZS53aWR0aC9lLmFzcGVjdFJhdGlvO2cucG9zaXRpb24ubGVmdD1lLmhlbHBlcj9pLmxlZnQ6CjB9aWYoYi50b3A8KGcuX2hlbHBlcj9pLnRvcDowKSl7Zy5zaXplLmhlaWdodCs9Zy5faGVscGVyP2cucG9zaXRpb24udG9wLWkudG9wOmcucG9zaXRpb24udG9wO2lmKGYpZy5zaXplLndpZHRoPWcuc2l6ZS5oZWlnaHQqZS5hc3BlY3RSYXRpbztnLnBvc2l0aW9uLnRvcD1nLl9oZWxwZXI/aS50b3A6MH1nLm9mZnNldC5sZWZ0PWcucGFyZW50RGF0YS5sZWZ0K2cucG9zaXRpb24ubGVmdDtnLm9mZnNldC50b3A9Zy5wYXJlbnREYXRhLnRvcCtnLnBvc2l0aW9uLnRvcDtlPU1hdGguYWJzKChnLl9oZWxwZXI/Zy5vZmZzZXQubGVmdC1oLmxlZnQ6Zy5vZmZzZXQubGVmdC1oLmxlZnQpK2cuc2l6ZURpZmYud2lkdGgpO2k9TWF0aC5hYnMoKGcuX2hlbHBlcj9nLm9mZnNldC50b3AtaC50b3A6Zy5vZmZzZXQudG9wLWkudG9wKStnLnNpemVEaWZmLmhlaWdodCk7Yj1nLmNvbnRhaW5lckVsZW1lbnQuZ2V0KDApPT1nLmVsZW1lbnQucGFyZW50KCkuZ2V0KDApO2g9L3JlbGF0aXZlfGFic29sdXRlLy50ZXN0KGcuY29udGFpbmVyRWxlbWVudC5jc3MoInBvc2l0aW9uIikpOwppZihiJiZoKWUtPWcucGFyZW50RGF0YS5sZWZ0O2lmKGUrZy5zaXplLndpZHRoPj1nLnBhcmVudERhdGEud2lkdGgpe2cuc2l6ZS53aWR0aD1nLnBhcmVudERhdGEud2lkdGgtZTtpZihmKWcuc2l6ZS5oZWlnaHQ9Zy5zaXplLndpZHRoL2cuYXNwZWN0UmF0aW99aWYoaStnLnNpemUuaGVpZ2h0Pj1nLnBhcmVudERhdGEuaGVpZ2h0KXtnLnNpemUuaGVpZ2h0PWcucGFyZW50RGF0YS5oZWlnaHQtaTtpZihmKWcuc2l6ZS53aWR0aD1nLnNpemUuaGVpZ2h0KmcuYXNwZWN0UmF0aW99fSxzdG9wOmZ1bmN0aW9uKCl7dmFyIGY9YSh0aGlzKS5kYXRhKCJyZXNpemFibGUiKSxnPWYub3B0aW9ucyxlPWYuY29udGFpbmVyT2Zmc2V0LGk9Zi5jb250YWluZXJQb3NpdGlvbixiPWYuY29udGFpbmVyRWxlbWVudCxoPWEoZi5oZWxwZXIpLGo9aC5vZmZzZXQoKSxsPWgub3V0ZXJXaWR0aCgpLWYuc2l6ZURpZmYud2lkdGg7aD1oLm91dGVySGVpZ2h0KCktZi5zaXplRGlmZi5oZWlnaHQ7Zi5faGVscGVyJiYKIWcuYW5pbWF0ZSYmL3JlbGF0aXZlLy50ZXN0KGIuY3NzKCJwb3NpdGlvbiIpKSYmYSh0aGlzKS5jc3Moe2xlZnQ6ai5sZWZ0LWkubGVmdC1lLmxlZnQsd2lkdGg6bCxoZWlnaHQ6aH0pO2YuX2hlbHBlciYmIWcuYW5pbWF0ZSYmL3N0YXRpYy8udGVzdChiLmNzcygicG9zaXRpb24iKSkmJmEodGhpcykuY3NzKHtsZWZ0OmoubGVmdC1pLmxlZnQtZS5sZWZ0LHdpZHRoOmwsaGVpZ2h0Omh9KX19KTthLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImdob3N0Iix7c3RhcnQ6ZnVuY3Rpb24oKXt2YXIgZj1hKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGc9Zi5vcHRpb25zLGU9Zi5zaXplO2YuZ2hvc3Q9Zi5vcmlnaW5hbEVsZW1lbnQuY2xvbmUoKTtmLmdob3N0LmNzcyh7b3BhY2l0eTowLjI1LGRpc3BsYXk6ImJsb2NrIixwb3NpdGlvbjoicmVsYXRpdmUiLGhlaWdodDplLmhlaWdodCx3aWR0aDplLndpZHRoLG1hcmdpbjowLGxlZnQ6MCx0b3A6MH0pLmFkZENsYXNzKCJ1aS1yZXNpemFibGUtZ2hvc3QiKS5hZGRDbGFzcyh0eXBlb2YgZy5naG9zdD09CiJzdHJpbmciP2cuZ2hvc3Q6IiIpO2YuZ2hvc3QuYXBwZW5kVG8oZi5oZWxwZXIpfSxyZXNpemU6ZnVuY3Rpb24oKXt2YXIgZj1hKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpO2YuZ2hvc3QmJmYuZ2hvc3QuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLGhlaWdodDpmLnNpemUuaGVpZ2h0LHdpZHRoOmYuc2l6ZS53aWR0aH0pfSxzdG9wOmZ1bmN0aW9uKCl7dmFyIGY9YSh0aGlzKS5kYXRhKCJyZXNpemFibGUiKTtmLmdob3N0JiZmLmhlbHBlciYmZi5oZWxwZXIuZ2V0KDApLnJlbW92ZUNoaWxkKGYuZ2hvc3QuZ2V0KDApKX19KTthLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImdyaWQiLHtyZXNpemU6ZnVuY3Rpb24oKXt2YXIgZj1hKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGc9Zi5vcHRpb25zLGU9Zi5zaXplLGk9Zi5vcmlnaW5hbFNpemUsYj1mLm9yaWdpbmFsUG9zaXRpb24saD1mLmF4aXM7Zy5ncmlkPXR5cGVvZiBnLmdyaWQ9PSJudW1iZXIiP1tnLmdyaWQsZy5ncmlkXTpnLmdyaWQ7CnZhciBqPU1hdGgucm91bmQoKGUud2lkdGgtaS53aWR0aCkvKGcuZ3JpZFswXXx8MSkpKihnLmdyaWRbMF18fDEpO2c9TWF0aC5yb3VuZCgoZS5oZWlnaHQtaS5oZWlnaHQpLyhnLmdyaWRbMV18fDEpKSooZy5ncmlkWzFdfHwxKTtpZigvXihzZXxzfGUpJC8udGVzdChoKSl7Zi5zaXplLndpZHRoPWkud2lkdGgrajtmLnNpemUuaGVpZ2h0PWkuaGVpZ2h0K2d9ZWxzZSBpZigvXihuZSkkLy50ZXN0KGgpKXtmLnNpemUud2lkdGg9aS53aWR0aCtqO2Yuc2l6ZS5oZWlnaHQ9aS5oZWlnaHQrZztmLnBvc2l0aW9uLnRvcD1iLnRvcC1nfWVsc2V7aWYoL14oc3cpJC8udGVzdChoKSl7Zi5zaXplLndpZHRoPWkud2lkdGgrajtmLnNpemUuaGVpZ2h0PWkuaGVpZ2h0K2d9ZWxzZXtmLnNpemUud2lkdGg9aS53aWR0aCtqO2Yuc2l6ZS5oZWlnaHQ9aS5oZWlnaHQrZztmLnBvc2l0aW9uLnRvcD1iLnRvcC1nfWYucG9zaXRpb24ubGVmdD1iLmxlZnQtan19fSk7dmFyIGQ9ZnVuY3Rpb24oZil7cmV0dXJuIHBhcnNlSW50KGYsCjEwKXx8MH0sYz1mdW5jdGlvbihmKXtyZXR1cm4haXNOYU4ocGFyc2VJbnQoZiwxMCkpfX0pKGpRdWVyeSk7CihmdW5jdGlvbihhKXthLndpZGdldCgidWkuc2VsZWN0YWJsZSIsYS51aS5tb3VzZSx7b3B0aW9uczp7YXBwZW5kVG86ImJvZHkiLGF1dG9SZWZyZXNoOnRydWUsZGlzdGFuY2U6MCxmaWx0ZXI6IioiLHRvbGVyYW5jZToidG91Y2gifSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpczt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXNlbGVjdGFibGUiKTt0aGlzLmRyYWdnZWQ9ZmFsc2U7dmFyIGM7dGhpcy5yZWZyZXNoPWZ1bmN0aW9uKCl7Yz1hKGQub3B0aW9ucy5maWx0ZXIsZC5lbGVtZW50WzBdKTtjLmVhY2goZnVuY3Rpb24oKXt2YXIgZj1hKHRoaXMpLGc9Zi5vZmZzZXQoKTthLmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIix7ZWxlbWVudDp0aGlzLCRlbGVtZW50OmYsbGVmdDpnLmxlZnQsdG9wOmcudG9wLHJpZ2h0OmcubGVmdCtmLm91dGVyV2lkdGgoKSxib3R0b206Zy50b3ArZi5vdXRlckhlaWdodCgpLHN0YXJ0c2VsZWN0ZWQ6ZmFsc2Usc2VsZWN0ZWQ6Zi5oYXNDbGFzcygidWktc2VsZWN0ZWQiKSwKc2VsZWN0aW5nOmYuaGFzQ2xhc3MoInVpLXNlbGVjdGluZyIpLHVuc2VsZWN0aW5nOmYuaGFzQ2xhc3MoInVpLXVuc2VsZWN0aW5nIil9KX0pfTt0aGlzLnJlZnJlc2goKTt0aGlzLnNlbGVjdGVlcz1jLmFkZENsYXNzKCJ1aS1zZWxlY3RlZSIpO3RoaXMuX21vdXNlSW5pdCgpO3RoaXMuaGVscGVyPWEoIjxkaXYgY2xhc3M9J3VpLXNlbGVjdGFibGUtaGVscGVyJz48L2Rpdj4iKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWVzLnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZSIpLnJlbW92ZURhdGEoInNlbGVjdGFibGUtaXRlbSIpO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2VsZWN0YWJsZSB1aS1zZWxlY3RhYmxlLWRpc2FibGVkIikucmVtb3ZlRGF0YSgic2VsZWN0YWJsZSIpLnVuYmluZCgiLnNlbGVjdGFibGUiKTt0aGlzLl9tb3VzZURlc3Ryb3koKTtyZXR1cm4gdGhpc30sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpczt0aGlzLm9wb3M9W2QucGFnZVgsCmQucGFnZVldO2lmKCF0aGlzLm9wdGlvbnMuZGlzYWJsZWQpe3ZhciBmPXRoaXMub3B0aW9uczt0aGlzLnNlbGVjdGVlcz1hKGYuZmlsdGVyLHRoaXMuZWxlbWVudFswXSk7dGhpcy5fdHJpZ2dlcigic3RhcnQiLGQpO2EoZi5hcHBlbmRUbykuYXBwZW5kKHRoaXMuaGVscGVyKTt0aGlzLmhlbHBlci5jc3Moe2xlZnQ6ZC5jbGllbnRYLHRvcDpkLmNsaWVudFksd2lkdGg6MCxoZWlnaHQ6MH0pO2YuYXV0b1JlZnJlc2gmJnRoaXMucmVmcmVzaCgpO3RoaXMuc2VsZWN0ZWVzLmZpbHRlcigiLnVpLXNlbGVjdGVkIikuZWFjaChmdW5jdGlvbigpe3ZhciBnPWEuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iKTtnLnN0YXJ0c2VsZWN0ZWQ9dHJ1ZTtpZighZC5tZXRhS2V5KXtnLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZCIpO2cuc2VsZWN0ZWQ9ZmFsc2U7Zy4kZWxlbWVudC5hZGRDbGFzcygidWktdW5zZWxlY3RpbmciKTtnLnVuc2VsZWN0aW5nPXRydWU7Yy5fdHJpZ2dlcigidW5zZWxlY3RpbmciLApkLHt1bnNlbGVjdGluZzpnLmVsZW1lbnR9KX19KTthKGQudGFyZ2V0KS5wYXJlbnRzKCkuYW5kU2VsZigpLmVhY2goZnVuY3Rpb24oKXt2YXIgZz1hLmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIik7aWYoZyl7dmFyIGU9IWQubWV0YUtleXx8IWcuJGVsZW1lbnQuaGFzQ2xhc3MoInVpLXNlbGVjdGVkIik7Zy4kZWxlbWVudC5yZW1vdmVDbGFzcyhlPyJ1aS11bnNlbGVjdGluZyI6InVpLXNlbGVjdGVkIikuYWRkQ2xhc3MoZT8idWktc2VsZWN0aW5nIjoidWktdW5zZWxlY3RpbmciKTtnLnVuc2VsZWN0aW5nPSFlO2cuc2VsZWN0aW5nPWU7KGcuc2VsZWN0ZWQ9ZSk/Yy5fdHJpZ2dlcigic2VsZWN0aW5nIixkLHtzZWxlY3Rpbmc6Zy5lbGVtZW50fSk6Yy5fdHJpZ2dlcigidW5zZWxlY3RpbmciLGQse3Vuc2VsZWN0aW5nOmcuZWxlbWVudH0pO3JldHVybiBmYWxzZX19KX19LF9tb3VzZURyYWc6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpczt0aGlzLmRyYWdnZWQ9dHJ1ZTtpZighdGhpcy5vcHRpb25zLmRpc2FibGVkKXt2YXIgZj0KdGhpcy5vcHRpb25zLGc9dGhpcy5vcG9zWzBdLGU9dGhpcy5vcG9zWzFdLGk9ZC5wYWdlWCxiPWQucGFnZVk7aWYoZz5pKXt2YXIgaD1pO2k9ZztnPWh9aWYoZT5iKXtoPWI7Yj1lO2U9aH10aGlzLmhlbHBlci5jc3Moe2xlZnQ6Zyx0b3A6ZSx3aWR0aDppLWcsaGVpZ2h0OmItZX0pO3RoaXMuc2VsZWN0ZWVzLmVhY2goZnVuY3Rpb24oKXt2YXIgaj1hLmRhdGEodGhpcywic2VsZWN0YWJsZS1pdGVtIik7aWYoISghanx8ai5lbGVtZW50PT1jLmVsZW1lbnRbMF0pKXt2YXIgbD1mYWxzZTtpZihmLnRvbGVyYW5jZT09InRvdWNoIilsPSEoai5sZWZ0Pml8fGoucmlnaHQ8Z3x8ai50b3A+Ynx8ai5ib3R0b208ZSk7ZWxzZSBpZihmLnRvbGVyYW5jZT09ImZpdCIpbD1qLmxlZnQ+ZyYmai5yaWdodDxpJiZqLnRvcD5lJiZqLmJvdHRvbTxiO2lmKGwpe2lmKGouc2VsZWN0ZWQpe2ouJGVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNlbGVjdGVkIik7ai5zZWxlY3RlZD1mYWxzZX1pZihqLnVuc2VsZWN0aW5nKXtqLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS11bnNlbGVjdGluZyIpOwpqLnVuc2VsZWN0aW5nPWZhbHNlfWlmKCFqLnNlbGVjdGluZyl7ai4kZWxlbWVudC5hZGRDbGFzcygidWktc2VsZWN0aW5nIik7ai5zZWxlY3Rpbmc9dHJ1ZTtjLl90cmlnZ2VyKCJzZWxlY3RpbmciLGQse3NlbGVjdGluZzpqLmVsZW1lbnR9KX19ZWxzZXtpZihqLnNlbGVjdGluZylpZihkLm1ldGFLZXkmJmouc3RhcnRzZWxlY3RlZCl7ai4kZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2VsZWN0aW5nIik7ai5zZWxlY3Rpbmc9ZmFsc2U7ai4kZWxlbWVudC5hZGRDbGFzcygidWktc2VsZWN0ZWQiKTtqLnNlbGVjdGVkPXRydWV9ZWxzZXtqLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RpbmciKTtqLnNlbGVjdGluZz1mYWxzZTtpZihqLnN0YXJ0c2VsZWN0ZWQpe2ouJGVsZW1lbnQuYWRkQ2xhc3MoInVpLXVuc2VsZWN0aW5nIik7ai51bnNlbGVjdGluZz10cnVlfWMuX3RyaWdnZXIoInVuc2VsZWN0aW5nIixkLHt1bnNlbGVjdGluZzpqLmVsZW1lbnR9KX1pZihqLnNlbGVjdGVkKWlmKCFkLm1ldGFLZXkmJgohai5zdGFydHNlbGVjdGVkKXtqLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZCIpO2ouc2VsZWN0ZWQ9ZmFsc2U7ai4kZWxlbWVudC5hZGRDbGFzcygidWktdW5zZWxlY3RpbmciKTtqLnVuc2VsZWN0aW5nPXRydWU7Yy5fdHJpZ2dlcigidW5zZWxlY3RpbmciLGQse3Vuc2VsZWN0aW5nOmouZWxlbWVudH0pfX19fSk7cmV0dXJuIGZhbHNlfX0sX21vdXNlU3RvcDpmdW5jdGlvbihkKXt2YXIgYz10aGlzO3RoaXMuZHJhZ2dlZD1mYWxzZTthKCIudWktdW5zZWxlY3RpbmciLHRoaXMuZWxlbWVudFswXSkuZWFjaChmdW5jdGlvbigpe3ZhciBmPWEuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iKTtmLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS11bnNlbGVjdGluZyIpO2YudW5zZWxlY3Rpbmc9ZmFsc2U7Zi5zdGFydHNlbGVjdGVkPWZhbHNlO2MuX3RyaWdnZXIoInVuc2VsZWN0ZWQiLGQse3Vuc2VsZWN0ZWQ6Zi5lbGVtZW50fSl9KTthKCIudWktc2VsZWN0aW5nIix0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKXt2YXIgZj0KYS5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO2YuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNlbGVjdGluZyIpLmFkZENsYXNzKCJ1aS1zZWxlY3RlZCIpO2Yuc2VsZWN0aW5nPWZhbHNlO2Yuc2VsZWN0ZWQ9dHJ1ZTtmLnN0YXJ0c2VsZWN0ZWQ9dHJ1ZTtjLl90cmlnZ2VyKCJzZWxlY3RlZCIsZCx7c2VsZWN0ZWQ6Zi5lbGVtZW50fSl9KTt0aGlzLl90cmlnZ2VyKCJzdG9wIixkKTt0aGlzLmhlbHBlci5yZW1vdmUoKTtyZXR1cm4gZmFsc2V9fSk7YS5leHRlbmQoYS51aS5zZWxlY3RhYmxlLHt2ZXJzaW9uOiIxLjguMTMifSl9KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS53aWRnZXQoInVpLnNvcnRhYmxlIixhLnVpLm1vdXNlLHt3aWRnZXRFdmVudFByZWZpeDoic29ydCIsb3B0aW9uczp7YXBwZW5kVG86InBhcmVudCIsYXhpczpmYWxzZSxjb25uZWN0V2l0aDpmYWxzZSxjb250YWlubWVudDpmYWxzZSxjdXJzb3I6ImF1dG8iLGN1cnNvckF0OmZhbHNlLGRyb3BPbkVtcHR5OnRydWUsZm9yY2VQbGFjZWhvbGRlclNpemU6ZmFsc2UsZm9yY2VIZWxwZXJTaXplOmZhbHNlLGdyaWQ6ZmFsc2UsaGFuZGxlOmZhbHNlLGhlbHBlcjoib3JpZ2luYWwiLGl0ZW1zOiI+ICoiLG9wYWNpdHk6ZmFsc2UscGxhY2Vob2xkZXI6ZmFsc2UscmV2ZXJ0OmZhbHNlLHNjcm9sbDp0cnVlLHNjcm9sbFNlbnNpdGl2aXR5OjIwLHNjcm9sbFNwZWVkOjIwLHNjb3BlOiJkZWZhdWx0Iix0b2xlcmFuY2U6ImludGVyc2VjdCIsekluZGV4OjFFM30sX2NyZWF0ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3B0aW9uczt0aGlzLmNvbnRhaW5lckNhY2hlPXt9O3RoaXMuZWxlbWVudC5hZGRDbGFzcygidWktc29ydGFibGUiKTsKdGhpcy5yZWZyZXNoKCk7dGhpcy5mbG9hdGluZz10aGlzLml0ZW1zLmxlbmd0aD9kLmF4aXM9PT0ieCJ8fC9sZWZ0fHJpZ2h0Ly50ZXN0KHRoaXMuaXRlbXNbMF0uaXRlbS5jc3MoImZsb2F0IikpfHwvaW5saW5lfHRhYmxlLWNlbGwvLnRlc3QodGhpcy5pdGVtc1swXS5pdGVtLmNzcygiZGlzcGxheSIpKTpmYWxzZTt0aGlzLm9mZnNldD10aGlzLmVsZW1lbnQub2Zmc2V0KCk7dGhpcy5fbW91c2VJbml0KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNvcnRhYmxlIHVpLXNvcnRhYmxlLWRpc2FibGVkIikucmVtb3ZlRGF0YSgic29ydGFibGUiKS51bmJpbmQoIi5zb3J0YWJsZSIpO3RoaXMuX21vdXNlRGVzdHJveSgpO2Zvcih2YXIgZD10aGlzLml0ZW1zLmxlbmd0aC0xO2Q+PTA7ZC0tKXRoaXMuaXRlbXNbZF0uaXRlbS5yZW1vdmVEYXRhKCJzb3J0YWJsZS1pdGVtIik7cmV0dXJuIHRoaXN9LF9zZXRPcHRpb246ZnVuY3Rpb24oZCxjKXtpZihkPT09CiJkaXNhYmxlZCIpe3RoaXMub3B0aW9uc1tkXT1jO3RoaXMud2lkZ2V0KClbYz8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKCJ1aS1zb3J0YWJsZS1kaXNhYmxlZCIpfWVsc2UgYS5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKGQsYyl7aWYodGhpcy5yZXZlcnRpbmcpcmV0dXJuIGZhbHNlO2lmKHRoaXMub3B0aW9ucy5kaXNhYmxlZHx8dGhpcy5vcHRpb25zLnR5cGU9PSJzdGF0aWMiKXJldHVybiBmYWxzZTt0aGlzLl9yZWZyZXNoSXRlbXMoZCk7dmFyIGY9bnVsbCxnPXRoaXM7YShkLnRhcmdldCkucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKXtpZihhLmRhdGEodGhpcywic29ydGFibGUtaXRlbSIpPT1nKXtmPWEodGhpcyk7cmV0dXJuIGZhbHNlfX0pO2lmKGEuZGF0YShkLnRhcmdldCwic29ydGFibGUtaXRlbSIpPT1nKWY9YShkLnRhcmdldCk7aWYoIWYpcmV0dXJuIGZhbHNlO2lmKHRoaXMub3B0aW9ucy5oYW5kbGUmJgohYyl7dmFyIGU9ZmFsc2U7YSh0aGlzLm9wdGlvbnMuaGFuZGxlLGYpLmZpbmQoIioiKS5hbmRTZWxmKCkuZWFjaChmdW5jdGlvbigpe2lmKHRoaXM9PWQudGFyZ2V0KWU9dHJ1ZX0pO2lmKCFlKXJldHVybiBmYWxzZX10aGlzLmN1cnJlbnRJdGVtPWY7dGhpcy5fcmVtb3ZlQ3VycmVudHNGcm9tSXRlbXMoKTtyZXR1cm4gdHJ1ZX0sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oZCxjLGYpe2M9dGhpcy5vcHRpb25zO3ZhciBnPXRoaXM7dGhpcy5jdXJyZW50Q29udGFpbmVyPXRoaXM7dGhpcy5yZWZyZXNoUG9zaXRpb25zKCk7dGhpcy5oZWxwZXI9dGhpcy5fY3JlYXRlSGVscGVyKGQpO3RoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKTt0aGlzLl9jYWNoZU1hcmdpbnMoKTt0aGlzLnNjcm9sbFBhcmVudD10aGlzLmhlbHBlci5zY3JvbGxQYXJlbnQoKTt0aGlzLm9mZnNldD10aGlzLmN1cnJlbnRJdGVtLm9mZnNldCgpO3RoaXMub2Zmc2V0PXt0b3A6dGhpcy5vZmZzZXQudG9wLXRoaXMubWFyZ2lucy50b3AsCmxlZnQ6dGhpcy5vZmZzZXQubGVmdC10aGlzLm1hcmdpbnMubGVmdH07dGhpcy5oZWxwZXIuY3NzKCJwb3NpdGlvbiIsImFic29sdXRlIik7dGhpcy5jc3NQb3NpdGlvbj10aGlzLmhlbHBlci5jc3MoInBvc2l0aW9uIik7YS5leHRlbmQodGhpcy5vZmZzZXQse2NsaWNrOntsZWZ0OmQucGFnZVgtdGhpcy5vZmZzZXQubGVmdCx0b3A6ZC5wYWdlWS10aGlzLm9mZnNldC50b3B9LHBhcmVudDp0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSxyZWxhdGl2ZTp0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpfSk7dGhpcy5vcmlnaW5hbFBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZCk7dGhpcy5vcmlnaW5hbFBhZ2VYPWQucGFnZVg7dGhpcy5vcmlnaW5hbFBhZ2VZPWQucGFnZVk7Yy5jdXJzb3JBdCYmdGhpcy5fYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcihjLmN1cnNvckF0KTt0aGlzLmRvbVBvc2l0aW9uPXtwcmV2OnRoaXMuY3VycmVudEl0ZW0ucHJldigpWzBdLHBhcmVudDp0aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpWzBdfTsKdGhpcy5oZWxwZXJbMF0hPXRoaXMuY3VycmVudEl0ZW1bMF0mJnRoaXMuY3VycmVudEl0ZW0uaGlkZSgpO3RoaXMuX2NyZWF0ZVBsYWNlaG9sZGVyKCk7Yy5jb250YWlubWVudCYmdGhpcy5fc2V0Q29udGFpbm1lbnQoKTtpZihjLmN1cnNvcil7aWYoYSgiYm9keSIpLmNzcygiY3Vyc29yIikpdGhpcy5fc3RvcmVkQ3Vyc29yPWEoImJvZHkiKS5jc3MoImN1cnNvciIpO2EoImJvZHkiKS5jc3MoImN1cnNvciIsYy5jdXJzb3IpfWlmKGMub3BhY2l0eSl7aWYodGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5IikpdGhpcy5fc3RvcmVkT3BhY2l0eT10aGlzLmhlbHBlci5jc3MoIm9wYWNpdHkiKTt0aGlzLmhlbHBlci5jc3MoIm9wYWNpdHkiLGMub3BhY2l0eSl9aWYoYy56SW5kZXgpe2lmKHRoaXMuaGVscGVyLmNzcygiekluZGV4IikpdGhpcy5fc3RvcmVkWkluZGV4PXRoaXMuaGVscGVyLmNzcygiekluZGV4Iik7dGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiLGMuekluZGV4KX1pZih0aGlzLnNjcm9sbFBhcmVudFswXSE9CmRvY3VtZW50JiZ0aGlzLnNjcm9sbFBhcmVudFswXS50YWdOYW1lIT0iSFRNTCIpdGhpcy5vdmVyZmxvd09mZnNldD10aGlzLnNjcm9sbFBhcmVudC5vZmZzZXQoKTt0aGlzLl90cmlnZ2VyKCJzdGFydCIsZCx0aGlzLl91aUhhc2goKSk7dGhpcy5fcHJlc2VydmVIZWxwZXJQcm9wb3J0aW9uc3x8dGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpO2lmKCFmKWZvcihmPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtmPj0wO2YtLSl0aGlzLmNvbnRhaW5lcnNbZl0uX3RyaWdnZXIoImFjdGl2YXRlIixkLGcuX3VpSGFzaCh0aGlzKSk7aWYoYS51aS5kZG1hbmFnZXIpYS51aS5kZG1hbmFnZXIuY3VycmVudD10aGlzO2EudWkuZGRtYW5hZ2VyJiYhYy5kcm9wQmVoYXZpb3VyJiZhLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLGQpO3RoaXMuZHJhZ2dpbmc9dHJ1ZTt0aGlzLmhlbHBlci5hZGRDbGFzcygidWktc29ydGFibGUtaGVscGVyIik7dGhpcy5fbW91c2VEcmFnKGQpOwpyZXR1cm4gdHJ1ZX0sX21vdXNlRHJhZzpmdW5jdGlvbihkKXt0aGlzLnBvc2l0aW9uPXRoaXMuX2dlbmVyYXRlUG9zaXRpb24oZCk7dGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKTtpZighdGhpcy5sYXN0UG9zaXRpb25BYnMpdGhpcy5sYXN0UG9zaXRpb25BYnM9dGhpcy5wb3NpdGlvbkFicztpZih0aGlzLm9wdGlvbnMuc2Nyb2xsKXt2YXIgYz10aGlzLm9wdGlvbnMsZj1mYWxzZTtpZih0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJnRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUhPSJIVE1MIil7aWYodGhpcy5vdmVyZmxvd09mZnNldC50b3ArdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0SGVpZ2h0LWQucGFnZVk8Yy5zY3JvbGxTZW5zaXRpdml0eSl0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9Zj10aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3ArYy5zY3JvbGxTcGVlZDtlbHNlIGlmKGQucGFnZVktdGhpcy5vdmVyZmxvd09mZnNldC50b3A8CmMuc2Nyb2xsU2Vuc2l0aXZpdHkpdGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wPWY9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wLWMuc2Nyb2xsU3BlZWQ7aWYodGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0K3RoaXMuc2Nyb2xsUGFyZW50WzBdLm9mZnNldFdpZHRoLWQucGFnZVg8Yy5zY3JvbGxTZW5zaXRpdml0eSl0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0PWY9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCtjLnNjcm9sbFNwZWVkO2Vsc2UgaWYoZC5wYWdlWC10aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQ8Yy5zY3JvbGxTZW5zaXRpdml0eSl0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0PWY9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdC1jLnNjcm9sbFNwZWVkfWVsc2V7aWYoZC5wYWdlWS1hKGRvY3VtZW50KS5zY3JvbGxUb3AoKTxjLnNjcm9sbFNlbnNpdGl2aXR5KWY9YShkb2N1bWVudCkuc2Nyb2xsVG9wKGEoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLQpjLnNjcm9sbFNwZWVkKTtlbHNlIGlmKGEod2luZG93KS5oZWlnaHQoKS0oZC5wYWdlWS1hKGRvY3VtZW50KS5zY3JvbGxUb3AoKSk8Yy5zY3JvbGxTZW5zaXRpdml0eSlmPWEoZG9jdW1lbnQpLnNjcm9sbFRvcChhKGRvY3VtZW50KS5zY3JvbGxUb3AoKStjLnNjcm9sbFNwZWVkKTtpZihkLnBhZ2VYLWEoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTxjLnNjcm9sbFNlbnNpdGl2aXR5KWY9YShkb2N1bWVudCkuc2Nyb2xsTGVmdChhKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCktYy5zY3JvbGxTcGVlZCk7ZWxzZSBpZihhKHdpbmRvdykud2lkdGgoKS0oZC5wYWdlWC1hKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkpPGMuc2Nyb2xsU2Vuc2l0aXZpdHkpZj1hKGRvY3VtZW50KS5zY3JvbGxMZWZ0KGEoZG9jdW1lbnQpLnNjcm9sbExlZnQoKStjLnNjcm9sbFNwZWVkKX1mIT09ZmFsc2UmJmEudWkuZGRtYW5hZ2VyJiYhYy5kcm9wQmVoYXZpb3VyJiZhLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLApkKX10aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpO2lmKCF0aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5vcHRpb25zLmF4aXMhPSJ5Iil0aGlzLmhlbHBlclswXS5zdHlsZS5sZWZ0PXRoaXMucG9zaXRpb24ubGVmdCsicHgiO2lmKCF0aGlzLm9wdGlvbnMuYXhpc3x8dGhpcy5vcHRpb25zLmF4aXMhPSJ4Iil0aGlzLmhlbHBlclswXS5zdHlsZS50b3A9dGhpcy5wb3NpdGlvbi50b3ArInB4Ijtmb3IoYz10aGlzLml0ZW1zLmxlbmd0aC0xO2M+PTA7Yy0tKXtmPXRoaXMuaXRlbXNbY107dmFyIGc9Zi5pdGVtWzBdLGU9dGhpcy5faW50ZXJzZWN0c1dpdGhQb2ludGVyKGYpO2lmKGUpaWYoZyE9dGhpcy5jdXJyZW50SXRlbVswXSYmdGhpcy5wbGFjZWhvbGRlcltlPT0xPyJuZXh0IjoicHJldiJdKClbMF0hPWcmJiFhLnVpLmNvbnRhaW5zKHRoaXMucGxhY2Vob2xkZXJbMF0sZykmJih0aGlzLm9wdGlvbnMudHlwZT09InNlbWktZHluYW1pYyI/IWEudWkuY29udGFpbnModGhpcy5lbGVtZW50WzBdLApnKTp0cnVlKSl7dGhpcy5kaXJlY3Rpb249ZT09MT8iZG93biI6InVwIjtpZih0aGlzLm9wdGlvbnMudG9sZXJhbmNlPT0icG9pbnRlciJ8fHRoaXMuX2ludGVyc2VjdHNXaXRoU2lkZXMoZikpdGhpcy5fcmVhcnJhbmdlKGQsZik7ZWxzZSBicmVhazt0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLGQsdGhpcy5fdWlIYXNoKCkpO2JyZWFrfX10aGlzLl9jb250YWN0Q29udGFpbmVycyhkKTthLnVpLmRkbWFuYWdlciYmYS51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLGQpO3RoaXMuX3RyaWdnZXIoInNvcnQiLGQsdGhpcy5fdWlIYXNoKCkpO3RoaXMubGFzdFBvc2l0aW9uQWJzPXRoaXMucG9zaXRpb25BYnM7cmV0dXJuIGZhbHNlfSxfbW91c2VTdG9wOmZ1bmN0aW9uKGQsYyl7aWYoZCl7YS51aS5kZG1hbmFnZXImJiF0aGlzLm9wdGlvbnMuZHJvcEJlaGF2aW91ciYmYS51aS5kZG1hbmFnZXIuZHJvcCh0aGlzLGQpO2lmKHRoaXMub3B0aW9ucy5yZXZlcnQpe3ZhciBmPXRoaXM7Yz1mLnBsYWNlaG9sZGVyLm9mZnNldCgpOwpmLnJldmVydGluZz10cnVlO2EodGhpcy5oZWxwZXIpLmFuaW1hdGUoe2xlZnQ6Yy5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LWYubWFyZ2lucy5sZWZ0Kyh0aGlzLm9mZnNldFBhcmVudFswXT09ZG9jdW1lbnQuYm9keT8wOnRoaXMub2Zmc2V0UGFyZW50WzBdLnNjcm9sbExlZnQpLHRvcDpjLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wLWYubWFyZ2lucy50b3ArKHRoaXMub2Zmc2V0UGFyZW50WzBdPT1kb2N1bWVudC5ib2R5PzA6dGhpcy5vZmZzZXRQYXJlbnRbMF0uc2Nyb2xsVG9wKX0scGFyc2VJbnQodGhpcy5vcHRpb25zLnJldmVydCwxMCl8fDUwMCxmdW5jdGlvbigpe2YuX2NsZWFyKGQpfSl9ZWxzZSB0aGlzLl9jbGVhcihkLGMpO3JldHVybiBmYWxzZX19LGNhbmNlbDpmdW5jdGlvbigpe3ZhciBkPXRoaXM7aWYodGhpcy5kcmFnZ2luZyl7dGhpcy5fbW91c2VVcCh7dGFyZ2V0Om51bGx9KTt0aGlzLm9wdGlvbnMuaGVscGVyPT0ib3JpZ2luYWwiP3RoaXMuY3VycmVudEl0ZW0uY3NzKHRoaXMuX3N0b3JlZENTUykucmVtb3ZlQ2xhc3MoInVpLXNvcnRhYmxlLWhlbHBlciIpOgp0aGlzLmN1cnJlbnRJdGVtLnNob3coKTtmb3IodmFyIGM9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO2M+PTA7Yy0tKXt0aGlzLmNvbnRhaW5lcnNbY10uX3RyaWdnZXIoImRlYWN0aXZhdGUiLG51bGwsZC5fdWlIYXNoKHRoaXMpKTtpZih0aGlzLmNvbnRhaW5lcnNbY10uY29udGFpbmVyQ2FjaGUub3Zlcil7dGhpcy5jb250YWluZXJzW2NdLl90cmlnZ2VyKCJvdXQiLG51bGwsZC5fdWlIYXNoKHRoaXMpKTt0aGlzLmNvbnRhaW5lcnNbY10uY29udGFpbmVyQ2FjaGUub3Zlcj0wfX19aWYodGhpcy5wbGFjZWhvbGRlcil7dGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlJiZ0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5wbGFjZWhvbGRlclswXSk7dGhpcy5vcHRpb25zLmhlbHBlciE9Im9yaWdpbmFsIiYmdGhpcy5oZWxwZXImJnRoaXMuaGVscGVyWzBdLnBhcmVudE5vZGUmJnRoaXMuaGVscGVyLnJlbW92ZSgpO2EuZXh0ZW5kKHRoaXMse2hlbHBlcjpudWxsLApkcmFnZ2luZzpmYWxzZSxyZXZlcnRpbmc6ZmFsc2UsX25vRmluYWxTb3J0Om51bGx9KTt0aGlzLmRvbVBvc2l0aW9uLnByZXY/YSh0aGlzLmRvbVBvc2l0aW9uLnByZXYpLmFmdGVyKHRoaXMuY3VycmVudEl0ZW0pOmEodGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQpLnByZXBlbmQodGhpcy5jdXJyZW50SXRlbSl9cmV0dXJuIHRoaXN9LHNlcmlhbGl6ZTpmdW5jdGlvbihkKXt2YXIgYz10aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KGQmJmQuY29ubmVjdGVkKSxmPVtdO2Q9ZHx8e307YShjKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGc9KGEoZC5pdGVtfHx0aGlzKS5hdHRyKGQuYXR0cmlidXRlfHwiaWQiKXx8IiIpLm1hdGNoKGQuZXhwcmVzc2lvbnx8LyguKylbLT1fXSguKykvKTtpZihnKWYucHVzaCgoZC5rZXl8fGdbMV0rIltdIikrIj0iKyhkLmtleSYmZC5leHByZXNzaW9uP2dbMV06Z1syXSkpfSk7IWYubGVuZ3RoJiZkLmtleSYmZi5wdXNoKGQua2V5KyI9Iik7cmV0dXJuIGYuam9pbigiJiIpfSwKdG9BcnJheTpmdW5jdGlvbihkKXt2YXIgYz10aGlzLl9nZXRJdGVtc0FzalF1ZXJ5KGQmJmQuY29ubmVjdGVkKSxmPVtdO2Q9ZHx8e307Yy5lYWNoKGZ1bmN0aW9uKCl7Zi5wdXNoKGEoZC5pdGVtfHx0aGlzKS5hdHRyKGQuYXR0cmlidXRlfHwiaWQiKXx8IiIpfSk7cmV0dXJuIGZ9LF9pbnRlcnNlY3RzV2l0aDpmdW5jdGlvbihkKXt2YXIgYz10aGlzLnBvc2l0aW9uQWJzLmxlZnQsZj1jK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsZz10aGlzLnBvc2l0aW9uQWJzLnRvcCxlPWcrdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsaT1kLmxlZnQsYj1pK2Qud2lkdGgsaD1kLnRvcCxqPWgrZC5oZWlnaHQsbD10aGlzLm9mZnNldC5jbGljay50b3Asbz10aGlzLm9mZnNldC5jbGljay5sZWZ0O2w9ZytsPmgmJmcrbDxqJiZjK28+aSYmYytvPGI7cmV0dXJuIHRoaXMub3B0aW9ucy50b2xlcmFuY2U9PSJwb2ludGVyInx8dGhpcy5vcHRpb25zLmZvcmNlUG9pbnRlckZvckNvbnRhaW5lcnN8fAp0aGlzLm9wdGlvbnMudG9sZXJhbmNlIT0icG9pbnRlciImJnRoaXMuaGVscGVyUHJvcG9ydGlvbnNbdGhpcy5mbG9hdGluZz8id2lkdGgiOiJoZWlnaHQiXT5kW3RoaXMuZmxvYXRpbmc/IndpZHRoIjoiaGVpZ2h0Il0/bDppPGMrdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC8yJiZmLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgvMjxiJiZoPGcrdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQvMiYmZS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC8yPGp9LF9pbnRlcnNlY3RzV2l0aFBvaW50ZXI6ZnVuY3Rpb24oZCl7dmFyIGM9YS51aS5pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCxkLnRvcCxkLmhlaWdodCk7ZD1hLnVpLmlzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy5sZWZ0K3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQsZC5sZWZ0LGQud2lkdGgpO2M9YyYmZDtkPXRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpOwp2YXIgZj10aGlzLl9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbigpO2lmKCFjKXJldHVybiBmYWxzZTtyZXR1cm4gdGhpcy5mbG9hdGluZz9mJiZmPT0icmlnaHQifHxkPT0iZG93biI/MjoxOmQmJihkPT0iZG93biI/MjoxKX0sX2ludGVyc2VjdHNXaXRoU2lkZXM6ZnVuY3Rpb24oZCl7dmFyIGM9YS51aS5pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCxkLnRvcCtkLmhlaWdodC8yLGQuaGVpZ2h0KTtkPWEudWkuaXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQrdGhpcy5vZmZzZXQuY2xpY2subGVmdCxkLmxlZnQrZC53aWR0aC8yLGQud2lkdGgpO3ZhciBmPXRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLGc9dGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKTtyZXR1cm4gdGhpcy5mbG9hdGluZyYmZz9nPT0icmlnaHQiJiZkfHxnPT0ibGVmdCImJiFkOmYmJihmPT0iZG93biImJmN8fGY9PSJ1cCImJiFjKX0sCl9nZXREcmFnVmVydGljYWxEaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLnBvc2l0aW9uQWJzLnRvcC10aGlzLmxhc3RQb3NpdGlvbkFicy50b3A7cmV0dXJuIGQhPTAmJihkPjA/ImRvd24iOiJ1cCIpfSxfZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLnBvc2l0aW9uQWJzLmxlZnQtdGhpcy5sYXN0UG9zaXRpb25BYnMubGVmdDtyZXR1cm4gZCE9MCYmKGQ+MD8icmlnaHQiOiJsZWZ0Iil9LHJlZnJlc2g6ZnVuY3Rpb24oZCl7dGhpcy5fcmVmcmVzaEl0ZW1zKGQpO3RoaXMucmVmcmVzaFBvc2l0aW9ucygpO3JldHVybiB0aGlzfSxfY29ubmVjdFdpdGg6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm9wdGlvbnM7cmV0dXJuIGQuY29ubmVjdFdpdGguY29uc3RydWN0b3I9PVN0cmluZz9bZC5jb25uZWN0V2l0aF06ZC5jb25uZWN0V2l0aH0sX2dldEl0ZW1zQXNqUXVlcnk6ZnVuY3Rpb24oZCl7dmFyIGM9W10sZj1bXSxnPXRoaXMuX2Nvbm5lY3RXaXRoKCk7CmlmKGcmJmQpZm9yKGQ9Zy5sZW5ndGgtMTtkPj0wO2QtLSlmb3IodmFyIGU9YShnW2RdKSxpPWUubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciBiPWEuZGF0YShlW2ldLCJzb3J0YWJsZSIpO2lmKGImJmIhPXRoaXMmJiFiLm9wdGlvbnMuZGlzYWJsZWQpZi5wdXNoKFthLmlzRnVuY3Rpb24oYi5vcHRpb25zLml0ZW1zKT9iLm9wdGlvbnMuaXRlbXMuY2FsbChiLmVsZW1lbnQpOmEoYi5vcHRpb25zLml0ZW1zLGIuZWxlbWVudCkubm90KCIudWktc29ydGFibGUtaGVscGVyIikubm90KCIudWktc29ydGFibGUtcGxhY2Vob2xkZXIiKSxiXSl9Zi5wdXNoKFthLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKT90aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnQsbnVsbCx7b3B0aW9uczp0aGlzLm9wdGlvbnMsaXRlbTp0aGlzLmN1cnJlbnRJdGVtfSk6YSh0aGlzLm9wdGlvbnMuaXRlbXMsdGhpcy5lbGVtZW50KS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKS5ub3QoIi51aS1zb3J0YWJsZS1wbGFjZWhvbGRlciIpLAp0aGlzXSk7Zm9yKGQ9Zi5sZW5ndGgtMTtkPj0wO2QtLSlmW2RdWzBdLmVhY2goZnVuY3Rpb24oKXtjLnB1c2godGhpcyl9KTtyZXR1cm4gYShjKX0sX3JlbW92ZUN1cnJlbnRzRnJvbUl0ZW1zOmZ1bmN0aW9uKCl7Zm9yKHZhciBkPXRoaXMuY3VycmVudEl0ZW0uZmluZCgiOmRhdGEoc29ydGFibGUtaXRlbSkiKSxjPTA7Yzx0aGlzLml0ZW1zLmxlbmd0aDtjKyspZm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspZFtmXT09dGhpcy5pdGVtc1tjXS5pdGVtWzBdJiZ0aGlzLml0ZW1zLnNwbGljZShjLDEpfSxfcmVmcmVzaEl0ZW1zOmZ1bmN0aW9uKGQpe3RoaXMuaXRlbXM9W107dGhpcy5jb250YWluZXJzPVt0aGlzXTt2YXIgYz10aGlzLml0ZW1zLGY9W1thLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKT90aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnRbMF0sZCx7aXRlbTp0aGlzLmN1cnJlbnRJdGVtfSk6YSh0aGlzLm9wdGlvbnMuaXRlbXMsdGhpcy5lbGVtZW50KSwKdGhpc11dLGc9dGhpcy5fY29ubmVjdFdpdGgoKTtpZihnKWZvcih2YXIgZT1nLmxlbmd0aC0xO2U+PTA7ZS0tKWZvcih2YXIgaT1hKGdbZV0pLGI9aS5sZW5ndGgtMTtiPj0wO2ItLSl7dmFyIGg9YS5kYXRhKGlbYl0sInNvcnRhYmxlIik7aWYoaCYmaCE9dGhpcyYmIWgub3B0aW9ucy5kaXNhYmxlZCl7Zi5wdXNoKFthLmlzRnVuY3Rpb24oaC5vcHRpb25zLml0ZW1zKT9oLm9wdGlvbnMuaXRlbXMuY2FsbChoLmVsZW1lbnRbMF0sZCx7aXRlbTp0aGlzLmN1cnJlbnRJdGVtfSk6YShoLm9wdGlvbnMuaXRlbXMsaC5lbGVtZW50KSxoXSk7dGhpcy5jb250YWluZXJzLnB1c2goaCl9fWZvcihlPWYubGVuZ3RoLTE7ZT49MDtlLS0pe2Q9ZltlXVsxXTtnPWZbZV1bMF07Yj0wO2ZvcihpPWcubGVuZ3RoO2I8aTtiKyspe2g9YShnW2JdKTtoLmRhdGEoInNvcnRhYmxlLWl0ZW0iLGQpO2MucHVzaCh7aXRlbTpoLGluc3RhbmNlOmQsd2lkdGg6MCxoZWlnaHQ6MCxsZWZ0OjAsdG9wOjB9KX19fSxyZWZyZXNoUG9zaXRpb25zOmZ1bmN0aW9uKGQpe2lmKHRoaXMub2Zmc2V0UGFyZW50JiYKdGhpcy5oZWxwZXIpdGhpcy5vZmZzZXQucGFyZW50PXRoaXMuX2dldFBhcmVudE9mZnNldCgpO2Zvcih2YXIgYz10aGlzLml0ZW1zLmxlbmd0aC0xO2M+PTA7Yy0tKXt2YXIgZj10aGlzLml0ZW1zW2NdO2lmKCEoZi5pbnN0YW5jZSE9dGhpcy5jdXJyZW50Q29udGFpbmVyJiZ0aGlzLmN1cnJlbnRDb250YWluZXImJmYuaXRlbVswXSE9dGhpcy5jdXJyZW50SXRlbVswXSkpe3ZhciBnPXRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50P2EodGhpcy5vcHRpb25zLnRvbGVyYW5jZUVsZW1lbnQsZi5pdGVtKTpmLml0ZW07aWYoIWQpe2Yud2lkdGg9Zy5vdXRlcldpZHRoKCk7Zi5oZWlnaHQ9Zy5vdXRlckhlaWdodCgpfWc9Zy5vZmZzZXQoKTtmLmxlZnQ9Zy5sZWZ0O2YudG9wPWcudG9wfX1pZih0aGlzLm9wdGlvbnMuY3VzdG9tJiZ0aGlzLm9wdGlvbnMuY3VzdG9tLnJlZnJlc2hDb250YWluZXJzKXRoaXMub3B0aW9ucy5jdXN0b20ucmVmcmVzaENvbnRhaW5lcnMuY2FsbCh0aGlzKTtlbHNlIGZvcihjPQp0aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7Yz49MDtjLS0pe2c9dGhpcy5jb250YWluZXJzW2NdLmVsZW1lbnQub2Zmc2V0KCk7dGhpcy5jb250YWluZXJzW2NdLmNvbnRhaW5lckNhY2hlLmxlZnQ9Zy5sZWZ0O3RoaXMuY29udGFpbmVyc1tjXS5jb250YWluZXJDYWNoZS50b3A9Zy50b3A7dGhpcy5jb250YWluZXJzW2NdLmNvbnRhaW5lckNhY2hlLndpZHRoPXRoaXMuY29udGFpbmVyc1tjXS5lbGVtZW50Lm91dGVyV2lkdGgoKTt0aGlzLmNvbnRhaW5lcnNbY10uY29udGFpbmVyQ2FjaGUuaGVpZ2h0PXRoaXMuY29udGFpbmVyc1tjXS5lbGVtZW50Lm91dGVySGVpZ2h0KCl9cmV0dXJuIHRoaXN9LF9jcmVhdGVQbGFjZWhvbGRlcjpmdW5jdGlvbihkKXt2YXIgYz1kfHx0aGlzLGY9Yy5vcHRpb25zO2lmKCFmLnBsYWNlaG9sZGVyfHxmLnBsYWNlaG9sZGVyLmNvbnN0cnVjdG9yPT1TdHJpbmcpe3ZhciBnPWYucGxhY2Vob2xkZXI7Zi5wbGFjZWhvbGRlcj17ZWxlbWVudDpmdW5jdGlvbigpe3ZhciBlPQphKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYy5jdXJyZW50SXRlbVswXS5ub2RlTmFtZSkpLmFkZENsYXNzKGd8fGMuY3VycmVudEl0ZW1bMF0uY2xhc3NOYW1lKyIgdWktc29ydGFibGUtcGxhY2Vob2xkZXIiKS5yZW1vdmVDbGFzcygidWktc29ydGFibGUtaGVscGVyIilbMF07aWYoIWcpZS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO3JldHVybiBlfSx1cGRhdGU6ZnVuY3Rpb24oZSxpKXtpZighKGcmJiFmLmZvcmNlUGxhY2Vob2xkZXJTaXplKSl7aS5oZWlnaHQoKXx8aS5oZWlnaHQoYy5jdXJyZW50SXRlbS5pbm5lckhlaWdodCgpLXBhcnNlSW50KGMuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nVG9wIil8fDAsMTApLXBhcnNlSW50KGMuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nQm90dG9tIil8fDAsMTApKTtpLndpZHRoKCl8fGkud2lkdGgoYy5jdXJyZW50SXRlbS5pbm5lcldpZHRoKCktcGFyc2VJbnQoYy5jdXJyZW50SXRlbS5jc3MoInBhZGRpbmdMZWZ0Iil8fDAsMTApLXBhcnNlSW50KGMuY3VycmVudEl0ZW0uY3NzKCJwYWRkaW5nUmlnaHQiKXx8CjAsMTApKX19fX1jLnBsYWNlaG9sZGVyPWEoZi5wbGFjZWhvbGRlci5lbGVtZW50LmNhbGwoYy5lbGVtZW50LGMuY3VycmVudEl0ZW0pKTtjLmN1cnJlbnRJdGVtLmFmdGVyKGMucGxhY2Vob2xkZXIpO2YucGxhY2Vob2xkZXIudXBkYXRlKGMsYy5wbGFjZWhvbGRlcil9LF9jb250YWN0Q29udGFpbmVyczpmdW5jdGlvbihkKXtmb3IodmFyIGM9bnVsbCxmPW51bGwsZz10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7Zz49MDtnLS0paWYoIWEudWkuY29udGFpbnModGhpcy5jdXJyZW50SXRlbVswXSx0aGlzLmNvbnRhaW5lcnNbZ10uZWxlbWVudFswXSkpaWYodGhpcy5faW50ZXJzZWN0c1dpdGgodGhpcy5jb250YWluZXJzW2ddLmNvbnRhaW5lckNhY2hlKSl7aWYoIShjJiZhLnVpLmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tnXS5lbGVtZW50WzBdLGMuZWxlbWVudFswXSkpKXtjPXRoaXMuY29udGFpbmVyc1tnXTtmPWd9fWVsc2UgaWYodGhpcy5jb250YWluZXJzW2ddLmNvbnRhaW5lckNhY2hlLm92ZXIpe3RoaXMuY29udGFpbmVyc1tnXS5fdHJpZ2dlcigib3V0IiwKZCx0aGlzLl91aUhhc2godGhpcykpO3RoaXMuY29udGFpbmVyc1tnXS5jb250YWluZXJDYWNoZS5vdmVyPTB9aWYoYylpZih0aGlzLmNvbnRhaW5lcnMubGVuZ3RoPT09MSl7dGhpcy5jb250YWluZXJzW2ZdLl90cmlnZ2VyKCJvdmVyIixkLHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5jb250YWluZXJzW2ZdLmNvbnRhaW5lckNhY2hlLm92ZXI9MX1lbHNlIGlmKHRoaXMuY3VycmVudENvbnRhaW5lciE9dGhpcy5jb250YWluZXJzW2ZdKXtjPTFFNDtnPW51bGw7Zm9yKHZhciBlPXRoaXMucG9zaXRpb25BYnNbdGhpcy5jb250YWluZXJzW2ZdLmZsb2F0aW5nPyJsZWZ0IjoidG9wIl0saT10aGlzLml0ZW1zLmxlbmd0aC0xO2k+PTA7aS0tKWlmKGEudWkuY29udGFpbnModGhpcy5jb250YWluZXJzW2ZdLmVsZW1lbnRbMF0sdGhpcy5pdGVtc1tpXS5pdGVtWzBdKSl7dmFyIGI9dGhpcy5pdGVtc1tpXVt0aGlzLmNvbnRhaW5lcnNbZl0uZmxvYXRpbmc/ImxlZnQiOiJ0b3AiXTtpZihNYXRoLmFicyhiLQplKTxjKXtjPU1hdGguYWJzKGItZSk7Zz10aGlzLml0ZW1zW2ldfX1pZihnfHx0aGlzLm9wdGlvbnMuZHJvcE9uRW1wdHkpe3RoaXMuY3VycmVudENvbnRhaW5lcj10aGlzLmNvbnRhaW5lcnNbZl07Zz90aGlzLl9yZWFycmFuZ2UoZCxnLG51bGwsdHJ1ZSk6dGhpcy5fcmVhcnJhbmdlKGQsbnVsbCx0aGlzLmNvbnRhaW5lcnNbZl0uZWxlbWVudCx0cnVlKTt0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLGQsdGhpcy5fdWlIYXNoKCkpO3RoaXMuY29udGFpbmVyc1tmXS5fdHJpZ2dlcigiY2hhbmdlIixkLHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyLnVwZGF0ZSh0aGlzLmN1cnJlbnRDb250YWluZXIsdGhpcy5wbGFjZWhvbGRlcik7dGhpcy5jb250YWluZXJzW2ZdLl90cmlnZ2VyKCJvdmVyIixkLHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5jb250YWluZXJzW2ZdLmNvbnRhaW5lckNhY2hlLm92ZXI9MX19fSxfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKGQpe3ZhciBjPQp0aGlzLm9wdGlvbnM7ZD1hLmlzRnVuY3Rpb24oYy5oZWxwZXIpP2EoYy5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFtkLHRoaXMuY3VycmVudEl0ZW1dKSk6Yy5oZWxwZXI9PSJjbG9uZSI/dGhpcy5jdXJyZW50SXRlbS5jbG9uZSgpOnRoaXMuY3VycmVudEl0ZW07ZC5wYXJlbnRzKCJib2R5IikubGVuZ3RofHxhKGMuYXBwZW5kVG8hPSJwYXJlbnQiP2MuYXBwZW5kVG86dGhpcy5jdXJyZW50SXRlbVswXS5wYXJlbnROb2RlKVswXS5hcHBlbmRDaGlsZChkWzBdKTtpZihkWzBdPT10aGlzLmN1cnJlbnRJdGVtWzBdKXRoaXMuX3N0b3JlZENTUz17d2lkdGg6dGhpcy5jdXJyZW50SXRlbVswXS5zdHlsZS53aWR0aCxoZWlnaHQ6dGhpcy5jdXJyZW50SXRlbVswXS5zdHlsZS5oZWlnaHQscG9zaXRpb246dGhpcy5jdXJyZW50SXRlbS5jc3MoInBvc2l0aW9uIiksdG9wOnRoaXMuY3VycmVudEl0ZW0uY3NzKCJ0b3AiKSxsZWZ0OnRoaXMuY3VycmVudEl0ZW0uY3NzKCJsZWZ0Iil9O2lmKGRbMF0uc3R5bGUud2lkdGg9PQoiInx8Yy5mb3JjZUhlbHBlclNpemUpZC53aWR0aCh0aGlzLmN1cnJlbnRJdGVtLndpZHRoKCkpO2lmKGRbMF0uc3R5bGUuaGVpZ2h0PT0iInx8Yy5mb3JjZUhlbHBlclNpemUpZC5oZWlnaHQodGhpcy5jdXJyZW50SXRlbS5oZWlnaHQoKSk7cmV0dXJuIGR9LF9hZGp1c3RPZmZzZXRGcm9tSGVscGVyOmZ1bmN0aW9uKGQpe2lmKHR5cGVvZiBkPT0ic3RyaW5nIilkPWQuc3BsaXQoIiAiKTtpZihhLmlzQXJyYXkoZCkpZD17bGVmdDorZFswXSx0b3A6K2RbMV18fDB9O2lmKCJsZWZ0ImluIGQpdGhpcy5vZmZzZXQuY2xpY2subGVmdD1kLmxlZnQrdGhpcy5tYXJnaW5zLmxlZnQ7aWYoInJpZ2h0ImluIGQpdGhpcy5vZmZzZXQuY2xpY2subGVmdD10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLWQucmlnaHQrdGhpcy5tYXJnaW5zLmxlZnQ7aWYoInRvcCJpbiBkKXRoaXMub2Zmc2V0LmNsaWNrLnRvcD1kLnRvcCt0aGlzLm1hcmdpbnMudG9wO2lmKCJib3R0b20iaW4gZCl0aGlzLm9mZnNldC5jbGljay50b3A9CnRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LWQuYm90dG9tK3RoaXMubWFyZ2lucy50b3B9LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTt2YXIgZD10aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTtpZih0aGlzLmNzc1Bvc2l0aW9uPT0iYWJzb2x1dGUiJiZ0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJmEudWkuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pKXtkLmxlZnQrPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTtkLnRvcCs9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCl9aWYodGhpcy5vZmZzZXRQYXJlbnRbMF09PWRvY3VtZW50LmJvZHl8fHRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUmJnRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09Imh0bWwiJiZhLmJyb3dzZXIubXNpZSlkPQp7dG9wOjAsbGVmdDowfTtyZXR1cm57dG9wOmQudG9wKyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSxsZWZ0OmQubGVmdCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApfX0sX2dldFJlbGF0aXZlT2Zmc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5jc3NQb3NpdGlvbj09InJlbGF0aXZlIil7dmFyIGQ9dGhpcy5jdXJyZW50SXRlbS5wb3NpdGlvbigpO3JldHVybnt0b3A6ZC50b3AtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygidG9wIiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxsZWZ0OmQubGVmdC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJsZWZ0IiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCl9fWVsc2UgcmV0dXJue3RvcDowLGxlZnQ6MH19LF9jYWNoZU1hcmdpbnM6ZnVuY3Rpb24oKXt0aGlzLm1hcmdpbnM9e2xlZnQ6cGFyc2VJbnQodGhpcy5jdXJyZW50SXRlbS5jc3MoIm1hcmdpbkxlZnQiKSwKMTApfHwwLHRvcDpwYXJzZUludCh0aGlzLmN1cnJlbnRJdGVtLmNzcygibWFyZ2luVG9wIiksMTApfHwwfX0sX2NhY2hlSGVscGVyUHJvcG9ydGlvbnM6ZnVuY3Rpb24oKXt0aGlzLmhlbHBlclByb3BvcnRpb25zPXt3aWR0aDp0aGlzLmhlbHBlci5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuaGVscGVyLm91dGVySGVpZ2h0KCl9fSxfc2V0Q29udGFpbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm9wdGlvbnM7aWYoZC5jb250YWlubWVudD09InBhcmVudCIpZC5jb250YWlubWVudD10aGlzLmhlbHBlclswXS5wYXJlbnROb2RlO2lmKGQuY29udGFpbm1lbnQ9PSJkb2N1bWVudCJ8fGQuY29udGFpbm1lbnQ9PSJ3aW5kb3ciKXRoaXMuY29udGFpbm1lbnQ9WzAtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCwwLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wLGEoZC5jb250YWlubWVudD09ImRvY3VtZW50Ij8KZG9jdW1lbnQ6d2luZG93KS53aWR0aCgpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsKGEoZC5jb250YWlubWVudD09ImRvY3VtZW50Ij9kb2N1bWVudDp3aW5kb3cpLmhlaWdodCgpfHxkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXTtpZighL14oZG9jdW1lbnR8d2luZG93fHBhcmVudCkkLy50ZXN0KGQuY29udGFpbm1lbnQpKXt2YXIgYz1hKGQuY29udGFpbm1lbnQpWzBdO2Q9YShkLmNvbnRhaW5tZW50KS5vZmZzZXQoKTt2YXIgZj1hKGMpLmNzcygib3ZlcmZsb3ciKSE9ImhpZGRlbiI7dGhpcy5jb250YWlubWVudD1bZC5sZWZ0KyhwYXJzZUludChhKGMpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKSsocGFyc2VJbnQoYShjKS5jc3MoInBhZGRpbmdMZWZ0IiksMTApfHwwKS10aGlzLm1hcmdpbnMubGVmdCxkLnRvcCsocGFyc2VJbnQoYShjKS5jc3MoImJvcmRlclRvcFdpZHRoIiksCjEwKXx8MCkrKHBhcnNlSW50KGEoYykuY3NzKCJwYWRkaW5nVG9wIiksMTApfHwwKS10aGlzLm1hcmdpbnMudG9wLGQubGVmdCsoZj9NYXRoLm1heChjLnNjcm9sbFdpZHRoLGMub2Zmc2V0V2lkdGgpOmMub2Zmc2V0V2lkdGgpLShwYXJzZUludChhKGMpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKS0ocGFyc2VJbnQoYShjKS5jc3MoInBhZGRpbmdSaWdodCIpLDEwKXx8MCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCxkLnRvcCsoZj9NYXRoLm1heChjLnNjcm9sbEhlaWdodCxjLm9mZnNldEhlaWdodCk6Yy5vZmZzZXRIZWlnaHQpLShwYXJzZUludChhKGMpLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApLShwYXJzZUludChhKGMpLmNzcygicGFkZGluZ0JvdHRvbSIpLDEwKXx8MCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF19fSxfY29udmVydFBvc2l0aW9uVG86ZnVuY3Rpb24oZCxjKXtpZighYyljPQp0aGlzLnBvc2l0aW9uO2Q9ZD09ImFic29sdXRlIj8xOi0xO3ZhciBmPXRoaXMuY3NzUG9zaXRpb249PSJhYnNvbHV0ZSImJiEodGhpcy5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiZhLnVpLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSk/dGhpcy5vZmZzZXRQYXJlbnQ6dGhpcy5zY3JvbGxQYXJlbnQsZz0vKGh0bWx8Ym9keSkvaS50ZXN0KGZbMF0udGFnTmFtZSk7cmV0dXJue3RvcDpjLnRvcCt0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AqZCt0aGlzLm9mZnNldC5wYXJlbnQudG9wKmQtKGEuYnJvd3Nlci5zYWZhcmkmJnRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/MDoodGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk6Zz8wOmYuc2Nyb2xsVG9wKCkpKmQpLGxlZnQ6Yy5sZWZ0K3RoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQqZCt0aGlzLm9mZnNldC5wYXJlbnQubGVmdCpkLShhLmJyb3dzZXIuc2FmYXJpJiYKdGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8wOih0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6Zz8wOmYuc2Nyb2xsTGVmdCgpKSpkKX19LF9nZW5lcmF0ZVBvc2l0aW9uOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMub3B0aW9ucyxmPXRoaXMuY3NzUG9zaXRpb249PSJhYnNvbHV0ZSImJiEodGhpcy5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiZhLnVpLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSk/dGhpcy5vZmZzZXRQYXJlbnQ6dGhpcy5zY3JvbGxQYXJlbnQsZz0vKGh0bWx8Ym9keSkvaS50ZXN0KGZbMF0udGFnTmFtZSk7aWYodGhpcy5jc3NQb3NpdGlvbj09InJlbGF0aXZlIiYmISh0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJnRoaXMuc2Nyb2xsUGFyZW50WzBdIT10aGlzLm9mZnNldFBhcmVudFswXSkpdGhpcy5vZmZzZXQucmVsYXRpdmU9dGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKTsKdmFyIGU9ZC5wYWdlWCxpPWQucGFnZVk7aWYodGhpcy5vcmlnaW5hbFBvc2l0aW9uKXtpZih0aGlzLmNvbnRhaW5tZW50KXtpZihkLnBhZ2VYLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ8dGhpcy5jb250YWlubWVudFswXSllPXRoaXMuY29udGFpbm1lbnRbMF0rdGhpcy5vZmZzZXQuY2xpY2subGVmdDtpZihkLnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDx0aGlzLmNvbnRhaW5tZW50WzFdKWk9dGhpcy5jb250YWlubWVudFsxXSt0aGlzLm9mZnNldC5jbGljay50b3A7aWYoZC5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PnRoaXMuY29udGFpbm1lbnRbMl0pZT10aGlzLmNvbnRhaW5tZW50WzJdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7aWYoZC5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A+dGhpcy5jb250YWlubWVudFszXSlpPXRoaXMuY29udGFpbm1lbnRbM10rdGhpcy5vZmZzZXQuY2xpY2sudG9wfWlmKGMuZ3JpZCl7aT10aGlzLm9yaWdpbmFsUGFnZVkrTWF0aC5yb3VuZCgoaS0KdGhpcy5vcmlnaW5hbFBhZ2VZKS9jLmdyaWRbMV0pKmMuZ3JpZFsxXTtpPXRoaXMuY29udGFpbm1lbnQ/IShpLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDx0aGlzLmNvbnRhaW5tZW50WzFdfHxpLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD50aGlzLmNvbnRhaW5tZW50WzNdKT9pOiEoaS10aGlzLm9mZnNldC5jbGljay50b3A8dGhpcy5jb250YWlubWVudFsxXSk/aS1jLmdyaWRbMV06aStjLmdyaWRbMV06aTtlPXRoaXMub3JpZ2luYWxQYWdlWCtNYXRoLnJvdW5kKChlLXRoaXMub3JpZ2luYWxQYWdlWCkvYy5ncmlkWzBdKSpjLmdyaWRbMF07ZT10aGlzLmNvbnRhaW5tZW50PyEoZS10aGlzLm9mZnNldC5jbGljay5sZWZ0PHRoaXMuY29udGFpbm1lbnRbMF18fGUtdGhpcy5vZmZzZXQuY2xpY2subGVmdD50aGlzLmNvbnRhaW5tZW50WzJdKT9lOiEoZS10aGlzLm9mZnNldC5jbGljay5sZWZ0PHRoaXMuY29udGFpbm1lbnRbMF0pP2UtYy5ncmlkWzBdOmUrYy5ncmlkWzBdOmV9fXJldHVybnt0b3A6aS0KdGhpcy5vZmZzZXQuY2xpY2sudG9wLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wKyhhLmJyb3dzZXIuc2FmYXJpJiZ0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPzA6dGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk6Zz8wOmYuc2Nyb2xsVG9wKCkpLGxlZnQ6ZS10aGlzLm9mZnNldC5jbGljay5sZWZ0LXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQrKGEuYnJvd3Nlci5zYWZhcmkmJnRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/MDp0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6Zz8wOmYuc2Nyb2xsTGVmdCgpKX19LF9yZWFycmFuZ2U6ZnVuY3Rpb24oZCxjLGYsZyl7Zj9mWzBdLmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pOmMuaXRlbVswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyWzBdLAp0aGlzLmRpcmVjdGlvbj09ImRvd24iP2MuaXRlbVswXTpjLml0ZW1bMF0ubmV4dFNpYmxpbmcpO3RoaXMuY291bnRlcj10aGlzLmNvdW50ZXI/Kyt0aGlzLmNvdW50ZXI6MTt2YXIgZT10aGlzLGk9dGhpcy5jb3VudGVyO3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aT09ZS5jb3VudGVyJiZlLnJlZnJlc2hQb3NpdGlvbnMoIWcpfSwwKX0sX2NsZWFyOmZ1bmN0aW9uKGQsYyl7dGhpcy5yZXZlcnRpbmc9ZmFsc2U7dmFyIGY9W107IXRoaXMuX25vRmluYWxTb3J0JiZ0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGUmJnRoaXMucGxhY2Vob2xkZXIuYmVmb3JlKHRoaXMuY3VycmVudEl0ZW0pO3RoaXMuX25vRmluYWxTb3J0PW51bGw7aWYodGhpcy5oZWxwZXJbMF09PXRoaXMuY3VycmVudEl0ZW1bMF0pe2Zvcih2YXIgZyBpbiB0aGlzLl9zdG9yZWRDU1MpaWYodGhpcy5fc3RvcmVkQ1NTW2ddPT0iYXV0byJ8fHRoaXMuX3N0b3JlZENTU1tnXT09InN0YXRpYyIpdGhpcy5fc3RvcmVkQ1NTW2ddPQoiIjt0aGlzLmN1cnJlbnRJdGVtLmNzcyh0aGlzLl9zdG9yZWRDU1MpLnJlbW92ZUNsYXNzKCJ1aS1zb3J0YWJsZS1oZWxwZXIiKX1lbHNlIHRoaXMuY3VycmVudEl0ZW0uc2hvdygpO3RoaXMuZnJvbU91dHNpZGUmJiFjJiZmLnB1c2goZnVuY3Rpb24oZSl7dGhpcy5fdHJpZ2dlcigicmVjZWl2ZSIsZSx0aGlzLl91aUhhc2godGhpcy5mcm9tT3V0c2lkZSkpfSk7aWYoKHRoaXMuZnJvbU91dHNpZGV8fHRoaXMuZG9tUG9zaXRpb24ucHJldiE9dGhpcy5jdXJyZW50SXRlbS5wcmV2KCkubm90KCIudWktc29ydGFibGUtaGVscGVyIilbMF18fHRoaXMuZG9tUG9zaXRpb24ucGFyZW50IT10aGlzLmN1cnJlbnRJdGVtLnBhcmVudCgpWzBdKSYmIWMpZi5wdXNoKGZ1bmN0aW9uKGUpe3RoaXMuX3RyaWdnZXIoInVwZGF0ZSIsZSx0aGlzLl91aUhhc2goKSl9KTtpZighYS51aS5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sdGhpcy5jdXJyZW50SXRlbVswXSkpe2N8fGYucHVzaChmdW5jdGlvbihlKXt0aGlzLl90cmlnZ2VyKCJyZW1vdmUiLAplLHRoaXMuX3VpSGFzaCgpKX0pO2ZvcihnPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtnPj0wO2ctLSlpZihhLnVpLmNvbnRhaW5zKHRoaXMuY29udGFpbmVyc1tnXS5lbGVtZW50WzBdLHRoaXMuY3VycmVudEl0ZW1bMF0pJiYhYyl7Zi5wdXNoKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihpKXtlLl90cmlnZ2VyKCJyZWNlaXZlIixpLHRoaXMuX3VpSGFzaCh0aGlzKSl9fS5jYWxsKHRoaXMsdGhpcy5jb250YWluZXJzW2ddKSk7Zi5wdXNoKGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbihpKXtlLl90cmlnZ2VyKCJ1cGRhdGUiLGksdGhpcy5fdWlIYXNoKHRoaXMpKX19LmNhbGwodGhpcyx0aGlzLmNvbnRhaW5lcnNbZ10pKX19Zm9yKGc9dGhpcy5jb250YWluZXJzLmxlbmd0aC0xO2c+PTA7Zy0tKXtjfHxmLnB1c2goZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGkpe2UuX3RyaWdnZXIoImRlYWN0aXZhdGUiLGksdGhpcy5fdWlIYXNoKHRoaXMpKX19LmNhbGwodGhpcywKdGhpcy5jb250YWluZXJzW2ddKSk7aWYodGhpcy5jb250YWluZXJzW2ddLmNvbnRhaW5lckNhY2hlLm92ZXIpe2YucHVzaChmdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oaSl7ZS5fdHJpZ2dlcigib3V0IixpLHRoaXMuX3VpSGFzaCh0aGlzKSl9fS5jYWxsKHRoaXMsdGhpcy5jb250YWluZXJzW2ddKSk7dGhpcy5jb250YWluZXJzW2ddLmNvbnRhaW5lckNhY2hlLm92ZXI9MH19dGhpcy5fc3RvcmVkQ3Vyc29yJiZhKCJib2R5IikuY3NzKCJjdXJzb3IiLHRoaXMuX3N0b3JlZEN1cnNvcik7dGhpcy5fc3RvcmVkT3BhY2l0eSYmdGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5Iix0aGlzLl9zdG9yZWRPcGFjaXR5KTtpZih0aGlzLl9zdG9yZWRaSW5kZXgpdGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiLHRoaXMuX3N0b3JlZFpJbmRleD09ImF1dG8iPyIiOnRoaXMuX3N0b3JlZFpJbmRleCk7dGhpcy5kcmFnZ2luZz1mYWxzZTtpZih0aGlzLmNhbmNlbEhlbHBlclJlbW92YWwpe2lmKCFjKXt0aGlzLl90cmlnZ2VyKCJiZWZvcmVTdG9wIiwKZCx0aGlzLl91aUhhc2goKSk7Zm9yKGc9MDtnPGYubGVuZ3RoO2crKylmW2ddLmNhbGwodGhpcyxkKTt0aGlzLl90cmlnZ2VyKCJzdG9wIixkLHRoaXMuX3VpSGFzaCgpKX1yZXR1cm4gZmFsc2V9Y3x8dGhpcy5fdHJpZ2dlcigiYmVmb3JlU3RvcCIsZCx0aGlzLl91aUhhc2goKSk7dGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pO3RoaXMuaGVscGVyWzBdIT10aGlzLmN1cnJlbnRJdGVtWzBdJiZ0aGlzLmhlbHBlci5yZW1vdmUoKTt0aGlzLmhlbHBlcj1udWxsO2lmKCFjKXtmb3IoZz0wO2c8Zi5sZW5ndGg7ZysrKWZbZ10uY2FsbCh0aGlzLGQpO3RoaXMuX3RyaWdnZXIoInN0b3AiLGQsdGhpcy5fdWlIYXNoKCkpfXRoaXMuZnJvbU91dHNpZGU9ZmFsc2U7cmV0dXJuIHRydWV9LF90cmlnZ2VyOmZ1bmN0aW9uKCl7YS5XaWRnZXQucHJvdG90eXBlLl90cmlnZ2VyLmFwcGx5KHRoaXMsYXJndW1lbnRzKT09PWZhbHNlJiZ0aGlzLmNhbmNlbCgpfSwKX3VpSGFzaDpmdW5jdGlvbihkKXt2YXIgYz1kfHx0aGlzO3JldHVybntoZWxwZXI6Yy5oZWxwZXIscGxhY2Vob2xkZXI6Yy5wbGFjZWhvbGRlcnx8YShbXSkscG9zaXRpb246Yy5wb3NpdGlvbixvcmlnaW5hbFBvc2l0aW9uOmMub3JpZ2luYWxQb3NpdGlvbixvZmZzZXQ6Yy5wb3NpdGlvbkFicyxpdGVtOmMuY3VycmVudEl0ZW0sc2VuZGVyOmQ/ZC5lbGVtZW50Om51bGx9fX0pO2EuZXh0ZW5kKGEudWkuc29ydGFibGUse3ZlcnNpb246IjEuOC4xMyJ9KX0pKGpRdWVyeSk7CmpRdWVyeS5lZmZlY3RzfHxmdW5jdGlvbihhLGQpe2Z1bmN0aW9uIGMobil7dmFyIGs7aWYobiYmbi5jb25zdHJ1Y3Rvcj09QXJyYXkmJm4ubGVuZ3RoPT0zKXJldHVybiBuO2lmKGs9L3JnYlwoXHMqKFswLTldezEsM30pXHMqLFxzKihbMC05XXsxLDN9KVxzKixccyooWzAtOV17MSwzfSlccypcKS8uZXhlYyhuKSlyZXR1cm5bcGFyc2VJbnQoa1sxXSwxMCkscGFyc2VJbnQoa1syXSwxMCkscGFyc2VJbnQoa1szXSwxMCldO2lmKGs9L3JnYlwoXHMqKFswLTldKyg/OlwuWzAtOV0rKT8pXCVccyosXHMqKFswLTldKyg/OlwuWzAtOV0rKT8pXCVccyosXHMqKFswLTldKyg/OlwuWzAtOV0rKT8pXCVccypcKS8uZXhlYyhuKSlyZXR1cm5bcGFyc2VGbG9hdChrWzFdKSoyLjU1LHBhcnNlRmxvYXQoa1syXSkqMi41NSxwYXJzZUZsb2F0KGtbM10pKjIuNTVdO2lmKGs9LyMoW2EtZkEtRjAtOV17Mn0pKFthLWZBLUYwLTldezJ9KShbYS1mQS1GMC05XXsyfSkvLmV4ZWMobikpcmV0dXJuW3BhcnNlSW50KGtbMV0sCjE2KSxwYXJzZUludChrWzJdLDE2KSxwYXJzZUludChrWzNdLDE2KV07aWYoaz0vIyhbYS1mQS1GMC05XSkoW2EtZkEtRjAtOV0pKFthLWZBLUYwLTldKS8uZXhlYyhuKSlyZXR1cm5bcGFyc2VJbnQoa1sxXStrWzFdLDE2KSxwYXJzZUludChrWzJdK2tbMl0sMTYpLHBhcnNlSW50KGtbM10ra1szXSwxNildO2lmKC9yZ2JhXCgwLCAwLCAwLCAwXCkvLmV4ZWMobikpcmV0dXJuIGoudHJhbnNwYXJlbnQ7cmV0dXJuIGpbYS50cmltKG4pLnRvTG93ZXJDYXNlKCldfWZ1bmN0aW9uIGYobixrKXt2YXIgbTtkb3ttPWEuY3VyQ1NTKG4sayk7aWYobSE9IiImJm0hPSJ0cmFuc3BhcmVudCJ8fGEubm9kZU5hbWUobiwiYm9keSIpKWJyZWFrO2s9ImJhY2tncm91bmRDb2xvciJ9d2hpbGUobj1uLnBhcmVudE5vZGUpO3JldHVybiBjKG0pfWZ1bmN0aW9uIGcoKXt2YXIgbj1kb2N1bWVudC5kZWZhdWx0Vmlldz9kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCk6dGhpcy5jdXJyZW50U3R5bGUsCms9e30sbSxwO2lmKG4mJm4ubGVuZ3RoJiZuWzBdJiZuW25bMF1dKWZvcih2YXIgcT1uLmxlbmd0aDtxLS07KXttPW5bcV07aWYodHlwZW9mIG5bbV09PSJzdHJpbmciKXtwPW0ucmVwbGFjZSgvXC0oXHcpL2csZnVuY3Rpb24ocyxyKXtyZXR1cm4gci50b1VwcGVyQ2FzZSgpfSk7a1twXT1uW21dfX1lbHNlIGZvcihtIGluIG4paWYodHlwZW9mIG5bbV09PT0ic3RyaW5nIilrW21dPW5bbV07cmV0dXJuIGt9ZnVuY3Rpb24gZShuKXt2YXIgayxtO2ZvcihrIGluIG4pe209bltrXTtpZihtPT1udWxsfHxhLmlzRnVuY3Rpb24obSl8fGsgaW4gb3x8L3Njcm9sbGJhci8udGVzdChrKXx8IS9jb2xvci9pLnRlc3QoaykmJmlzTmFOKHBhcnNlRmxvYXQobSkpKWRlbGV0ZSBuW2tdfXJldHVybiBufWZ1bmN0aW9uIGkobixrKXt2YXIgbT17XzowfSxwO2ZvcihwIGluIGspaWYobltwXSE9a1twXSltW3BdPWtbcF07cmV0dXJuIG19ZnVuY3Rpb24gYihuLGssbSxwKXtpZih0eXBlb2Ygbj09Im9iamVjdCIpe3A9Cms7bT1udWxsO2s9bjtuPWsuZWZmZWN0fWlmKGEuaXNGdW5jdGlvbihrKSl7cD1rO209bnVsbDtrPXt9fWlmKHR5cGVvZiBrPT0ibnVtYmVyInx8YS5meC5zcGVlZHNba10pe3A9bTttPWs7az17fX1pZihhLmlzRnVuY3Rpb24obSkpe3A9bTttPW51bGx9az1rfHx7fTttPW18fGsuZHVyYXRpb247bT1hLmZ4Lm9mZj8wOnR5cGVvZiBtPT0ibnVtYmVyIj9tOm0gaW4gYS5meC5zcGVlZHM/YS5meC5zcGVlZHNbbV06YS5meC5zcGVlZHMuX2RlZmF1bHQ7cD1wfHxrLmNvbXBsZXRlO3JldHVybltuLGssbSxwXX1mdW5jdGlvbiBoKG4pe2lmKCFufHx0eXBlb2Ygbj09PSJudW1iZXIifHxhLmZ4LnNwZWVkc1tuXSlyZXR1cm4gdHJ1ZTtpZih0eXBlb2Ygbj09PSJzdHJpbmciJiYhYS5lZmZlY3RzW25dKXJldHVybiB0cnVlO3JldHVybiBmYWxzZX1hLmVmZmVjdHM9e307YS5lYWNoKFsiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyQm90dG9tQ29sb3IiLCJib3JkZXJMZWZ0Q29sb3IiLCJib3JkZXJSaWdodENvbG9yIiwKImJvcmRlclRvcENvbG9yIiwiYm9yZGVyQ29sb3IiLCJjb2xvciIsIm91dGxpbmVDb2xvciJdLGZ1bmN0aW9uKG4sayl7YS5meC5zdGVwW2tdPWZ1bmN0aW9uKG0pe2lmKCFtLmNvbG9ySW5pdCl7bS5zdGFydD1mKG0uZWxlbSxrKTttLmVuZD1jKG0uZW5kKTttLmNvbG9ySW5pdD10cnVlfW0uZWxlbS5zdHlsZVtrXT0icmdiKCIrTWF0aC5tYXgoTWF0aC5taW4ocGFyc2VJbnQobS5wb3MqKG0uZW5kWzBdLW0uc3RhcnRbMF0pK20uc3RhcnRbMF0sMTApLDI1NSksMCkrIiwiK01hdGgubWF4KE1hdGgubWluKHBhcnNlSW50KG0ucG9zKihtLmVuZFsxXS1tLnN0YXJ0WzFdKSttLnN0YXJ0WzFdLDEwKSwyNTUpLDApKyIsIitNYXRoLm1heChNYXRoLm1pbihwYXJzZUludChtLnBvcyoobS5lbmRbMl0tbS5zdGFydFsyXSkrbS5zdGFydFsyXSwxMCksMjU1KSwwKSsiKSJ9fSk7dmFyIGo9e2FxdWE6WzAsMjU1LDI1NV0sYXp1cmU6WzI0MCwyNTUsMjU1XSxiZWlnZTpbMjQ1LDI0NSwyMjBdLGJsYWNrOlswLAowLDBdLGJsdWU6WzAsMCwyNTVdLGJyb3duOlsxNjUsNDIsNDJdLGN5YW46WzAsMjU1LDI1NV0sZGFya2JsdWU6WzAsMCwxMzldLGRhcmtjeWFuOlswLDEzOSwxMzldLGRhcmtncmV5OlsxNjksMTY5LDE2OV0sZGFya2dyZWVuOlswLDEwMCwwXSxkYXJra2hha2k6WzE4OSwxODMsMTA3XSxkYXJrbWFnZW50YTpbMTM5LDAsMTM5XSxkYXJrb2xpdmVncmVlbjpbODUsMTA3LDQ3XSxkYXJrb3JhbmdlOlsyNTUsMTQwLDBdLGRhcmtvcmNoaWQ6WzE1Myw1MCwyMDRdLGRhcmtyZWQ6WzEzOSwwLDBdLGRhcmtzYWxtb246WzIzMywxNTAsMTIyXSxkYXJrdmlvbGV0OlsxNDgsMCwyMTFdLGZ1Y2hzaWE6WzI1NSwwLDI1NV0sZ29sZDpbMjU1LDIxNSwwXSxncmVlbjpbMCwxMjgsMF0saW5kaWdvOls3NSwwLDEzMF0sa2hha2k6WzI0MCwyMzAsMTQwXSxsaWdodGJsdWU6WzE3MywyMTYsMjMwXSxsaWdodGN5YW46WzIyNCwyNTUsMjU1XSxsaWdodGdyZWVuOlsxNDQsMjM4LDE0NF0sbGlnaHRncmV5OlsyMTEsCjIxMSwyMTFdLGxpZ2h0cGluazpbMjU1LDE4MiwxOTNdLGxpZ2h0eWVsbG93OlsyNTUsMjU1LDIyNF0sbGltZTpbMCwyNTUsMF0sbWFnZW50YTpbMjU1LDAsMjU1XSxtYXJvb246WzEyOCwwLDBdLG5hdnk6WzAsMCwxMjhdLG9saXZlOlsxMjgsMTI4LDBdLG9yYW5nZTpbMjU1LDE2NSwwXSxwaW5rOlsyNTUsMTkyLDIwM10scHVycGxlOlsxMjgsMCwxMjhdLHZpb2xldDpbMTI4LDAsMTI4XSxyZWQ6WzI1NSwwLDBdLHNpbHZlcjpbMTkyLDE5MiwxOTJdLHdoaXRlOlsyNTUsMjU1LDI1NV0seWVsbG93OlsyNTUsMjU1LDBdLHRyYW5zcGFyZW50OlsyNTUsMjU1LDI1NV19LGw9WyJhZGQiLCJyZW1vdmUiLCJ0b2dnbGUiXSxvPXtib3JkZXI6MSxib3JkZXJCb3R0b206MSxib3JkZXJDb2xvcjoxLGJvcmRlckxlZnQ6MSxib3JkZXJSaWdodDoxLGJvcmRlclRvcDoxLGJvcmRlcldpZHRoOjEsbWFyZ2luOjEscGFkZGluZzoxfTthLmVmZmVjdHMuYW5pbWF0ZUNsYXNzPWZ1bmN0aW9uKG4sayxtLApwKXtpZihhLmlzRnVuY3Rpb24obSkpe3A9bTttPW51bGx9cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgcT1hKHRoaXMpLHM9cS5hdHRyKCJzdHlsZSIpfHwiICIscj1lKGcuY2FsbCh0aGlzKSksdSx2PXEuYXR0cigiY2xhc3MiKTthLmVhY2gobCxmdW5jdGlvbih3LHgpe25beF0mJnFbeCsiQ2xhc3MiXShuW3hdKX0pO3U9ZShnLmNhbGwodGhpcykpO3EuYXR0cigiY2xhc3MiLHYpO3EuYW5pbWF0ZShpKHIsdSkse3F1ZXVlOmZhbHNlLGR1cmF0aW9uOmssZWFzZGluZzptLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YS5lYWNoKGwsZnVuY3Rpb24odyx4KXtuW3hdJiZxW3grIkNsYXNzIl0oblt4XSl9KTtpZih0eXBlb2YgcS5hdHRyKCJzdHlsZSIpPT0ib2JqZWN0Iil7cS5hdHRyKCJzdHlsZSIpLmNzc1RleHQ9IiI7cS5hdHRyKCJzdHlsZSIpLmNzc1RleHQ9c31lbHNlIHEuYXR0cigic3R5bGUiLHMpO3AmJnAuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EuZGVxdWV1ZSh0aGlzKX19KX0pfTsKYS5mbi5leHRlbmQoe19hZGRDbGFzczphLmZuLmFkZENsYXNzLGFkZENsYXNzOmZ1bmN0aW9uKG4sayxtLHApe3JldHVybiBrP2EuZWZmZWN0cy5hbmltYXRlQ2xhc3MuYXBwbHkodGhpcyxbe2FkZDpufSxrLG0scF0pOnRoaXMuX2FkZENsYXNzKG4pfSxfcmVtb3ZlQ2xhc3M6YS5mbi5yZW1vdmVDbGFzcyxyZW1vdmVDbGFzczpmdW5jdGlvbihuLGssbSxwKXtyZXR1cm4gaz9hLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmFwcGx5KHRoaXMsW3tyZW1vdmU6bn0sayxtLHBdKTp0aGlzLl9yZW1vdmVDbGFzcyhuKX0sX3RvZ2dsZUNsYXNzOmEuZm4udG9nZ2xlQ2xhc3MsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24obixrLG0scCxxKXtyZXR1cm4gdHlwZW9mIGs9PSJib29sZWFuInx8az09PWQ/bT9hLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmFwcGx5KHRoaXMsW2s/e2FkZDpufTp7cmVtb3ZlOm59LG0scCxxXSk6dGhpcy5fdG9nZ2xlQ2xhc3MobixrKTphLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmFwcGx5KHRoaXMsClt7dG9nZ2xlOm59LGssbSxwXSl9LHN3aXRjaENsYXNzOmZ1bmN0aW9uKG4sayxtLHAscSl7cmV0dXJuIGEuZWZmZWN0cy5hbmltYXRlQ2xhc3MuYXBwbHkodGhpcyxbe2FkZDprLHJlbW92ZTpufSxtLHAscV0pfX0pO2EuZXh0ZW5kKGEuZWZmZWN0cyx7dmVyc2lvbjoiMS44LjEzIixzYXZlOmZ1bmN0aW9uKG4sayl7Zm9yKHZhciBtPTA7bTxrLmxlbmd0aDttKyspa1ttXSE9PW51bGwmJm4uZGF0YSgiZWMuc3RvcmFnZS4iK2tbbV0sblswXS5zdHlsZVtrW21dXSl9LHJlc3RvcmU6ZnVuY3Rpb24obixrKXtmb3IodmFyIG09MDttPGsubGVuZ3RoO20rKylrW21dIT09bnVsbCYmbi5jc3Moa1ttXSxuLmRhdGEoImVjLnN0b3JhZ2UuIitrW21dKSl9LHNldE1vZGU6ZnVuY3Rpb24obixrKXtpZihrPT0idG9nZ2xlIilrPW4uaXMoIjpoaWRkZW4iKT8ic2hvdyI6ImhpZGUiO3JldHVybiBrfSxnZXRCYXNlbGluZTpmdW5jdGlvbihuLGspe3ZhciBtO3N3aXRjaChuWzBdKXtjYXNlICJ0b3AiOm09CjA7YnJlYWs7Y2FzZSAibWlkZGxlIjptPTAuNTticmVhaztjYXNlICJib3R0b20iOm09MTticmVhaztkZWZhdWx0Om09blswXS9rLmhlaWdodH1zd2l0Y2goblsxXSl7Y2FzZSAibGVmdCI6bj0wO2JyZWFrO2Nhc2UgImNlbnRlciI6bj0wLjU7YnJlYWs7Y2FzZSAicmlnaHQiOm49MTticmVhaztkZWZhdWx0Om49blsxXS9rLndpZHRofXJldHVybnt4Om4seTptfX0sY3JlYXRlV3JhcHBlcjpmdW5jdGlvbihuKXtpZihuLnBhcmVudCgpLmlzKCIudWktZWZmZWN0cy13cmFwcGVyIikpcmV0dXJuIG4ucGFyZW50KCk7dmFyIGs9e3dpZHRoOm4ub3V0ZXJXaWR0aCh0cnVlKSxoZWlnaHQ6bi5vdXRlckhlaWdodCh0cnVlKSwiZmxvYXQiOm4uY3NzKCJmbG9hdCIpfSxtPWEoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoInVpLWVmZmVjdHMtd3JhcHBlciIpLmNzcyh7Zm9udFNpemU6IjEwMCUiLGJhY2tncm91bmQ6InRyYW5zcGFyZW50Iixib3JkZXI6Im5vbmUiLG1hcmdpbjowLHBhZGRpbmc6MH0pOwpuLndyYXAobSk7bT1uLnBhcmVudCgpO2lmKG4uY3NzKCJwb3NpdGlvbiIpPT0ic3RhdGljIil7bS5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSJ9KTtuLmNzcyh7cG9zaXRpb246InJlbGF0aXZlIn0pfWVsc2V7YS5leHRlbmQoayx7cG9zaXRpb246bi5jc3MoInBvc2l0aW9uIiksekluZGV4Om4uY3NzKCJ6LWluZGV4Iil9KTthLmVhY2goWyJ0b3AiLCJsZWZ0IiwiYm90dG9tIiwicmlnaHQiXSxmdW5jdGlvbihwLHEpe2tbcV09bi5jc3MocSk7aWYoaXNOYU4ocGFyc2VJbnQoa1txXSwxMCkpKWtbcV09ImF1dG8ifSk7bi5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSIsdG9wOjAsbGVmdDowLHJpZ2h0OiJhdXRvIixib3R0b206ImF1dG8ifSl9cmV0dXJuIG0uY3NzKGspLnNob3coKX0scmVtb3ZlV3JhcHBlcjpmdW5jdGlvbihuKXtpZihuLnBhcmVudCgpLmlzKCIudWktZWZmZWN0cy13cmFwcGVyIikpcmV0dXJuIG4ucGFyZW50KCkucmVwbGFjZVdpdGgobik7cmV0dXJuIG59LHNldFRyYW5zaXRpb246ZnVuY3Rpb24obiwKayxtLHApe3A9cHx8e307YS5lYWNoKGssZnVuY3Rpb24ocSxzKXt1bml0PW4uY3NzVW5pdChzKTtpZih1bml0WzBdPjApcFtzXT11bml0WzBdKm0rdW5pdFsxXX0pO3JldHVybiBwfX0pO2EuZm4uZXh0ZW5kKHtlZmZlY3Q6ZnVuY3Rpb24obil7dmFyIGs9Yi5hcHBseSh0aGlzLGFyZ3VtZW50cyksbT17b3B0aW9uczprWzFdLGR1cmF0aW9uOmtbMl0sY2FsbGJhY2s6a1szXX07az1tLm9wdGlvbnMubW9kZTt2YXIgcD1hLmVmZmVjdHNbbl07aWYoYS5meC5vZmZ8fCFwKXJldHVybiBrP3RoaXNba10obS5kdXJhdGlvbixtLmNhbGxiYWNrKTp0aGlzLmVhY2goZnVuY3Rpb24oKXttLmNhbGxiYWNrJiZtLmNhbGxiYWNrLmNhbGwodGhpcyl9KTtyZXR1cm4gcC5jYWxsKHRoaXMsbSl9LF9zaG93OmEuZm4uc2hvdyxzaG93OmZ1bmN0aW9uKG4pe2lmKGgobikpcmV0dXJuIHRoaXMuX3Nob3cuYXBwbHkodGhpcyxhcmd1bWVudHMpO2Vsc2V7dmFyIGs9Yi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7CmtbMV0ubW9kZT0ic2hvdyI7cmV0dXJuIHRoaXMuZWZmZWN0LmFwcGx5KHRoaXMsayl9fSxfaGlkZTphLmZuLmhpZGUsaGlkZTpmdW5jdGlvbihuKXtpZihoKG4pKXJldHVybiB0aGlzLl9oaWRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlbHNle3ZhciBrPWIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2tbMV0ubW9kZT0iaGlkZSI7cmV0dXJuIHRoaXMuZWZmZWN0LmFwcGx5KHRoaXMsayl9fSxfX3RvZ2dsZTphLmZuLnRvZ2dsZSx0b2dnbGU6ZnVuY3Rpb24obil7aWYoaChuKXx8dHlwZW9mIG49PT0iYm9vbGVhbiJ8fGEuaXNGdW5jdGlvbihuKSlyZXR1cm4gdGhpcy5fX3RvZ2dsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZWxzZXt2YXIgaz1iLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtrWzFdLm1vZGU9InRvZ2dsZSI7cmV0dXJuIHRoaXMuZWZmZWN0LmFwcGx5KHRoaXMsayl9fSxjc3NVbml0OmZ1bmN0aW9uKG4pe3ZhciBrPXRoaXMuY3NzKG4pLG09W107YS5lYWNoKFsiZW0iLCJweCIsIiUiLAoicHQiXSxmdW5jdGlvbihwLHEpe2lmKGsuaW5kZXhPZihxKT4wKW09W3BhcnNlRmxvYXQoaykscV19KTtyZXR1cm4gbX19KTthLmVhc2luZy5qc3dpbmc9YS5lYXNpbmcuc3dpbmc7YS5leHRlbmQoYS5lYXNpbmcse2RlZjoiZWFzZU91dFF1YWQiLHN3aW5nOmZ1bmN0aW9uKG4sayxtLHAscSl7cmV0dXJuIGEuZWFzaW5nW2EuZWFzaW5nLmRlZl0obixrLG0scCxxKX0sZWFzZUluUXVhZDpmdW5jdGlvbihuLGssbSxwLHEpe3JldHVybiBwKihrLz1xKSprK219LGVhc2VPdXRRdWFkOmZ1bmN0aW9uKG4sayxtLHAscSl7cmV0dXJuLXAqKGsvPXEpKihrLTIpK219LGVhc2VJbk91dFF1YWQ6ZnVuY3Rpb24obixrLG0scCxxKXtpZigoay89cS8yKTwxKXJldHVybiBwLzIqayprK207cmV0dXJuLXAvMiooLS1rKihrLTIpLTEpK219LGVhc2VJbkN1YmljOmZ1bmN0aW9uKG4sayxtLHAscSl7cmV0dXJuIHAqKGsvPXEpKmsqayttfSxlYXNlT3V0Q3ViaWM6ZnVuY3Rpb24obixrLG0scCxxKXtyZXR1cm4gcCoKKChrPWsvcS0xKSprKmsrMSkrbX0sZWFzZUluT3V0Q3ViaWM6ZnVuY3Rpb24obixrLG0scCxxKXtpZigoay89cS8yKTwxKXJldHVybiBwLzIqayprKmsrbTtyZXR1cm4gcC8yKigoay09MikqayprKzIpK219LGVhc2VJblF1YXJ0OmZ1bmN0aW9uKG4sayxtLHAscSl7cmV0dXJuIHAqKGsvPXEpKmsqayprK219LGVhc2VPdXRRdWFydDpmdW5jdGlvbihuLGssbSxwLHEpe3JldHVybi1wKigoaz1rL3EtMSkqayprKmstMSkrbX0sZWFzZUluT3V0UXVhcnQ6ZnVuY3Rpb24obixrLG0scCxxKXtpZigoay89cS8yKTwxKXJldHVybiBwLzIqayprKmsqayttO3JldHVybi1wLzIqKChrLT0yKSprKmsqay0yKSttfSxlYXNlSW5RdWludDpmdW5jdGlvbihuLGssbSxwLHEpe3JldHVybiBwKihrLz1xKSprKmsqayprK219LGVhc2VPdXRRdWludDpmdW5jdGlvbihuLGssbSxwLHEpe3JldHVybiBwKigoaz1rL3EtMSkqayprKmsqaysxKSttfSxlYXNlSW5PdXRRdWludDpmdW5jdGlvbihuLGssbSxwLHEpe2lmKChrLz0KcS8yKTwxKXJldHVybiBwLzIqayprKmsqayprK207cmV0dXJuIHAvMiooKGstPTIpKmsqayprKmsrMikrbX0sZWFzZUluU2luZTpmdW5jdGlvbihuLGssbSxwLHEpe3JldHVybi1wKk1hdGguY29zKGsvcSooTWF0aC5QSS8yKSkrcCttfSxlYXNlT3V0U2luZTpmdW5jdGlvbihuLGssbSxwLHEpe3JldHVybiBwKk1hdGguc2luKGsvcSooTWF0aC5QSS8yKSkrbX0sZWFzZUluT3V0U2luZTpmdW5jdGlvbihuLGssbSxwLHEpe3JldHVybi1wLzIqKE1hdGguY29zKE1hdGguUEkqay9xKS0xKSttfSxlYXNlSW5FeHBvOmZ1bmN0aW9uKG4sayxtLHAscSl7cmV0dXJuIGs9PTA/bTpwKk1hdGgucG93KDIsMTAqKGsvcS0xKSkrbX0sZWFzZU91dEV4cG86ZnVuY3Rpb24obixrLG0scCxxKXtyZXR1cm4gaz09cT9tK3A6cCooLU1hdGgucG93KDIsLTEwKmsvcSkrMSkrbX0sZWFzZUluT3V0RXhwbzpmdW5jdGlvbihuLGssbSxwLHEpe2lmKGs9PTApcmV0dXJuIG07aWYoaz09cSlyZXR1cm4gbStwO2lmKChrLz0KcS8yKTwxKXJldHVybiBwLzIqTWF0aC5wb3coMiwxMCooay0xKSkrbTtyZXR1cm4gcC8yKigtTWF0aC5wb3coMiwtMTAqLS1rKSsyKSttfSxlYXNlSW5DaXJjOmZ1bmN0aW9uKG4sayxtLHAscSl7cmV0dXJuLXAqKE1hdGguc3FydCgxLShrLz1xKSprKS0xKSttfSxlYXNlT3V0Q2lyYzpmdW5jdGlvbihuLGssbSxwLHEpe3JldHVybiBwKk1hdGguc3FydCgxLShrPWsvcS0xKSprKSttfSxlYXNlSW5PdXRDaXJjOmZ1bmN0aW9uKG4sayxtLHAscSl7aWYoKGsvPXEvMik8MSlyZXR1cm4tcC8yKihNYXRoLnNxcnQoMS1rKmspLTEpK207cmV0dXJuIHAvMiooTWF0aC5zcXJ0KDEtKGstPTIpKmspKzEpK219LGVhc2VJbkVsYXN0aWM6ZnVuY3Rpb24obixrLG0scCxxKXtuPTEuNzAxNTg7dmFyIHM9MCxyPXA7aWYoaz09MClyZXR1cm4gbTtpZigoay89cSk9PTEpcmV0dXJuIG0rcDtzfHwocz1xKjAuMyk7aWYocjxNYXRoLmFicyhwKSl7cj1wO249cy80fWVsc2Ugbj1zLygyKk1hdGguUEkpKk1hdGguYXNpbihwLwpyKTtyZXR1cm4tKHIqTWF0aC5wb3coMiwxMCooay09MSkpKk1hdGguc2luKChrKnEtbikqMipNYXRoLlBJL3MpKSttfSxlYXNlT3V0RWxhc3RpYzpmdW5jdGlvbihuLGssbSxwLHEpe249MS43MDE1ODt2YXIgcz0wLHI9cDtpZihrPT0wKXJldHVybiBtO2lmKChrLz1xKT09MSlyZXR1cm4gbStwO3N8fChzPXEqMC4zKTtpZihyPE1hdGguYWJzKHApKXtyPXA7bj1zLzR9ZWxzZSBuPXMvKDIqTWF0aC5QSSkqTWF0aC5hc2luKHAvcik7cmV0dXJuIHIqTWF0aC5wb3coMiwtMTAqaykqTWF0aC5zaW4oKGsqcS1uKSoyKk1hdGguUEkvcykrcCttfSxlYXNlSW5PdXRFbGFzdGljOmZ1bmN0aW9uKG4sayxtLHAscSl7bj0xLjcwMTU4O3ZhciBzPTAscj1wO2lmKGs9PTApcmV0dXJuIG07aWYoKGsvPXEvMik9PTIpcmV0dXJuIG0rcDtzfHwocz1xKjAuMyoxLjUpO2lmKHI8TWF0aC5hYnMocCkpe3I9cDtuPXMvNH1lbHNlIG49cy8oMipNYXRoLlBJKSpNYXRoLmFzaW4ocC9yKTtpZihrPDEpcmV0dXJuLTAuNSoKcipNYXRoLnBvdygyLDEwKihrLT0xKSkqTWF0aC5zaW4oKGsqcS1uKSoyKk1hdGguUEkvcykrbTtyZXR1cm4gcipNYXRoLnBvdygyLC0xMCooay09MSkpKk1hdGguc2luKChrKnEtbikqMipNYXRoLlBJL3MpKjAuNStwK219LGVhc2VJbkJhY2s6ZnVuY3Rpb24obixrLG0scCxxLHMpe2lmKHM9PWQpcz0xLjcwMTU4O3JldHVybiBwKihrLz1xKSprKigocysxKSprLXMpK219LGVhc2VPdXRCYWNrOmZ1bmN0aW9uKG4sayxtLHAscSxzKXtpZihzPT1kKXM9MS43MDE1ODtyZXR1cm4gcCooKGs9ay9xLTEpKmsqKChzKzEpKmsrcykrMSkrbX0sZWFzZUluT3V0QmFjazpmdW5jdGlvbihuLGssbSxwLHEscyl7aWYocz09ZClzPTEuNzAxNTg7aWYoKGsvPXEvMik8MSlyZXR1cm4gcC8yKmsqayooKChzKj0xLjUyNSkrMSkqay1zKSttO3JldHVybiBwLzIqKChrLT0yKSprKigoKHMqPTEuNTI1KSsxKSprK3MpKzIpK219LGVhc2VJbkJvdW5jZTpmdW5jdGlvbihuLGssbSxwLHEpe3JldHVybiBwLWEuZWFzaW5nLmVhc2VPdXRCb3VuY2UobiwKcS1rLDAscCxxKSttfSxlYXNlT3V0Qm91bmNlOmZ1bmN0aW9uKG4sayxtLHAscSl7cmV0dXJuKGsvPXEpPDEvMi43NT9wKjcuNTYyNSprKmsrbTprPDIvMi43NT9wKig3LjU2MjUqKGstPTEuNS8yLjc1KSprKzAuNzUpK206azwyLjUvMi43NT9wKig3LjU2MjUqKGstPTIuMjUvMi43NSkqayswLjkzNzUpK206cCooNy41NjI1KihrLT0yLjYyNS8yLjc1KSprKzAuOTg0Mzc1KSttfSxlYXNlSW5PdXRCb3VuY2U6ZnVuY3Rpb24obixrLG0scCxxKXtpZihrPHEvMilyZXR1cm4gYS5lYXNpbmcuZWFzZUluQm91bmNlKG4sayoyLDAscCxxKSowLjUrbTtyZXR1cm4gYS5lYXNpbmcuZWFzZU91dEJvdW5jZShuLGsqMi1xLDAscCxxKSowLjUrcCowLjUrbX19KX0oalF1ZXJ5KTsKKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5ibGluZD1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5xdWV1ZShmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZj1bInBvc2l0aW9uIiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0Il0sZz1hLmVmZmVjdHMuc2V0TW9kZShjLGQub3B0aW9ucy5tb2RlfHwiaGlkZSIpLGU9ZC5vcHRpb25zLmRpcmVjdGlvbnx8InZlcnRpY2FsIjthLmVmZmVjdHMuc2F2ZShjLGYpO2Muc2hvdygpO3ZhciBpPWEuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKGMpLmNzcyh7b3ZlcmZsb3c6ImhpZGRlbiJ9KSxiPWU9PSJ2ZXJ0aWNhbCI/ImhlaWdodCI6IndpZHRoIjtlPWU9PSJ2ZXJ0aWNhbCI/aS5oZWlnaHQoKTppLndpZHRoKCk7Zz09InNob3ciJiZpLmNzcyhiLDApO3ZhciBoPXt9O2hbYl09Zz09InNob3ciP2U6MDtpLmFuaW1hdGUoaCxkLmR1cmF0aW9uLGQub3B0aW9ucy5lYXNpbmcsZnVuY3Rpb24oKXtnPT0iaGlkZSImJmMuaGlkZSgpO2EuZWZmZWN0cy5yZXN0b3JlKGMsCmYpO2EuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKGMpO2QuY2FsbGJhY2smJmQuY2FsbGJhY2suYXBwbHkoY1swXSxhcmd1bWVudHMpO2MuZGVxdWV1ZSgpfSl9KX19KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLmJvdW5jZT1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5xdWV1ZShmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZj1bInBvc2l0aW9uIiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0Il0sZz1hLmVmZmVjdHMuc2V0TW9kZShjLGQub3B0aW9ucy5tb2RlfHwiZWZmZWN0IiksZT1kLm9wdGlvbnMuZGlyZWN0aW9ufHwidXAiLGk9ZC5vcHRpb25zLmRpc3RhbmNlfHwyMCxiPWQub3B0aW9ucy50aW1lc3x8NSxoPWQuZHVyYXRpb258fDI1MDsvc2hvd3xoaWRlLy50ZXN0KGcpJiZmLnB1c2goIm9wYWNpdHkiKTthLmVmZmVjdHMuc2F2ZShjLGYpO2Muc2hvdygpO2EuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKGMpO3ZhciBqPWU9PSJ1cCJ8fGU9PSJkb3duIj8idG9wIjoibGVmdCI7ZT1lPT0idXAifHxlPT0ibGVmdCI/InBvcyI6Im5lZyI7aT1kLm9wdGlvbnMuZGlzdGFuY2V8fChqPT0idG9wIj9jLm91dGVySGVpZ2h0KHttYXJnaW46dHJ1ZX0pLzM6Yy5vdXRlcldpZHRoKHttYXJnaW46dHJ1ZX0pLwozKTtpZihnPT0ic2hvdyIpYy5jc3MoIm9wYWNpdHkiLDApLmNzcyhqLGU9PSJwb3MiPy1pOmkpO2lmKGc9PSJoaWRlIilpLz1iKjI7ZyE9ImhpZGUiJiZiLS07aWYoZz09InNob3ciKXt2YXIgbD17b3BhY2l0eToxfTtsW2pdPShlPT0icG9zIj8iKz0iOiItPSIpK2k7Yy5hbmltYXRlKGwsaC8yLGQub3B0aW9ucy5lYXNpbmcpO2kvPTI7Yi0tfWZvcihsPTA7bDxiO2wrKyl7dmFyIG89e30sbj17fTtvW2pdPShlPT0icG9zIj8iLT0iOiIrPSIpK2k7bltqXT0oZT09InBvcyI/Iis9IjoiLT0iKStpO2MuYW5pbWF0ZShvLGgvMixkLm9wdGlvbnMuZWFzaW5nKS5hbmltYXRlKG4saC8yLGQub3B0aW9ucy5lYXNpbmcpO2k9Zz09ImhpZGUiP2kqMjppLzJ9aWYoZz09ImhpZGUiKXtsPXtvcGFjaXR5OjB9O2xbal09KGU9PSJwb3MiPyItPSI6Iis9IikraTtjLmFuaW1hdGUobCxoLzIsZC5vcHRpb25zLmVhc2luZyxmdW5jdGlvbigpe2MuaGlkZSgpO2EuZWZmZWN0cy5yZXN0b3JlKGMsZik7YS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoYyk7CmQuY2FsbGJhY2smJmQuY2FsbGJhY2suYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9ZWxzZXtvPXt9O249e307b1tqXT0oZT09InBvcyI/Ii09IjoiKz0iKStpO25bal09KGU9PSJwb3MiPyIrPSI6Ii09IikraTtjLmFuaW1hdGUobyxoLzIsZC5vcHRpb25zLmVhc2luZykuYW5pbWF0ZShuLGgvMixkLm9wdGlvbnMuZWFzaW5nLGZ1bmN0aW9uKCl7YS5lZmZlY3RzLnJlc3RvcmUoYyxmKTthLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihjKTtkLmNhbGxiYWNrJiZkLmNhbGxiYWNrLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfWMucXVldWUoImZ4IixmdW5jdGlvbigpe2MuZGVxdWV1ZSgpfSk7Yy5kZXF1ZXVlKCl9KX19KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLmNsaXA9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGY9WyJwb3NpdGlvbiIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsImhlaWdodCIsIndpZHRoIl0sZz1hLmVmZmVjdHMuc2V0TW9kZShjLGQub3B0aW9ucy5tb2RlfHwiaGlkZSIpLGU9ZC5vcHRpb25zLmRpcmVjdGlvbnx8InZlcnRpY2FsIjthLmVmZmVjdHMuc2F2ZShjLGYpO2Muc2hvdygpO3ZhciBpPWEuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKGMpLmNzcyh7b3ZlcmZsb3c6ImhpZGRlbiJ9KTtpPWNbMF0udGFnTmFtZT09IklNRyI/aTpjO3ZhciBiPXtzaXplOmU9PSJ2ZXJ0aWNhbCI/ImhlaWdodCI6IndpZHRoIixwb3NpdGlvbjplPT0idmVydGljYWwiPyJ0b3AiOiJsZWZ0In07ZT1lPT0idmVydGljYWwiP2kuaGVpZ2h0KCk6aS53aWR0aCgpO2lmKGc9PSJzaG93Iil7aS5jc3MoYi5zaXplLDApO2kuY3NzKGIucG9zaXRpb24sCmUvMil9dmFyIGg9e307aFtiLnNpemVdPWc9PSJzaG93Ij9lOjA7aFtiLnBvc2l0aW9uXT1nPT0ic2hvdyI/MDplLzI7aS5hbmltYXRlKGgse3F1ZXVlOmZhbHNlLGR1cmF0aW9uOmQuZHVyYXRpb24sZWFzaW5nOmQub3B0aW9ucy5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtnPT0iaGlkZSImJmMuaGlkZSgpO2EuZWZmZWN0cy5yZXN0b3JlKGMsZik7YS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoYyk7ZC5jYWxsYmFjayYmZC5jYWxsYmFjay5hcHBseShjWzBdLGFyZ3VtZW50cyk7Yy5kZXF1ZXVlKCl9fSl9KX19KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLmRyb3A9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGY9WyJwb3NpdGlvbiIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsIm9wYWNpdHkiXSxnPWEuZWZmZWN0cy5zZXRNb2RlKGMsZC5vcHRpb25zLm1vZGV8fCJoaWRlIiksZT1kLm9wdGlvbnMuZGlyZWN0aW9ufHwibGVmdCI7YS5lZmZlY3RzLnNhdmUoYyxmKTtjLnNob3coKTthLmVmZmVjdHMuY3JlYXRlV3JhcHBlcihjKTt2YXIgaT1lPT0idXAifHxlPT0iZG93biI/InRvcCI6ImxlZnQiO2U9ZT09InVwInx8ZT09ImxlZnQiPyJwb3MiOiJuZWciO3ZhciBiPWQub3B0aW9ucy5kaXN0YW5jZXx8KGk9PSJ0b3AiP2Mub3V0ZXJIZWlnaHQoe21hcmdpbjp0cnVlfSkvMjpjLm91dGVyV2lkdGgoe21hcmdpbjp0cnVlfSkvMik7aWYoZz09InNob3ciKWMuY3NzKCJvcGFjaXR5IiwwKS5jc3MoaSxlPT0icG9zIj8tYjpiKTt2YXIgaD17b3BhY2l0eTpnPT0KInNob3ciPzE6MH07aFtpXT0oZz09InNob3ciP2U9PSJwb3MiPyIrPSI6Ii09IjplPT0icG9zIj8iLT0iOiIrPSIpK2I7Yy5hbmltYXRlKGgse3F1ZXVlOmZhbHNlLGR1cmF0aW9uOmQuZHVyYXRpb24sZWFzaW5nOmQub3B0aW9ucy5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtnPT0iaGlkZSImJmMuaGlkZSgpO2EuZWZmZWN0cy5yZXN0b3JlKGMsZik7YS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoYyk7ZC5jYWxsYmFjayYmZC5jYWxsYmFjay5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Yy5kZXF1ZXVlKCl9fSl9KX19KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLmV4cGxvZGU9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgYz1kLm9wdGlvbnMucGllY2VzP01hdGgucm91bmQoTWF0aC5zcXJ0KGQub3B0aW9ucy5waWVjZXMpKTozLGY9ZC5vcHRpb25zLnBpZWNlcz9NYXRoLnJvdW5kKE1hdGguc3FydChkLm9wdGlvbnMucGllY2VzKSk6MztkLm9wdGlvbnMubW9kZT1kLm9wdGlvbnMubW9kZT09InRvZ2dsZSI/YSh0aGlzKS5pcygiOnZpc2libGUiKT8iaGlkZSI6InNob3ciOmQub3B0aW9ucy5tb2RlO3ZhciBnPWEodGhpcykuc2hvdygpLmNzcygidmlzaWJpbGl0eSIsImhpZGRlbiIpLGU9Zy5vZmZzZXQoKTtlLnRvcC09cGFyc2VJbnQoZy5jc3MoIm1hcmdpblRvcCIpLDEwKXx8MDtlLmxlZnQtPXBhcnNlSW50KGcuY3NzKCJtYXJnaW5MZWZ0IiksMTApfHwwO2Zvcih2YXIgaT1nLm91dGVyV2lkdGgodHJ1ZSksYj1nLm91dGVySGVpZ2h0KHRydWUpLGg9MDtoPGM7aCsrKWZvcih2YXIgaj0KMDtqPGY7aisrKWcuY2xvbmUoKS5hcHBlbmRUbygiYm9keSIpLndyYXAoIjxkaXY+PC9kaXY+IikuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6InZpc2libGUiLGxlZnQ6LWoqKGkvZiksdG9wOi1oKihiL2MpfSkucGFyZW50KCkuYWRkQ2xhc3MoInVpLWVmZmVjdHMtZXhwbG9kZSIpLmNzcyh7cG9zaXRpb246ImFic29sdXRlIixvdmVyZmxvdzoiaGlkZGVuIix3aWR0aDppL2YsaGVpZ2h0OmIvYyxsZWZ0OmUubGVmdCtqKihpL2YpKyhkLm9wdGlvbnMubW9kZT09InNob3ciPyhqLU1hdGguZmxvb3IoZi8yKSkqKGkvZik6MCksdG9wOmUudG9wK2gqKGIvYykrKGQub3B0aW9ucy5tb2RlPT0ic2hvdyI/KGgtTWF0aC5mbG9vcihjLzIpKSooYi9jKTowKSxvcGFjaXR5OmQub3B0aW9ucy5tb2RlPT0ic2hvdyI/MDoxfSkuYW5pbWF0ZSh7bGVmdDplLmxlZnQraiooaS9mKSsoZC5vcHRpb25zLm1vZGU9PSJzaG93Ij8wOihqLU1hdGguZmxvb3IoZi8yKSkqKGkvZikpLHRvcDplLnRvcCsKaCooYi9jKSsoZC5vcHRpb25zLm1vZGU9PSJzaG93Ij8wOihoLU1hdGguZmxvb3IoYy8yKSkqKGIvYykpLG9wYWNpdHk6ZC5vcHRpb25zLm1vZGU9PSJzaG93Ij8xOjB9LGQuZHVyYXRpb258fDUwMCk7c2V0VGltZW91dChmdW5jdGlvbigpe2Qub3B0aW9ucy5tb2RlPT0ic2hvdyI/Zy5jc3Moe3Zpc2liaWxpdHk6InZpc2libGUifSk6Zy5jc3Moe3Zpc2liaWxpdHk6InZpc2libGUifSkuaGlkZSgpO2QuY2FsbGJhY2smJmQuY2FsbGJhY2suYXBwbHkoZ1swXSk7Zy5kZXF1ZXVlKCk7YSgiZGl2LnVpLWVmZmVjdHMtZXhwbG9kZSIpLnJlbW92ZSgpfSxkLmR1cmF0aW9ufHw1MDApfSl9fSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5mYWRlPWZ1bmN0aW9uKGQpe3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxmPWEuZWZmZWN0cy5zZXRNb2RlKGMsZC5vcHRpb25zLm1vZGV8fCJoaWRlIik7Yy5hbmltYXRlKHtvcGFjaXR5OmZ9LHtxdWV1ZTpmYWxzZSxkdXJhdGlvbjpkLmR1cmF0aW9uLGVhc2luZzpkLm9wdGlvbnMuZWFzaW5nLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZC5jYWxsYmFjayYmZC5jYWxsYmFjay5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Yy5kZXF1ZXVlKCl9fSl9KX19KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLmZvbGQ9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGY9WyJwb3NpdGlvbiIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCJdLGc9YS5lZmZlY3RzLnNldE1vZGUoYyxkLm9wdGlvbnMubW9kZXx8ImhpZGUiKSxlPWQub3B0aW9ucy5zaXplfHwxNSxpPSEhZC5vcHRpb25zLmhvcml6Rmlyc3QsYj1kLmR1cmF0aW9uP2QuZHVyYXRpb24vMjphLmZ4LnNwZWVkcy5fZGVmYXVsdC8yO2EuZWZmZWN0cy5zYXZlKGMsZik7Yy5zaG93KCk7dmFyIGg9YS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoYykuY3NzKHtvdmVyZmxvdzoiaGlkZGVuIn0pLGo9Zz09InNob3ciIT1pLGw9aj9bIndpZHRoIiwiaGVpZ2h0Il06WyJoZWlnaHQiLCJ3aWR0aCJdO2o9aj9baC53aWR0aCgpLGguaGVpZ2h0KCldOltoLmhlaWdodCgpLGgud2lkdGgoKV07dmFyIG89LyhbMC05XSspJS8uZXhlYyhlKTtpZihvKWU9cGFyc2VJbnQob1sxXSwKMTApLzEwMCpqW2c9PSJoaWRlIj8wOjFdO2lmKGc9PSJzaG93IiloLmNzcyhpP3toZWlnaHQ6MCx3aWR0aDplfTp7aGVpZ2h0OmUsd2lkdGg6MH0pO2k9e307bz17fTtpW2xbMF1dPWc9PSJzaG93Ij9qWzBdOmU7b1tsWzFdXT1nPT0ic2hvdyI/alsxXTowO2guYW5pbWF0ZShpLGIsZC5vcHRpb25zLmVhc2luZykuYW5pbWF0ZShvLGIsZC5vcHRpb25zLmVhc2luZyxmdW5jdGlvbigpe2c9PSJoaWRlIiYmYy5oaWRlKCk7YS5lZmZlY3RzLnJlc3RvcmUoYyxmKTthLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihjKTtkLmNhbGxiYWNrJiZkLmNhbGxiYWNrLmFwcGx5KGNbMF0sYXJndW1lbnRzKTtjLmRlcXVldWUoKX0pfSl9fSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5oaWdobGlnaHQ9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGY9WyJiYWNrZ3JvdW5kSW1hZ2UiLCJiYWNrZ3JvdW5kQ29sb3IiLCJvcGFjaXR5Il0sZz1hLmVmZmVjdHMuc2V0TW9kZShjLGQub3B0aW9ucy5tb2RlfHwic2hvdyIpLGU9e2JhY2tncm91bmRDb2xvcjpjLmNzcygiYmFja2dyb3VuZENvbG9yIil9O2lmKGc9PSJoaWRlIillLm9wYWNpdHk9MDthLmVmZmVjdHMuc2F2ZShjLGYpO2Muc2hvdygpLmNzcyh7YmFja2dyb3VuZEltYWdlOiJub25lIixiYWNrZ3JvdW5kQ29sb3I6ZC5vcHRpb25zLmNvbG9yfHwiI2ZmZmY5OSJ9KS5hbmltYXRlKGUse3F1ZXVlOmZhbHNlLGR1cmF0aW9uOmQuZHVyYXRpb24sZWFzaW5nOmQub3B0aW9ucy5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtnPT0iaGlkZSImJmMuaGlkZSgpO2EuZWZmZWN0cy5yZXN0b3JlKGMsZik7Zz09InNob3ciJiYhYS5zdXBwb3J0Lm9wYWNpdHkmJgp0aGlzLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgiZmlsdGVyIik7ZC5jYWxsYmFjayYmZC5jYWxsYmFjay5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Yy5kZXF1ZXVlKCl9fSl9KX19KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLnB1bHNhdGU9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGY9YS5lZmZlY3RzLnNldE1vZGUoYyxkLm9wdGlvbnMubW9kZXx8InNob3ciKTt0aW1lcz0oZC5vcHRpb25zLnRpbWVzfHw1KSoyLTE7ZHVyYXRpb249ZC5kdXJhdGlvbj9kLmR1cmF0aW9uLzI6YS5meC5zcGVlZHMuX2RlZmF1bHQvMjtpc1Zpc2libGU9Yy5pcygiOnZpc2libGUiKTthbmltYXRlVG89MDtpZighaXNWaXNpYmxlKXtjLmNzcygib3BhY2l0eSIsMCkuc2hvdygpO2FuaW1hdGVUbz0xfWlmKGY9PSJoaWRlIiYmaXNWaXNpYmxlfHxmPT0ic2hvdyImJiFpc1Zpc2libGUpdGltZXMtLTtmb3IoZj0wO2Y8dGltZXM7ZisrKXtjLmFuaW1hdGUoe29wYWNpdHk6YW5pbWF0ZVRvfSxkdXJhdGlvbixkLm9wdGlvbnMuZWFzaW5nKTthbmltYXRlVG89KGFuaW1hdGVUbysxKSUyfWMuYW5pbWF0ZSh7b3BhY2l0eTphbmltYXRlVG99LGR1cmF0aW9uLApkLm9wdGlvbnMuZWFzaW5nLGZ1bmN0aW9uKCl7YW5pbWF0ZVRvPT0wJiZjLmhpZGUoKTtkLmNhbGxiYWNrJiZkLmNhbGxiYWNrLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO2MucXVldWUoImZ4IixmdW5jdGlvbigpe2MuZGVxdWV1ZSgpfSkuZGVxdWV1ZSgpfSl9fSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5wdWZmPWZ1bmN0aW9uKGQpe3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxmPWEuZWZmZWN0cy5zZXRNb2RlKGMsZC5vcHRpb25zLm1vZGV8fCJoaWRlIiksZz1wYXJzZUludChkLm9wdGlvbnMucGVyY2VudCwxMCl8fDE1MCxlPWcvMTAwLGk9e2hlaWdodDpjLmhlaWdodCgpLHdpZHRoOmMud2lkdGgoKX07YS5leHRlbmQoZC5vcHRpb25zLHtmYWRlOnRydWUsbW9kZTpmLHBlcmNlbnQ6Zj09ImhpZGUiP2c6MTAwLGZyb206Zj09ImhpZGUiP2k6e2hlaWdodDppLmhlaWdodCplLHdpZHRoOmkud2lkdGgqZX19KTtjLmVmZmVjdCgic2NhbGUiLGQub3B0aW9ucyxkLmR1cmF0aW9uLGQuY2FsbGJhY2spO2MuZGVxdWV1ZSgpfSl9O2EuZWZmZWN0cy5zY2FsZT1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5xdWV1ZShmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZj1hLmV4dGVuZCh0cnVlLHt9LGQub3B0aW9ucyksZz1hLmVmZmVjdHMuc2V0TW9kZShjLApkLm9wdGlvbnMubW9kZXx8ImVmZmVjdCIpLGU9cGFyc2VJbnQoZC5vcHRpb25zLnBlcmNlbnQsMTApfHwocGFyc2VJbnQoZC5vcHRpb25zLnBlcmNlbnQsMTApPT0wPzA6Zz09ImhpZGUiPzA6MTAwKSxpPWQub3B0aW9ucy5kaXJlY3Rpb258fCJib3RoIixiPWQub3B0aW9ucy5vcmlnaW47aWYoZyE9ImVmZmVjdCIpe2Yub3JpZ2luPWJ8fFsibWlkZGxlIiwiY2VudGVyIl07Zi5yZXN0b3JlPXRydWV9Yj17aGVpZ2h0OmMuaGVpZ2h0KCksd2lkdGg6Yy53aWR0aCgpfTtjLmZyb209ZC5vcHRpb25zLmZyb218fChnPT0ic2hvdyI/e2hlaWdodDowLHdpZHRoOjB9OmIpO2U9e3k6aSE9Imhvcml6b250YWwiP2UvMTAwOjEseDppIT0idmVydGljYWwiP2UvMTAwOjF9O2MudG89e2hlaWdodDpiLmhlaWdodCplLnksd2lkdGg6Yi53aWR0aCplLnh9O2lmKGQub3B0aW9ucy5mYWRlKXtpZihnPT0ic2hvdyIpe2MuZnJvbS5vcGFjaXR5PTA7Yy50by5vcGFjaXR5PTF9aWYoZz09ImhpZGUiKXtjLmZyb20ub3BhY2l0eT0KMTtjLnRvLm9wYWNpdHk9MH19Zi5mcm9tPWMuZnJvbTtmLnRvPWMudG87Zi5tb2RlPWc7Yy5lZmZlY3QoInNpemUiLGYsZC5kdXJhdGlvbixkLmNhbGxiYWNrKTtjLmRlcXVldWUoKX0pfTthLmVmZmVjdHMuc2l6ZT1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5xdWV1ZShmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZj1bInBvc2l0aW9uIiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0Iiwid2lkdGgiLCJoZWlnaHQiLCJvdmVyZmxvdyIsIm9wYWNpdHkiXSxnPVsicG9zaXRpb24iLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJvdmVyZmxvdyIsIm9wYWNpdHkiXSxlPVsid2lkdGgiLCJoZWlnaHQiLCJvdmVyZmxvdyJdLGk9WyJmb250U2l6ZSJdLGI9WyJib3JkZXJUb3BXaWR0aCIsImJvcmRlckJvdHRvbVdpZHRoIiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iXSxoPVsiYm9yZGVyTGVmdFdpZHRoIiwiYm9yZGVyUmlnaHRXaWR0aCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0Il0sCmo9YS5lZmZlY3RzLnNldE1vZGUoYyxkLm9wdGlvbnMubW9kZXx8ImVmZmVjdCIpLGw9ZC5vcHRpb25zLnJlc3RvcmV8fGZhbHNlLG89ZC5vcHRpb25zLnNjYWxlfHwiYm90aCIsbj1kLm9wdGlvbnMub3JpZ2luLGs9e2hlaWdodDpjLmhlaWdodCgpLHdpZHRoOmMud2lkdGgoKX07Yy5mcm9tPWQub3B0aW9ucy5mcm9tfHxrO2MudG89ZC5vcHRpb25zLnRvfHxrO2lmKG4pe249YS5lZmZlY3RzLmdldEJhc2VsaW5lKG4sayk7Yy5mcm9tLnRvcD0oay5oZWlnaHQtYy5mcm9tLmhlaWdodCkqbi55O2MuZnJvbS5sZWZ0PShrLndpZHRoLWMuZnJvbS53aWR0aCkqbi54O2MudG8udG9wPShrLmhlaWdodC1jLnRvLmhlaWdodCkqbi55O2MudG8ubGVmdD0oay53aWR0aC1jLnRvLndpZHRoKSpuLnh9dmFyIG09e2Zyb206e3k6Yy5mcm9tLmhlaWdodC9rLmhlaWdodCx4OmMuZnJvbS53aWR0aC9rLndpZHRofSx0bzp7eTpjLnRvLmhlaWdodC9rLmhlaWdodCx4OmMudG8ud2lkdGgvay53aWR0aH19OwppZihvPT0iYm94Inx8bz09ImJvdGgiKXtpZihtLmZyb20ueSE9bS50by55KXtmPWYuY29uY2F0KGIpO2MuZnJvbT1hLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihjLGIsbS5mcm9tLnksYy5mcm9tKTtjLnRvPWEuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGMsYixtLnRvLnksYy50byl9aWYobS5mcm9tLnghPW0udG8ueCl7Zj1mLmNvbmNhdChoKTtjLmZyb209YS5lZmZlY3RzLnNldFRyYW5zaXRpb24oYyxoLG0uZnJvbS54LGMuZnJvbSk7Yy50bz1hLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihjLGgsbS50by54LGMudG8pfX1pZihvPT0iY29udGVudCJ8fG89PSJib3RoIilpZihtLmZyb20ueSE9bS50by55KXtmPWYuY29uY2F0KGkpO2MuZnJvbT1hLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihjLGksbS5mcm9tLnksYy5mcm9tKTtjLnRvPWEuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGMsaSxtLnRvLnksYy50byl9YS5lZmZlY3RzLnNhdmUoYyxsP2Y6Zyk7Yy5zaG93KCk7YS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoYyk7CmMuY3NzKCJvdmVyZmxvdyIsImhpZGRlbiIpLmNzcyhjLmZyb20pO2lmKG89PSJjb250ZW50Inx8bz09ImJvdGgiKXtiPWIuY29uY2F0KFsibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIl0pLmNvbmNhdChpKTtoPWguY29uY2F0KFsibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0Il0pO2U9Zi5jb25jYXQoYikuY29uY2F0KGgpO2MuZmluZCgiKlt3aWR0aF0iKS5lYWNoKGZ1bmN0aW9uKCl7Y2hpbGQ9YSh0aGlzKTtsJiZhLmVmZmVjdHMuc2F2ZShjaGlsZCxlKTt2YXIgcD17aGVpZ2h0OmNoaWxkLmhlaWdodCgpLHdpZHRoOmNoaWxkLndpZHRoKCl9O2NoaWxkLmZyb209e2hlaWdodDpwLmhlaWdodCptLmZyb20ueSx3aWR0aDpwLndpZHRoKm0uZnJvbS54fTtjaGlsZC50bz17aGVpZ2h0OnAuaGVpZ2h0Km0udG8ueSx3aWR0aDpwLndpZHRoKm0udG8ueH07aWYobS5mcm9tLnkhPW0udG8ueSl7Y2hpbGQuZnJvbT1hLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihjaGlsZCxiLG0uZnJvbS55LGNoaWxkLmZyb20pOwpjaGlsZC50bz1hLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihjaGlsZCxiLG0udG8ueSxjaGlsZC50byl9aWYobS5mcm9tLnghPW0udG8ueCl7Y2hpbGQuZnJvbT1hLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihjaGlsZCxoLG0uZnJvbS54LGNoaWxkLmZyb20pO2NoaWxkLnRvPWEuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGNoaWxkLGgsbS50by54LGNoaWxkLnRvKX1jaGlsZC5jc3MoY2hpbGQuZnJvbSk7Y2hpbGQuYW5pbWF0ZShjaGlsZC50byxkLmR1cmF0aW9uLGQub3B0aW9ucy5lYXNpbmcsZnVuY3Rpb24oKXtsJiZhLmVmZmVjdHMucmVzdG9yZShjaGlsZCxlKX0pfSl9Yy5hbmltYXRlKGMudG8se3F1ZXVlOmZhbHNlLGR1cmF0aW9uOmQuZHVyYXRpb24sZWFzaW5nOmQub3B0aW9ucy5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtjLnRvLm9wYWNpdHk9PT0wJiZjLmNzcygib3BhY2l0eSIsYy5mcm9tLm9wYWNpdHkpO2o9PSJoaWRlIiYmYy5oaWRlKCk7YS5lZmZlY3RzLnJlc3RvcmUoYywKbD9mOmcpO2EuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKGMpO2QuY2FsbGJhY2smJmQuY2FsbGJhY2suYXBwbHkodGhpcyxhcmd1bWVudHMpO2MuZGVxdWV1ZSgpfX0pfSl9fSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5zaGFrZT1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5xdWV1ZShmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZj1bInBvc2l0aW9uIiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0Il07YS5lZmZlY3RzLnNldE1vZGUoYyxkLm9wdGlvbnMubW9kZXx8ImVmZmVjdCIpO3ZhciBnPWQub3B0aW9ucy5kaXJlY3Rpb258fCJsZWZ0IixlPWQub3B0aW9ucy5kaXN0YW5jZXx8MjAsaT1kLm9wdGlvbnMudGltZXN8fDMsYj1kLmR1cmF0aW9ufHxkLm9wdGlvbnMuZHVyYXRpb258fDE0MDthLmVmZmVjdHMuc2F2ZShjLGYpO2Muc2hvdygpO2EuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKGMpO3ZhciBoPWc9PSJ1cCJ8fGc9PSJkb3duIj8idG9wIjoibGVmdCIsaj1nPT0idXAifHxnPT0ibGVmdCI/InBvcyI6Im5lZyI7Zz17fTt2YXIgbD17fSxvPXt9O2dbaF09KGo9PSJwb3MiPyItPSI6Iis9IikrZTtsW2hdPShqPT0icG9zIj8iKz0iOiItPSIpK2UqMjtvW2hdPQooaj09InBvcyI/Ii09IjoiKz0iKStlKjI7Yy5hbmltYXRlKGcsYixkLm9wdGlvbnMuZWFzaW5nKTtmb3IoZT0xO2U8aTtlKyspYy5hbmltYXRlKGwsYixkLm9wdGlvbnMuZWFzaW5nKS5hbmltYXRlKG8sYixkLm9wdGlvbnMuZWFzaW5nKTtjLmFuaW1hdGUobCxiLGQub3B0aW9ucy5lYXNpbmcpLmFuaW1hdGUoZyxiLzIsZC5vcHRpb25zLmVhc2luZyxmdW5jdGlvbigpe2EuZWZmZWN0cy5yZXN0b3JlKGMsZik7YS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoYyk7ZC5jYWxsYmFjayYmZC5jYWxsYmFjay5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtjLnF1ZXVlKCJmeCIsZnVuY3Rpb24oKXtjLmRlcXVldWUoKX0pO2MuZGVxdWV1ZSgpfSl9fSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5zbGlkZT1mdW5jdGlvbihkKXtyZXR1cm4gdGhpcy5xdWV1ZShmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZj1bInBvc2l0aW9uIiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0Il0sZz1hLmVmZmVjdHMuc2V0TW9kZShjLGQub3B0aW9ucy5tb2RlfHwic2hvdyIpLGU9ZC5vcHRpb25zLmRpcmVjdGlvbnx8ImxlZnQiO2EuZWZmZWN0cy5zYXZlKGMsZik7Yy5zaG93KCk7YS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoYykuY3NzKHtvdmVyZmxvdzoiaGlkZGVuIn0pO3ZhciBpPWU9PSJ1cCJ8fGU9PSJkb3duIj8idG9wIjoibGVmdCI7ZT1lPT0idXAifHxlPT0ibGVmdCI/InBvcyI6Im5lZyI7dmFyIGI9ZC5vcHRpb25zLmRpc3RhbmNlfHwoaT09InRvcCI/Yy5vdXRlckhlaWdodCh7bWFyZ2luOnRydWV9KTpjLm91dGVyV2lkdGgoe21hcmdpbjp0cnVlfSkpO2lmKGc9PSJzaG93IiljLmNzcyhpLGU9PSJwb3MiP2lzTmFOKGIpPyItIitiOi1iOmIpOwp2YXIgaD17fTtoW2ldPShnPT0ic2hvdyI/ZT09InBvcyI/Iis9IjoiLT0iOmU9PSJwb3MiPyItPSI6Iis9IikrYjtjLmFuaW1hdGUoaCx7cXVldWU6ZmFsc2UsZHVyYXRpb246ZC5kdXJhdGlvbixlYXNpbmc6ZC5vcHRpb25zLmVhc2luZyxjb21wbGV0ZTpmdW5jdGlvbigpe2c9PSJoaWRlIiYmYy5oaWRlKCk7YS5lZmZlY3RzLnJlc3RvcmUoYyxmKTthLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihjKTtkLmNhbGxiYWNrJiZkLmNhbGxiYWNrLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjLmRlcXVldWUoKX19KX0pfX0pKGpRdWVyeSk7CihmdW5jdGlvbihhKXthLmVmZmVjdHMudHJhbnNmZXI9ZnVuY3Rpb24oZCl7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGY9YShkLm9wdGlvbnMudG8pLGc9Zi5vZmZzZXQoKTtmPXt0b3A6Zy50b3AsbGVmdDpnLmxlZnQsaGVpZ2h0OmYuaW5uZXJIZWlnaHQoKSx3aWR0aDpmLmlubmVyV2lkdGgoKX07Zz1jLm9mZnNldCgpO3ZhciBlPWEoJzxkaXYgY2xhc3M9InVpLWVmZmVjdHMtdHJhbnNmZXIiPjwvZGl2PicpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmFkZENsYXNzKGQub3B0aW9ucy5jbGFzc05hbWUpLmNzcyh7dG9wOmcudG9wLGxlZnQ6Zy5sZWZ0LGhlaWdodDpjLmlubmVySGVpZ2h0KCksd2lkdGg6Yy5pbm5lcldpZHRoKCkscG9zaXRpb246ImFic29sdXRlIn0pLmFuaW1hdGUoZixkLmR1cmF0aW9uLGQub3B0aW9ucy5lYXNpbmcsZnVuY3Rpb24oKXtlLnJlbW92ZSgpO2QuY2FsbGJhY2smJmQuY2FsbGJhY2suYXBwbHkoY1swXSxhcmd1bWVudHMpOwpjLmRlcXVldWUoKX0pfSl9fSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKGEpe2Eud2lkZ2V0KCJ1aS5hY2NvcmRpb24iLHtvcHRpb25zOnthY3RpdmU6MCxhbmltYXRlZDoic2xpZGUiLGF1dG9IZWlnaHQ6dHJ1ZSxjbGVhclN0eWxlOmZhbHNlLGNvbGxhcHNpYmxlOmZhbHNlLGV2ZW50OiJjbGljayIsZmlsbFNwYWNlOmZhbHNlLGhlYWRlcjoiPiBsaSA+IDpmaXJzdC1jaGlsZCw+IDpub3QobGkpOmV2ZW4iLGljb25zOntoZWFkZXI6InVpLWljb24tdHJpYW5nbGUtMS1lIixoZWFkZXJTZWxlY3RlZDoidWktaWNvbi10cmlhbmdsZS0xLXMifSxuYXZpZ2F0aW9uOmZhbHNlLG5hdmlnYXRpb25GaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ocmVmLnRvTG93ZXJDYXNlKCk9PT1sb2NhdGlvbi5ocmVmLnRvTG93ZXJDYXNlKCl9fSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxjPWQub3B0aW9ucztkLnJ1bm5pbmc9MDtkLmVsZW1lbnQuYWRkQ2xhc3MoInVpLWFjY29yZGlvbiB1aS13aWRnZXQgdWktaGVscGVyLXJlc2V0IikuY2hpbGRyZW4oImxpIikuYWRkQ2xhc3MoInVpLWFjY29yZGlvbi1saS1maXgiKTtkLmhlYWRlcnM9CmQuZWxlbWVudC5maW5kKGMuaGVhZGVyKS5hZGRDbGFzcygidWktYWNjb3JkaW9uLWhlYWRlciB1aS1oZWxwZXItcmVzZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIikuYmluZCgibW91c2VlbnRlci5hY2NvcmRpb24iLGZ1bmN0aW9uKCl7Yy5kaXNhYmxlZHx8YSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKX0pLmJpbmQoIm1vdXNlbGVhdmUuYWNjb3JkaW9uIixmdW5jdGlvbigpe2MuZGlzYWJsZWR8fGEodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIil9KS5iaW5kKCJmb2N1cy5hY2NvcmRpb24iLGZ1bmN0aW9uKCl7Yy5kaXNhYmxlZHx8YSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtZm9jdXMiKX0pLmJpbmQoImJsdXIuYWNjb3JkaW9uIixmdW5jdGlvbigpe2MuZGlzYWJsZWR8fGEodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWZvY3VzIil9KTtkLmhlYWRlcnMubmV4dCgpLmFkZENsYXNzKCJ1aS1hY2NvcmRpb24tY29udGVudCB1aS1oZWxwZXItcmVzZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSIpOwppZihjLm5hdmlnYXRpb24pe3ZhciBmPWQuZWxlbWVudC5maW5kKCJhIikuZmlsdGVyKGMubmF2aWdhdGlvbkZpbHRlcikuZXEoMCk7aWYoZi5sZW5ndGgpe3ZhciBnPWYuY2xvc2VzdCgiLnVpLWFjY29yZGlvbi1oZWFkZXIiKTtkLmFjdGl2ZT1nLmxlbmd0aD9nOmYuY2xvc2VzdCgiLnVpLWFjY29yZGlvbi1jb250ZW50IikucHJldigpfX1kLmFjdGl2ZT1kLl9maW5kQWN0aXZlKGQuYWN0aXZlfHxjLmFjdGl2ZSkuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQgdWktc3RhdGUtYWN0aXZlIikudG9nZ2xlQ2xhc3MoInVpLWNvcm5lci1hbGwiKS50b2dnbGVDbGFzcygidWktY29ybmVyLXRvcCIpO2QuYWN0aXZlLm5leHQoKS5hZGRDbGFzcygidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIik7ZC5fY3JlYXRlSWNvbnMoKTtkLnJlc2l6ZSgpO2QuZWxlbWVudC5hdHRyKCJyb2xlIiwidGFibGlzdCIpO2QuaGVhZGVycy5hdHRyKCJyb2xlIiwidGFiIikuYmluZCgia2V5ZG93bi5hY2NvcmRpb24iLApmdW5jdGlvbihlKXtyZXR1cm4gZC5fa2V5ZG93bihlKX0pLm5leHQoKS5hdHRyKCJyb2xlIiwidGFicGFuZWwiKTtkLmhlYWRlcnMubm90KGQuYWN0aXZlfHwiIikuYXR0cih7ImFyaWEtZXhwYW5kZWQiOiJmYWxzZSIsImFyaWEtc2VsZWN0ZWQiOiJmYWxzZSIsdGFiSW5kZXg6LTF9KS5uZXh0KCkuaGlkZSgpO2QuYWN0aXZlLmxlbmd0aD9kLmFjdGl2ZS5hdHRyKHsiYXJpYS1leHBhbmRlZCI6InRydWUiLCJhcmlhLXNlbGVjdGVkIjoidHJ1ZSIsdGFiSW5kZXg6MH0pOmQuaGVhZGVycy5lcSgwKS5hdHRyKCJ0YWJJbmRleCIsMCk7YS5icm93c2VyLnNhZmFyaXx8ZC5oZWFkZXJzLmZpbmQoImEiKS5hdHRyKCJ0YWJJbmRleCIsLTEpO2MuZXZlbnQmJmQuaGVhZGVycy5iaW5kKGMuZXZlbnQuc3BsaXQoIiAiKS5qb2luKCIuYWNjb3JkaW9uICIpKyIuYWNjb3JkaW9uIixmdW5jdGlvbihlKXtkLl9jbGlja0hhbmRsZXIuY2FsbChkLGUsdGhpcyk7ZS5wcmV2ZW50RGVmYXVsdCgpfSl9LF9jcmVhdGVJY29uczpmdW5jdGlvbigpe3ZhciBkPQp0aGlzLm9wdGlvbnM7aWYoZC5pY29ucyl7YSgiPHNwYW4+PC9zcGFuPiIpLmFkZENsYXNzKCJ1aS1pY29uICIrZC5pY29ucy5oZWFkZXIpLnByZXBlbmRUbyh0aGlzLmhlYWRlcnMpO3RoaXMuYWN0aXZlLmNoaWxkcmVuKCIudWktaWNvbiIpLnRvZ2dsZUNsYXNzKGQuaWNvbnMuaGVhZGVyKS50b2dnbGVDbGFzcyhkLmljb25zLmhlYWRlclNlbGVjdGVkKTt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLWFjY29yZGlvbi1pY29ucyIpfX0sX2Rlc3Ryb3lJY29uczpmdW5jdGlvbigpe3RoaXMuaGVhZGVycy5jaGlsZHJlbigiLnVpLWljb24iKS5yZW1vdmUoKTt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLWFjY29yZGlvbi1pY29ucyIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vcHRpb25zO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktYWNjb3JkaW9uIHVpLXdpZGdldCB1aS1oZWxwZXItcmVzZXQiKS5yZW1vdmVBdHRyKCJyb2xlIik7dGhpcy5oZWFkZXJzLnVuYmluZCgiLmFjY29yZGlvbiIpLnJlbW92ZUNsYXNzKCJ1aS1hY2NvcmRpb24taGVhZGVyIHVpLWFjY29yZGlvbi1kaXNhYmxlZCB1aS1oZWxwZXItcmVzZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCB1aS1jb3JuZXItdG9wIikucmVtb3ZlQXR0cigicm9sZSIpLnJlbW92ZUF0dHIoImFyaWEtZXhwYW5kZWQiKS5yZW1vdmVBdHRyKCJhcmlhLXNlbGVjdGVkIikucmVtb3ZlQXR0cigidGFiSW5kZXgiKTsKdGhpcy5oZWFkZXJzLmZpbmQoImEiKS5yZW1vdmVBdHRyKCJ0YWJJbmRleCIpO3RoaXMuX2Rlc3Ryb3lJY29ucygpO3ZhciBjPXRoaXMuaGVhZGVycy5uZXh0KCkuY3NzKCJkaXNwbGF5IiwiIikucmVtb3ZlQXR0cigicm9sZSIpLnJlbW92ZUNsYXNzKCJ1aS1oZWxwZXItcmVzZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSB1aS1hY2NvcmRpb24tY29udGVudCB1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUgdWktYWNjb3JkaW9uLWRpc2FibGVkIHVpLXN0YXRlLWRpc2FibGVkIik7aWYoZC5hdXRvSGVpZ2h0fHxkLmZpbGxIZWlnaHQpYy5jc3MoImhlaWdodCIsIiIpO3JldHVybiBhLldpZGdldC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGQsYyl7YS5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO2Q9PSJhY3RpdmUiJiZ0aGlzLmFjdGl2YXRlKGMpO2lmKGQ9PSJpY29ucyIpe3RoaXMuX2Rlc3Ryb3lJY29ucygpOwpjJiZ0aGlzLl9jcmVhdGVJY29ucygpfWlmKGQ9PSJkaXNhYmxlZCIpdGhpcy5oZWFkZXJzLmFkZCh0aGlzLmhlYWRlcnMubmV4dCgpKVtjPyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0oInVpLWFjY29yZGlvbi1kaXNhYmxlZCB1aS1zdGF0ZS1kaXNhYmxlZCIpfSxfa2V5ZG93bjpmdW5jdGlvbihkKXtpZighKHRoaXMub3B0aW9ucy5kaXNhYmxlZHx8ZC5hbHRLZXl8fGQuY3RybEtleSkpe3ZhciBjPWEudWkua2V5Q29kZSxmPXRoaXMuaGVhZGVycy5sZW5ndGgsZz10aGlzLmhlYWRlcnMuaW5kZXgoZC50YXJnZXQpLGU9ZmFsc2U7c3dpdGNoKGQua2V5Q29kZSl7Y2FzZSBjLlJJR0hUOmNhc2UgYy5ET1dOOmU9dGhpcy5oZWFkZXJzWyhnKzEpJWZdO2JyZWFrO2Nhc2UgYy5MRUZUOmNhc2UgYy5VUDplPXRoaXMuaGVhZGVyc1soZy0xK2YpJWZdO2JyZWFrO2Nhc2UgYy5TUEFDRTpjYXNlIGMuRU5URVI6dGhpcy5fY2xpY2tIYW5kbGVyKHt0YXJnZXQ6ZC50YXJnZXR9LGQudGFyZ2V0KTsKZC5wcmV2ZW50RGVmYXVsdCgpfWlmKGUpe2EoZC50YXJnZXQpLmF0dHIoInRhYkluZGV4IiwtMSk7YShlKS5hdHRyKCJ0YWJJbmRleCIsMCk7ZS5mb2N1cygpO3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX19LHJlc2l6ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3B0aW9ucyxjO2lmKGQuZmlsbFNwYWNlKXtpZihhLmJyb3dzZXIubXNpZSl7dmFyIGY9dGhpcy5lbGVtZW50LnBhcmVudCgpLmNzcygib3ZlcmZsb3ciKTt0aGlzLmVsZW1lbnQucGFyZW50KCkuY3NzKCJvdmVyZmxvdyIsImhpZGRlbiIpfWM9dGhpcy5lbGVtZW50LnBhcmVudCgpLmhlaWdodCgpO2EuYnJvd3Nlci5tc2llJiZ0aGlzLmVsZW1lbnQucGFyZW50KCkuY3NzKCJvdmVyZmxvdyIsZik7dGhpcy5oZWFkZXJzLmVhY2goZnVuY3Rpb24oKXtjLT1hKHRoaXMpLm91dGVySGVpZ2h0KHRydWUpfSk7dGhpcy5oZWFkZXJzLm5leHQoKS5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS5oZWlnaHQoTWF0aC5tYXgoMCxjLWEodGhpcykuaW5uZXJIZWlnaHQoKSsKYSh0aGlzKS5oZWlnaHQoKSkpfSkuY3NzKCJvdmVyZmxvdyIsImF1dG8iKX1lbHNlIGlmKGQuYXV0b0hlaWdodCl7Yz0wO3RoaXMuaGVhZGVycy5uZXh0KCkuZWFjaChmdW5jdGlvbigpe2M9TWF0aC5tYXgoYyxhKHRoaXMpLmhlaWdodCgiIikuaGVpZ2h0KCkpfSkuaGVpZ2h0KGMpfXJldHVybiB0aGlzfSxhY3RpdmF0ZTpmdW5jdGlvbihkKXt0aGlzLm9wdGlvbnMuYWN0aXZlPWQ7ZD10aGlzLl9maW5kQWN0aXZlKGQpWzBdO3RoaXMuX2NsaWNrSGFuZGxlcih7dGFyZ2V0OmR9LGQpO3JldHVybiB0aGlzfSxfZmluZEFjdGl2ZTpmdW5jdGlvbihkKXtyZXR1cm4gZD90eXBlb2YgZD09PSJudW1iZXIiP3RoaXMuaGVhZGVycy5maWx0ZXIoIjplcSgiK2QrIikiKTp0aGlzLmhlYWRlcnMubm90KHRoaXMuaGVhZGVycy5ub3QoZCkpOmQ9PT1mYWxzZT9hKFtdKTp0aGlzLmhlYWRlcnMuZmlsdGVyKCI6ZXEoMCkiKX0sX2NsaWNrSGFuZGxlcjpmdW5jdGlvbihkLGMpe3ZhciBmPXRoaXMub3B0aW9uczsKaWYoIWYuZGlzYWJsZWQpaWYoZC50YXJnZXQpe2Q9YShkLmN1cnJlbnRUYXJnZXR8fGMpO2M9ZFswXT09PXRoaXMuYWN0aXZlWzBdO2YuYWN0aXZlPWYuY29sbGFwc2libGUmJmM/ZmFsc2U6dGhpcy5oZWFkZXJzLmluZGV4KGQpO2lmKCEodGhpcy5ydW5uaW5nfHwhZi5jb2xsYXBzaWJsZSYmYykpe3ZhciBnPXRoaXMuYWN0aXZlO2g9ZC5uZXh0KCk7aT10aGlzLmFjdGl2ZS5uZXh0KCk7Yj17b3B0aW9uczpmLG5ld0hlYWRlcjpjJiZmLmNvbGxhcHNpYmxlP2EoW10pOmQsb2xkSGVhZGVyOnRoaXMuYWN0aXZlLG5ld0NvbnRlbnQ6YyYmZi5jb2xsYXBzaWJsZT9hKFtdKTpoLG9sZENvbnRlbnQ6aX07dmFyIGU9dGhpcy5oZWFkZXJzLmluZGV4KHRoaXMuYWN0aXZlWzBdKT50aGlzLmhlYWRlcnMuaW5kZXgoZFswXSk7dGhpcy5hY3RpdmU9Yz9hKFtdKTpkO3RoaXMuX3RvZ2dsZShoLGksYixjLGUpO2cucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSB1aS1jb3JuZXItdG9wIikuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCIpLmNoaWxkcmVuKCIudWktaWNvbiIpLnJlbW92ZUNsYXNzKGYuaWNvbnMuaGVhZGVyU2VsZWN0ZWQpLmFkZENsYXNzKGYuaWNvbnMuaGVhZGVyKTsKaWYoIWMpe2QucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCIpLmFkZENsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUgdWktY29ybmVyLXRvcCIpLmNoaWxkcmVuKCIudWktaWNvbiIpLnJlbW92ZUNsYXNzKGYuaWNvbnMuaGVhZGVyKS5hZGRDbGFzcyhmLmljb25zLmhlYWRlclNlbGVjdGVkKTtkLm5leHQoKS5hZGRDbGFzcygidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIil9fX1lbHNlIGlmKGYuY29sbGFwc2libGUpe3RoaXMuYWN0aXZlLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUgdWktY29ybmVyLXRvcCIpLmFkZENsYXNzKCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwiKS5jaGlsZHJlbigiLnVpLWljb24iKS5yZW1vdmVDbGFzcyhmLmljb25zLmhlYWRlclNlbGVjdGVkKS5hZGRDbGFzcyhmLmljb25zLmhlYWRlcik7dGhpcy5hY3RpdmUubmV4dCgpLmFkZENsYXNzKCJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUiKTt2YXIgaT10aGlzLmFjdGl2ZS5uZXh0KCksCmI9e29wdGlvbnM6ZixuZXdIZWFkZXI6YShbXSksb2xkSGVhZGVyOmYuYWN0aXZlLG5ld0NvbnRlbnQ6YShbXSksb2xkQ29udGVudDppfSxoPXRoaXMuYWN0aXZlPWEoW10pO3RoaXMuX3RvZ2dsZShoLGksYil9fSxfdG9nZ2xlOmZ1bmN0aW9uKGQsYyxmLGcsZSl7dmFyIGk9dGhpcyxiPWkub3B0aW9ucztpLnRvU2hvdz1kO2kudG9IaWRlPWM7aS5kYXRhPWY7dmFyIGg9ZnVuY3Rpb24oKXtpZihpKXJldHVybiBpLl9jb21wbGV0ZWQuYXBwbHkoaSxhcmd1bWVudHMpfTtpLl90cmlnZ2VyKCJjaGFuZ2VzdGFydCIsbnVsbCxpLmRhdGEpO2kucnVubmluZz1jLnNpemUoKT09PTA/ZC5zaXplKCk6Yy5zaXplKCk7aWYoYi5hbmltYXRlZCl7Zj17fTtmPWIuY29sbGFwc2libGUmJmc/e3RvU2hvdzphKFtdKSx0b0hpZGU6Yyxjb21wbGV0ZTpoLGRvd246ZSxhdXRvSGVpZ2h0OmIuYXV0b0hlaWdodHx8Yi5maWxsU3BhY2V9Ont0b1Nob3c6ZCx0b0hpZGU6Yyxjb21wbGV0ZTpoLGRvd246ZSxhdXRvSGVpZ2h0OmIuYXV0b0hlaWdodHx8CmIuZmlsbFNwYWNlfTtpZighYi5wcm94aWVkKWIucHJveGllZD1iLmFuaW1hdGVkO2lmKCFiLnByb3hpZWREdXJhdGlvbiliLnByb3hpZWREdXJhdGlvbj1iLmR1cmF0aW9uO2IuYW5pbWF0ZWQ9YS5pc0Z1bmN0aW9uKGIucHJveGllZCk/Yi5wcm94aWVkKGYpOmIucHJveGllZDtiLmR1cmF0aW9uPWEuaXNGdW5jdGlvbihiLnByb3hpZWREdXJhdGlvbik/Yi5wcm94aWVkRHVyYXRpb24oZik6Yi5wcm94aWVkRHVyYXRpb247Zz1hLnVpLmFjY29yZGlvbi5hbmltYXRpb25zO3ZhciBqPWIuZHVyYXRpb24sbD1iLmFuaW1hdGVkO2lmKGwmJiFnW2xdJiYhYS5lYXNpbmdbbF0pbD0ic2xpZGUiO2dbbF18fChnW2xdPWZ1bmN0aW9uKG8pe3RoaXMuc2xpZGUobyx7ZWFzaW5nOmwsZHVyYXRpb246anx8NzAwfSl9KTtnW2xdKGYpfWVsc2V7aWYoYi5jb2xsYXBzaWJsZSYmZylkLnRvZ2dsZSgpO2Vsc2V7Yy5oaWRlKCk7ZC5zaG93KCl9aCh0cnVlKX1jLnByZXYoKS5hdHRyKHsiYXJpYS1leHBhbmRlZCI6ImZhbHNlIiwKImFyaWEtc2VsZWN0ZWQiOiJmYWxzZSIsdGFiSW5kZXg6LTF9KS5ibHVyKCk7ZC5wcmV2KCkuYXR0cih7ImFyaWEtZXhwYW5kZWQiOiJ0cnVlIiwiYXJpYS1zZWxlY3RlZCI6InRydWUiLHRhYkluZGV4OjB9KS5mb2N1cygpfSxfY29tcGxldGVkOmZ1bmN0aW9uKGQpe3RoaXMucnVubmluZz1kPzA6LS10aGlzLnJ1bm5pbmc7aWYoIXRoaXMucnVubmluZyl7dGhpcy5vcHRpb25zLmNsZWFyU3R5bGUmJnRoaXMudG9TaG93LmFkZCh0aGlzLnRvSGlkZSkuY3NzKHtoZWlnaHQ6IiIsb3ZlcmZsb3c6IiJ9KTt0aGlzLnRvSGlkZS5yZW1vdmVDbGFzcygidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIik7aWYodGhpcy50b0hpZGUubGVuZ3RoKXRoaXMudG9IaWRlLnBhcmVudCgpWzBdLmNsYXNzTmFtZT10aGlzLnRvSGlkZS5wYXJlbnQoKVswXS5jbGFzc05hbWU7dGhpcy5fdHJpZ2dlcigiY2hhbmdlIixudWxsLHRoaXMuZGF0YSl9fX0pO2EuZXh0ZW5kKGEudWkuYWNjb3JkaW9uLHt2ZXJzaW9uOiIxLjguMTMiLAphbmltYXRpb25zOntzbGlkZTpmdW5jdGlvbihkLGMpe2Q9YS5leHRlbmQoe2Vhc2luZzoic3dpbmciLGR1cmF0aW9uOjMwMH0sZCxjKTtpZihkLnRvSGlkZS5zaXplKCkpaWYoZC50b1Nob3cuc2l6ZSgpKXt2YXIgZj1kLnRvU2hvdy5jc3MoIm92ZXJmbG93IiksZz0wLGU9e30saT17fSxiO2M9ZC50b1Nob3c7Yj1jWzBdLnN0eWxlLndpZHRoO2Mud2lkdGgocGFyc2VJbnQoYy5wYXJlbnQoKS53aWR0aCgpLDEwKS1wYXJzZUludChjLmNzcygicGFkZGluZ0xlZnQiKSwxMCktcGFyc2VJbnQoYy5jc3MoInBhZGRpbmdSaWdodCIpLDEwKS0ocGFyc2VJbnQoYy5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KGMuY3NzKCJib3JkZXJSaWdodFdpZHRoIiksMTApfHwwKSk7YS5lYWNoKFsiaGVpZ2h0IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iXSxmdW5jdGlvbihoLGope2lbal09ImhpZGUiO2g9KCIiK2EuY3NzKGQudG9TaG93WzBdLGopKS5tYXRjaCgvXihbXGQrLS5dKykoLiopJC8pOwplW2pdPXt2YWx1ZTpoWzFdLHVuaXQ6aFsyXXx8InB4In19KTtkLnRvU2hvdy5jc3Moe2hlaWdodDowLG92ZXJmbG93OiJoaWRkZW4ifSkuc2hvdygpO2QudG9IaWRlLmZpbHRlcigiOmhpZGRlbiIpLmVhY2goZC5jb21wbGV0ZSkuZW5kKCkuZmlsdGVyKCI6dmlzaWJsZSIpLmFuaW1hdGUoaSx7c3RlcDpmdW5jdGlvbihoLGope2lmKGoucHJvcD09ImhlaWdodCIpZz1qLmVuZC1qLnN0YXJ0PT09MD8wOihqLm5vdy1qLnN0YXJ0KS8oai5lbmQtai5zdGFydCk7ZC50b1Nob3dbMF0uc3R5bGVbai5wcm9wXT1nKmVbai5wcm9wXS52YWx1ZStlW2oucHJvcF0udW5pdH0sZHVyYXRpb246ZC5kdXJhdGlvbixlYXNpbmc6ZC5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtkLmF1dG9IZWlnaHR8fGQudG9TaG93LmNzcygiaGVpZ2h0IiwiIik7ZC50b1Nob3cuY3NzKHt3aWR0aDpiLG92ZXJmbG93OmZ9KTtkLmNvbXBsZXRlKCl9fSl9ZWxzZSBkLnRvSGlkZS5hbmltYXRlKHtoZWlnaHQ6ImhpZGUiLApwYWRkaW5nVG9wOiJoaWRlIixwYWRkaW5nQm90dG9tOiJoaWRlIn0sZCk7ZWxzZSBkLnRvU2hvdy5hbmltYXRlKHtoZWlnaHQ6InNob3ciLHBhZGRpbmdUb3A6InNob3ciLHBhZGRpbmdCb3R0b206InNob3cifSxkKX0sYm91bmNlc2xpZGU6ZnVuY3Rpb24oZCl7dGhpcy5zbGlkZShkLHtlYXNpbmc6ZC5kb3duPyJlYXNlT3V0Qm91bmNlIjoic3dpbmciLGR1cmF0aW9uOmQuZG93bj8xRTM6MjAwfSl9fX0pfSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKGEpe3ZhciBkPTA7YS53aWRnZXQoInVpLmF1dG9jb21wbGV0ZSIse29wdGlvbnM6e2FwcGVuZFRvOiJib2R5IixhdXRvRm9jdXM6ZmFsc2UsZGVsYXk6MzAwLG1pbkxlbmd0aDoxLHBvc2l0aW9uOntteToibGVmdCB0b3AiLGF0OiJsZWZ0IGJvdHRvbSIsY29sbGlzaW9uOiJub25lIn0sc291cmNlOm51bGx9LHBlbmRpbmc6MCxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxmPXRoaXMuZWxlbWVudFswXS5vd25lckRvY3VtZW50LGc7dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1hdXRvY29tcGxldGUtaW5wdXQiKS5hdHRyKCJhdXRvY29tcGxldGUiLCJvZmYiKS5hdHRyKHtyb2xlOiJ0ZXh0Ym94IiwiYXJpYS1hdXRvY29tcGxldGUiOiJsaXN0IiwiYXJpYS1oYXNwb3B1cCI6InRydWUifSkuYmluZCgia2V5ZG93bi5hdXRvY29tcGxldGUiLGZ1bmN0aW9uKGUpe2lmKCEoYy5vcHRpb25zLmRpc2FibGVkfHxjLmVsZW1lbnQuYXR0cigicmVhZG9ubHkiKSkpe2c9CmZhbHNlO3ZhciBpPWEudWkua2V5Q29kZTtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIGkuUEFHRV9VUDpjLl9tb3ZlKCJwcmV2aW91c1BhZ2UiLGUpO2JyZWFrO2Nhc2UgaS5QQUdFX0RPV046Yy5fbW92ZSgibmV4dFBhZ2UiLGUpO2JyZWFrO2Nhc2UgaS5VUDpjLl9tb3ZlKCJwcmV2aW91cyIsZSk7ZS5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2UgaS5ET1dOOmMuX21vdmUoIm5leHQiLGUpO2UucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIGkuRU5URVI6Y2FzZSBpLk5VTVBBRF9FTlRFUjppZihjLm1lbnUuYWN0aXZlKXtnPXRydWU7ZS5wcmV2ZW50RGVmYXVsdCgpfWNhc2UgaS5UQUI6aWYoIWMubWVudS5hY3RpdmUpcmV0dXJuO2MubWVudS5zZWxlY3QoZSk7YnJlYWs7Y2FzZSBpLkVTQ0FQRTpjLmVsZW1lbnQudmFsKGMudGVybSk7Yy5jbG9zZShlKTticmVhaztkZWZhdWx0OmNsZWFyVGltZW91dChjLnNlYXJjaGluZyk7Yy5zZWFyY2hpbmc9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKGMudGVybSE9CmMuZWxlbWVudC52YWwoKSl7Yy5zZWxlY3RlZEl0ZW09bnVsbDtjLnNlYXJjaChudWxsLGUpfX0sYy5vcHRpb25zLmRlbGF5KTticmVha319fSkuYmluZCgia2V5cHJlc3MuYXV0b2NvbXBsZXRlIixmdW5jdGlvbihlKXtpZihnKXtnPWZhbHNlO2UucHJldmVudERlZmF1bHQoKX19KS5iaW5kKCJmb2N1cy5hdXRvY29tcGxldGUiLGZ1bmN0aW9uKCl7aWYoIWMub3B0aW9ucy5kaXNhYmxlZCl7Yy5zZWxlY3RlZEl0ZW09bnVsbDtjLnByZXZpb3VzPWMuZWxlbWVudC52YWwoKX19KS5iaW5kKCJibHVyLmF1dG9jb21wbGV0ZSIsZnVuY3Rpb24oZSl7aWYoIWMub3B0aW9ucy5kaXNhYmxlZCl7Y2xlYXJUaW1lb3V0KGMuc2VhcmNoaW5nKTtjLmNsb3Npbmc9c2V0VGltZW91dChmdW5jdGlvbigpe2MuY2xvc2UoZSk7Yy5fY2hhbmdlKGUpfSwxNTApfX0pO3RoaXMuX2luaXRTb3VyY2UoKTt0aGlzLnJlc3BvbnNlPWZ1bmN0aW9uKCl7cmV0dXJuIGMuX3Jlc3BvbnNlLmFwcGx5KGMsYXJndW1lbnRzKX07CnRoaXMubWVudT1hKCI8dWw+PC91bD4iKS5hZGRDbGFzcygidWktYXV0b2NvbXBsZXRlIikuYXBwZW5kVG8oYSh0aGlzLm9wdGlvbnMuYXBwZW5kVG98fCJib2R5IixmKVswXSkubW91c2Vkb3duKGZ1bmN0aW9uKGUpe3ZhciBpPWMubWVudS5lbGVtZW50WzBdO2EoZS50YXJnZXQpLmNsb3Nlc3QoIi51aS1tZW51LWl0ZW0iKS5sZW5ndGh8fHNldFRpbWVvdXQoZnVuY3Rpb24oKXthKGRvY3VtZW50KS5vbmUoIm1vdXNlZG93biIsZnVuY3Rpb24oYil7Yi50YXJnZXQhPT1jLmVsZW1lbnRbMF0mJmIudGFyZ2V0IT09aSYmIWEudWkuY29udGFpbnMoaSxiLnRhcmdldCkmJmMuY2xvc2UoKX0pfSwxKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGMuY2xvc2luZyl9LDEzKX0pLm1lbnUoe2ZvY3VzOmZ1bmN0aW9uKGUsaSl7aT1pLml0ZW0uZGF0YSgiaXRlbS5hdXRvY29tcGxldGUiKTtmYWxzZSE9PWMuX3RyaWdnZXIoImZvY3VzIixlLHtpdGVtOml9KSYmL15rZXkvLnRlc3QoZS5vcmlnaW5hbEV2ZW50LnR5cGUpJiYKYy5lbGVtZW50LnZhbChpLnZhbHVlKX0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSxpKXt2YXIgYj1pLml0ZW0uZGF0YSgiaXRlbS5hdXRvY29tcGxldGUiKSxoPWMucHJldmlvdXM7aWYoYy5lbGVtZW50WzBdIT09Zi5hY3RpdmVFbGVtZW50KXtjLmVsZW1lbnQuZm9jdXMoKTtjLnByZXZpb3VzPWg7c2V0VGltZW91dChmdW5jdGlvbigpe2MucHJldmlvdXM9aDtjLnNlbGVjdGVkSXRlbT1ifSwxKX1mYWxzZSE9PWMuX3RyaWdnZXIoInNlbGVjdCIsZSx7aXRlbTpifSkmJmMuZWxlbWVudC52YWwoYi52YWx1ZSk7Yy50ZXJtPWMuZWxlbWVudC52YWwoKTtjLmNsb3NlKGUpO2Muc2VsZWN0ZWRJdGVtPWJ9LGJsdXI6ZnVuY3Rpb24oKXtjLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSYmYy5lbGVtZW50LnZhbCgpIT09Yy50ZXJtJiZjLmVsZW1lbnQudmFsKGMudGVybSl9fSkuekluZGV4KHRoaXMuZWxlbWVudC56SW5kZXgoKSsxKS5jc3Moe3RvcDowLGxlZnQ6MH0pLmhpZGUoKS5kYXRhKCJtZW51Iik7CmEuZm4uYmdpZnJhbWUmJnRoaXMubWVudS5lbGVtZW50LmJnaWZyYW1lKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLWF1dG9jb21wbGV0ZS1pbnB1dCIpLnJlbW92ZUF0dHIoImF1dG9jb21wbGV0ZSIpLnJlbW92ZUF0dHIoInJvbGUiKS5yZW1vdmVBdHRyKCJhcmlhLWF1dG9jb21wbGV0ZSIpLnJlbW92ZUF0dHIoImFyaWEtaGFzcG9wdXAiKTt0aGlzLm1lbnUuZWxlbWVudC5yZW1vdmUoKTthLldpZGdldC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGMsZil7YS5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO2M9PT0ic291cmNlIiYmdGhpcy5faW5pdFNvdXJjZSgpO2lmKGM9PT0iYXBwZW5kVG8iKXRoaXMubWVudS5lbGVtZW50LmFwcGVuZFRvKGEoZnx8ImJvZHkiLHRoaXMuZWxlbWVudFswXS5vd25lckRvY3VtZW50KVswXSk7Yz09PSJkaXNhYmxlZCImJgpmJiZ0aGlzLnhociYmdGhpcy54aHIuYWJvcnQoKX0sX2luaXRTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGYsZztpZihhLmlzQXJyYXkodGhpcy5vcHRpb25zLnNvdXJjZSkpe2Y9dGhpcy5vcHRpb25zLnNvdXJjZTt0aGlzLnNvdXJjZT1mdW5jdGlvbihlLGkpe2koYS51aS5hdXRvY29tcGxldGUuZmlsdGVyKGYsZS50ZXJtKSl9fWVsc2UgaWYodHlwZW9mIHRoaXMub3B0aW9ucy5zb3VyY2U9PT0ic3RyaW5nIil7Zz10aGlzLm9wdGlvbnMuc291cmNlO3RoaXMuc291cmNlPWZ1bmN0aW9uKGUsaSl7Yy54aHImJmMueGhyLmFib3J0KCk7Yy54aHI9YS5hamF4KHt1cmw6ZyxkYXRhOmUsZGF0YVR5cGU6Impzb24iLGF1dG9jb21wbGV0ZVJlcXVlc3Q6KytkLHN1Y2Nlc3M6ZnVuY3Rpb24oYil7dGhpcy5hdXRvY29tcGxldGVSZXF1ZXN0PT09ZCYmaShiKX0sZXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmF1dG9jb21wbGV0ZVJlcXVlc3Q9PT1kJiZpKFtdKX19KX19ZWxzZSB0aGlzLnNvdXJjZT0KdGhpcy5vcHRpb25zLnNvdXJjZX0sc2VhcmNoOmZ1bmN0aW9uKGMsZil7Yz1jIT1udWxsP2M6dGhpcy5lbGVtZW50LnZhbCgpO3RoaXMudGVybT10aGlzLmVsZW1lbnQudmFsKCk7aWYoYy5sZW5ndGg8dGhpcy5vcHRpb25zLm1pbkxlbmd0aClyZXR1cm4gdGhpcy5jbG9zZShmKTtjbGVhclRpbWVvdXQodGhpcy5jbG9zaW5nKTtpZih0aGlzLl90cmlnZ2VyKCJzZWFyY2giLGYpIT09ZmFsc2UpcmV0dXJuIHRoaXMuX3NlYXJjaChjKX0sX3NlYXJjaDpmdW5jdGlvbihjKXt0aGlzLnBlbmRpbmcrKzt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLWF1dG9jb21wbGV0ZS1sb2FkaW5nIik7dGhpcy5zb3VyY2Uoe3Rlcm06Y30sdGhpcy5yZXNwb25zZSl9LF9yZXNwb25zZTpmdW5jdGlvbihjKXtpZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiZjJiZjLmxlbmd0aCl7Yz10aGlzLl9ub3JtYWxpemUoYyk7dGhpcy5fc3VnZ2VzdChjKTt0aGlzLl90cmlnZ2VyKCJvcGVuIil9ZWxzZSB0aGlzLmNsb3NlKCk7CnRoaXMucGVuZGluZy0tO3RoaXMucGVuZGluZ3x8dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1hdXRvY29tcGxldGUtbG9hZGluZyIpfSxjbG9zZTpmdW5jdGlvbihjKXtjbGVhclRpbWVvdXQodGhpcy5jbG9zaW5nKTtpZih0aGlzLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSl7dGhpcy5tZW51LmVsZW1lbnQuaGlkZSgpO3RoaXMubWVudS5kZWFjdGl2YXRlKCk7dGhpcy5fdHJpZ2dlcigiY2xvc2UiLGMpfX0sX2NoYW5nZTpmdW5jdGlvbihjKXt0aGlzLnByZXZpb3VzIT09dGhpcy5lbGVtZW50LnZhbCgpJiZ0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLGMse2l0ZW06dGhpcy5zZWxlY3RlZEl0ZW19KX0sX25vcm1hbGl6ZTpmdW5jdGlvbihjKXtpZihjLmxlbmd0aCYmY1swXS5sYWJlbCYmY1swXS52YWx1ZSlyZXR1cm4gYztyZXR1cm4gYS5tYXAoYyxmdW5jdGlvbihmKXtpZih0eXBlb2YgZj09PSJzdHJpbmciKXJldHVybntsYWJlbDpmLHZhbHVlOmZ9O3JldHVybiBhLmV4dGVuZCh7bGFiZWw6Zi5sYWJlbHx8CmYudmFsdWUsdmFsdWU6Zi52YWx1ZXx8Zi5sYWJlbH0sZil9KX0sX3N1Z2dlc3Q6ZnVuY3Rpb24oYyl7dmFyIGY9dGhpcy5tZW51LmVsZW1lbnQuZW1wdHkoKS56SW5kZXgodGhpcy5lbGVtZW50LnpJbmRleCgpKzEpO3RoaXMuX3JlbmRlck1lbnUoZixjKTt0aGlzLm1lbnUuZGVhY3RpdmF0ZSgpO3RoaXMubWVudS5yZWZyZXNoKCk7Zi5zaG93KCk7dGhpcy5fcmVzaXplTWVudSgpO2YucG9zaXRpb24oYS5leHRlbmQoe29mOnRoaXMuZWxlbWVudH0sdGhpcy5vcHRpb25zLnBvc2l0aW9uKSk7dGhpcy5vcHRpb25zLmF1dG9Gb2N1cyYmdGhpcy5tZW51Lm5leHQobmV3IGEuRXZlbnQoIm1vdXNlb3ZlciIpKX0sX3Jlc2l6ZU1lbnU6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLm1lbnUuZWxlbWVudDtjLm91dGVyV2lkdGgoTWF0aC5tYXgoYy53aWR0aCgiIikub3V0ZXJXaWR0aCgpLHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCkpKX0sX3JlbmRlck1lbnU6ZnVuY3Rpb24oYyxmKXt2YXIgZz10aGlzOwphLmVhY2goZixmdW5jdGlvbihlLGkpe2cuX3JlbmRlckl0ZW0oYyxpKX0pfSxfcmVuZGVySXRlbTpmdW5jdGlvbihjLGYpe3JldHVybiBhKCI8bGk+PC9saT4iKS5kYXRhKCJpdGVtLmF1dG9jb21wbGV0ZSIsZikuYXBwZW5kKGEoIjxhPjwvYT4iKS50ZXh0KGYubGFiZWwpKS5hcHBlbmRUbyhjKX0sX21vdmU6ZnVuY3Rpb24oYyxmKXtpZih0aGlzLm1lbnUuZWxlbWVudC5pcygiOnZpc2libGUiKSlpZih0aGlzLm1lbnUuZmlyc3QoKSYmL15wcmV2aW91cy8udGVzdChjKXx8dGhpcy5tZW51Lmxhc3QoKSYmL15uZXh0Ly50ZXN0KGMpKXt0aGlzLmVsZW1lbnQudmFsKHRoaXMudGVybSk7dGhpcy5tZW51LmRlYWN0aXZhdGUoKX1lbHNlIHRoaXMubWVudVtjXShmKTtlbHNlIHRoaXMuc2VhcmNoKG51bGwsZil9LHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1lbnUuZWxlbWVudH19KTthLmV4dGVuZChhLnVpLmF1dG9jb21wbGV0ZSx7ZXNjYXBlUmVnZXg6ZnVuY3Rpb24oYyl7cmV0dXJuIGMucmVwbGFjZSgvWy1bXF17fSgpKis/LixcXF4kfCNcc10vZywKIlxcJCYiKX0sZmlsdGVyOmZ1bmN0aW9uKGMsZil7dmFyIGc9bmV3IFJlZ0V4cChhLnVpLmF1dG9jb21wbGV0ZS5lc2NhcGVSZWdleChmKSwiaSIpO3JldHVybiBhLmdyZXAoYyxmdW5jdGlvbihlKXtyZXR1cm4gZy50ZXN0KGUubGFiZWx8fGUudmFsdWV8fGUpfSl9fSl9KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS53aWRnZXQoInVpLm1lbnUiLHtfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpczt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKS5hdHRyKHtyb2xlOiJsaXN0Ym94IiwiYXJpYS1hY3RpdmVkZXNjZW5kYW50IjoidWktYWN0aXZlLW1lbnVpdGVtIn0pLmNsaWNrKGZ1bmN0aW9uKGMpe2lmKGEoYy50YXJnZXQpLmNsb3Nlc3QoIi51aS1tZW51LWl0ZW0gYSIpLmxlbmd0aCl7Yy5wcmV2ZW50RGVmYXVsdCgpO2Quc2VsZWN0KGMpfX0pO3RoaXMucmVmcmVzaCgpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpczt0aGlzLmVsZW1lbnQuY2hpbGRyZW4oImxpOm5vdCgudWktbWVudS1pdGVtKTpoYXMoYSkiKS5hZGRDbGFzcygidWktbWVudS1pdGVtIikuYXR0cigicm9sZSIsIm1lbnVpdGVtIikuY2hpbGRyZW4oImEiKS5hZGRDbGFzcygidWktY29ybmVyLWFsbCIpLmF0dHIoInRhYmluZGV4IiwKLTEpLm1vdXNlZW50ZXIoZnVuY3Rpb24oYyl7ZC5hY3RpdmF0ZShjLGEodGhpcykucGFyZW50KCkpfSkubW91c2VsZWF2ZShmdW5jdGlvbigpe2QuZGVhY3RpdmF0ZSgpfSl9LGFjdGl2YXRlOmZ1bmN0aW9uKGQsYyl7dGhpcy5kZWFjdGl2YXRlKCk7aWYodGhpcy5oYXNTY3JvbGwoKSl7dmFyIGY9Yy5vZmZzZXQoKS50b3AtdGhpcy5lbGVtZW50Lm9mZnNldCgpLnRvcCxnPXRoaXMuZWxlbWVudC5zY3JvbGxUb3AoKSxlPXRoaXMuZWxlbWVudC5oZWlnaHQoKTtpZihmPDApdGhpcy5lbGVtZW50LnNjcm9sbFRvcChnK2YpO2Vsc2UgZj49ZSYmdGhpcy5lbGVtZW50LnNjcm9sbFRvcChnK2YtZStjLmhlaWdodCgpKX10aGlzLmFjdGl2ZT1jLmVxKDApLmNoaWxkcmVuKCJhIikuYWRkQ2xhc3MoInVpLXN0YXRlLWhvdmVyIikuYXR0cigiaWQiLCJ1aS1hY3RpdmUtbWVudWl0ZW0iKS5lbmQoKTt0aGlzLl90cmlnZ2VyKCJmb2N1cyIsZCx7aXRlbTpjfSl9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmFjdGl2ZSl7dGhpcy5hY3RpdmUuY2hpbGRyZW4oImEiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKS5yZW1vdmVBdHRyKCJpZCIpOwp0aGlzLl90cmlnZ2VyKCJibHVyIik7dGhpcy5hY3RpdmU9bnVsbH19LG5leHQ6ZnVuY3Rpb24oZCl7dGhpcy5tb3ZlKCJuZXh0IiwiLnVpLW1lbnUtaXRlbTpmaXJzdCIsZCl9LHByZXZpb3VzOmZ1bmN0aW9uKGQpe3RoaXMubW92ZSgicHJldiIsIi51aS1tZW51LWl0ZW06bGFzdCIsZCl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlJiYhdGhpcy5hY3RpdmUucHJldkFsbCgiLnVpLW1lbnUtaXRlbSIpLmxlbmd0aH0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFjdGl2ZSYmIXRoaXMuYWN0aXZlLm5leHRBbGwoIi51aS1tZW51LWl0ZW0iKS5sZW5ndGh9LG1vdmU6ZnVuY3Rpb24oZCxjLGYpe2lmKHRoaXMuYWN0aXZlKXtkPXRoaXMuYWN0aXZlW2QrIkFsbCJdKCIudWktbWVudS1pdGVtIikuZXEoMCk7ZC5sZW5ndGg/dGhpcy5hY3RpdmF0ZShmLGQpOnRoaXMuYWN0aXZhdGUoZix0aGlzLmVsZW1lbnQuY2hpbGRyZW4oYykpfWVsc2UgdGhpcy5hY3RpdmF0ZShmLAp0aGlzLmVsZW1lbnQuY2hpbGRyZW4oYykpfSxuZXh0UGFnZTpmdW5jdGlvbihkKXtpZih0aGlzLmhhc1Njcm9sbCgpKWlmKCF0aGlzLmFjdGl2ZXx8dGhpcy5sYXN0KCkpdGhpcy5hY3RpdmF0ZShkLHRoaXMuZWxlbWVudC5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbTpmaXJzdCIpKTtlbHNle3ZhciBjPXRoaXMuYWN0aXZlLm9mZnNldCgpLnRvcCxmPXRoaXMuZWxlbWVudC5oZWlnaHQoKSxnPXRoaXMuZWxlbWVudC5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbSIpLmZpbHRlcihmdW5jdGlvbigpe3ZhciBlPWEodGhpcykub2Zmc2V0KCkudG9wLWMtZithKHRoaXMpLmhlaWdodCgpO3JldHVybiBlPDEwJiZlPi0xMH0pO2cubGVuZ3RofHwoZz10aGlzLmVsZW1lbnQuY2hpbGRyZW4oIi51aS1tZW51LWl0ZW06bGFzdCIpKTt0aGlzLmFjdGl2YXRlKGQsZyl9ZWxzZSB0aGlzLmFjdGl2YXRlKGQsdGhpcy5lbGVtZW50LmNoaWxkcmVuKCIudWktbWVudS1pdGVtIikuZmlsdGVyKCF0aGlzLmFjdGl2ZXx8CnRoaXMubGFzdCgpPyI6Zmlyc3QiOiI6bGFzdCIpKX0scHJldmlvdXNQYWdlOmZ1bmN0aW9uKGQpe2lmKHRoaXMuaGFzU2Nyb2xsKCkpaWYoIXRoaXMuYWN0aXZlfHx0aGlzLmZpcnN0KCkpdGhpcy5hY3RpdmF0ZShkLHRoaXMuZWxlbWVudC5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbTpsYXN0IikpO2Vsc2V7dmFyIGM9dGhpcy5hY3RpdmUub2Zmc2V0KCkudG9wLGY9dGhpcy5lbGVtZW50LmhlaWdodCgpO3Jlc3VsdD10aGlzLmVsZW1lbnQuY2hpbGRyZW4oIi51aS1tZW51LWl0ZW0iKS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZz1hKHRoaXMpLm9mZnNldCgpLnRvcC1jK2YtYSh0aGlzKS5oZWlnaHQoKTtyZXR1cm4gZzwxMCYmZz4tMTB9KTtyZXN1bHQubGVuZ3RofHwocmVzdWx0PXRoaXMuZWxlbWVudC5jaGlsZHJlbigiLnVpLW1lbnUtaXRlbTpmaXJzdCIpKTt0aGlzLmFjdGl2YXRlKGQscmVzdWx0KX1lbHNlIHRoaXMuYWN0aXZhdGUoZCx0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIi51aS1tZW51LWl0ZW0iKS5maWx0ZXIoIXRoaXMuYWN0aXZlfHwKdGhpcy5maXJzdCgpPyI6bGFzdCI6IjpmaXJzdCIpKX0saGFzU2Nyb2xsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5oZWlnaHQoKTx0aGlzLmVsZW1lbnRbYS5mbi5wcm9wPyJwcm9wIjoiYXR0ciJdKCJzY3JvbGxIZWlnaHQiKX0sc2VsZWN0OmZ1bmN0aW9uKGQpe3RoaXMuX3RyaWdnZXIoInNlbGVjdGVkIixkLHtpdGVtOnRoaXMuYWN0aXZlfSl9fSl9KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7dmFyIGQsYz1mdW5jdGlvbihnKXthKCI6dWktYnV0dG9uIixnLnRhcmdldC5mb3JtKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzKS5kYXRhKCJidXR0b24iKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5yZWZyZXNoKCl9LDEpfSl9LGY9ZnVuY3Rpb24oZyl7dmFyIGU9Zy5uYW1lLGk9Zy5mb3JtLGI9YShbXSk7aWYoZSliPWk/YShpKS5maW5kKCJbbmFtZT0nIitlKyInXSIpOmEoIltuYW1lPSciK2UrIiddIixnLm93bmVyRG9jdW1lbnQpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiF0aGlzLmZvcm19KTtyZXR1cm4gYn07YS53aWRnZXQoInVpLmJ1dHRvbiIse29wdGlvbnM6e2Rpc2FibGVkOm51bGwsdGV4dDp0cnVlLGxhYmVsOm51bGwsaWNvbnM6e3ByaW1hcnk6bnVsbCxzZWNvbmRhcnk6bnVsbH19LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuY2xvc2VzdCgiZm9ybSIpLnVuYmluZCgicmVzZXQuYnV0dG9uIikuYmluZCgicmVzZXQuYnV0dG9uIiwKYyk7aWYodHlwZW9mIHRoaXMub3B0aW9ucy5kaXNhYmxlZCE9PSJib29sZWFuIil0aGlzLm9wdGlvbnMuZGlzYWJsZWQ9dGhpcy5lbGVtZW50LmF0dHIoImRpc2FibGVkIik7dGhpcy5fZGV0ZXJtaW5lQnV0dG9uVHlwZSgpO3RoaXMuaGFzVGl0bGU9ISF0aGlzLmJ1dHRvbkVsZW1lbnQuYXR0cigidGl0bGUiKTt2YXIgZz10aGlzLGU9dGhpcy5vcHRpb25zLGk9dGhpcy50eXBlPT09ImNoZWNrYm94Inx8dGhpcy50eXBlPT09InJhZGlvIixiPSJ1aS1zdGF0ZS1ob3ZlciIrKCFpPyIgdWktc3RhdGUtYWN0aXZlIjoiIik7aWYoZS5sYWJlbD09PW51bGwpZS5sYWJlbD10aGlzLmJ1dHRvbkVsZW1lbnQuaHRtbCgpO2lmKHRoaXMuZWxlbWVudC5pcygiOmRpc2FibGVkIikpZS5kaXNhYmxlZD10cnVlO3RoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcygidWktYnV0dG9uIHVpLXdpZGdldCB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwiKS5hdHRyKCJyb2xlIiwiYnV0dG9uIikuYmluZCgibW91c2VlbnRlci5idXR0b24iLApmdW5jdGlvbigpe2lmKCFlLmRpc2FibGVkKXthKHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpO3RoaXM9PT1kJiZhKHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKX19KS5iaW5kKCJtb3VzZWxlYXZlLmJ1dHRvbiIsZnVuY3Rpb24oKXtlLmRpc2FibGVkfHxhKHRoaXMpLnJlbW92ZUNsYXNzKGIpfSkuYmluZCgiZm9jdXMuYnV0dG9uIixmdW5jdGlvbigpe2EodGhpcykuYWRkQ2xhc3MoInVpLXN0YXRlLWZvY3VzIil9KS5iaW5kKCJibHVyLmJ1dHRvbiIsZnVuY3Rpb24oKXthKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1mb2N1cyIpfSkuYmluZCgiY2xpY2suYnV0dG9uIixmdW5jdGlvbihoKXtlLmRpc2FibGVkJiZoLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfSk7aSYmdGhpcy5lbGVtZW50LmJpbmQoImNoYW5nZS5idXR0b24iLGZ1bmN0aW9uKCl7Zy5yZWZyZXNoKCl9KTtpZih0aGlzLnR5cGU9PT0iY2hlY2tib3giKXRoaXMuYnV0dG9uRWxlbWVudC5iaW5kKCJjbGljay5idXR0b24iLApmdW5jdGlvbigpe2lmKGUuZGlzYWJsZWQpcmV0dXJuIGZhbHNlO2EodGhpcykudG9nZ2xlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpO2cuYnV0dG9uRWxlbWVudC5hdHRyKCJhcmlhLXByZXNzZWQiLGcuZWxlbWVudFswXS5jaGVja2VkKX0pO2Vsc2UgaWYodGhpcy50eXBlPT09InJhZGlvIil0aGlzLmJ1dHRvbkVsZW1lbnQuYmluZCgiY2xpY2suYnV0dG9uIixmdW5jdGlvbigpe2lmKGUuZGlzYWJsZWQpcmV0dXJuIGZhbHNlO2EodGhpcykuYWRkQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpO2cuYnV0dG9uRWxlbWVudC5hdHRyKCJhcmlhLXByZXNzZWQiLHRydWUpO3ZhciBoPWcuZWxlbWVudFswXTtmKGgpLm5vdChoKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS5idXR0b24oIndpZGdldCIpWzBdfSkucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpLmF0dHIoImFyaWEtcHJlc3NlZCIsZmFsc2UpfSk7ZWxzZXt0aGlzLmJ1dHRvbkVsZW1lbnQuYmluZCgibW91c2Vkb3duLmJ1dHRvbiIsCmZ1bmN0aW9uKCl7aWYoZS5kaXNhYmxlZClyZXR1cm4gZmFsc2U7YSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIik7ZD10aGlzO2EoZG9jdW1lbnQpLm9uZSgibW91c2V1cCIsZnVuY3Rpb24oKXtkPW51bGx9KX0pLmJpbmQoIm1vdXNldXAuYnV0dG9uIixmdW5jdGlvbigpe2lmKGUuZGlzYWJsZWQpcmV0dXJuIGZhbHNlO2EodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpfSkuYmluZCgia2V5ZG93bi5idXR0b24iLGZ1bmN0aW9uKGgpe2lmKGUuZGlzYWJsZWQpcmV0dXJuIGZhbHNlO2lmKGgua2V5Q29kZT09YS51aS5rZXlDb2RlLlNQQUNFfHxoLmtleUNvZGU9PWEudWkua2V5Q29kZS5FTlRFUilhKHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKX0pLmJpbmQoImtleXVwLmJ1dHRvbiIsZnVuY3Rpb24oKXthKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKX0pO3RoaXMuYnV0dG9uRWxlbWVudC5pcygiYSIpJiZ0aGlzLmJ1dHRvbkVsZW1lbnQua2V5dXAoZnVuY3Rpb24oaCl7aC5rZXlDb2RlPT09CmEudWkua2V5Q29kZS5TUEFDRSYmYSh0aGlzKS5jbGljaygpfSl9dGhpcy5fc2V0T3B0aW9uKCJkaXNhYmxlZCIsZS5kaXNhYmxlZCl9LF9kZXRlcm1pbmVCdXR0b25UeXBlOmZ1bmN0aW9uKCl7dGhpcy50eXBlPXRoaXMuZWxlbWVudC5pcygiOmNoZWNrYm94Iik/ImNoZWNrYm94Ijp0aGlzLmVsZW1lbnQuaXMoIjpyYWRpbyIpPyJyYWRpbyI6dGhpcy5lbGVtZW50LmlzKCJpbnB1dCIpPyJpbnB1dCI6ImJ1dHRvbiI7aWYodGhpcy50eXBlPT09ImNoZWNrYm94Inx8dGhpcy50eXBlPT09InJhZGlvIil7dmFyIGc9dGhpcy5lbGVtZW50LnBhcmVudHMoKS5maWx0ZXIoIjpsYXN0IiksZT0ibGFiZWxbZm9yPSIrdGhpcy5lbGVtZW50LmF0dHIoImlkIikrIl0iO3RoaXMuYnV0dG9uRWxlbWVudD1nLmZpbmQoZSk7aWYoIXRoaXMuYnV0dG9uRWxlbWVudC5sZW5ndGgpe2c9Zy5sZW5ndGg/Zy5zaWJsaW5ncygpOnRoaXMuZWxlbWVudC5zaWJsaW5ncygpO3RoaXMuYnV0dG9uRWxlbWVudD1nLmZpbHRlcihlKTsKaWYoIXRoaXMuYnV0dG9uRWxlbWVudC5sZW5ndGgpdGhpcy5idXR0b25FbGVtZW50PWcuZmluZChlKX10aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZSIpOyhnPXRoaXMuZWxlbWVudC5pcygiOmNoZWNrZWQiKSkmJnRoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIik7dGhpcy5idXR0b25FbGVtZW50LmF0dHIoImFyaWEtcHJlc3NlZCIsZyl9ZWxzZSB0aGlzLmJ1dHRvbkVsZW1lbnQ9dGhpcy5lbGVtZW50fSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idXR0b25FbGVtZW50fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGUiKTt0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWhvdmVyIHVpLXN0YXRlLWFjdGl2ZSAgdWktYnV0dG9uLWljb25zLW9ubHkgdWktYnV0dG9uLWljb24tb25seSB1aS1idXR0b24tdGV4dC1pY29ucyB1aS1idXR0b24tdGV4dC1pY29uLXByaW1hcnkgdWktYnV0dG9uLXRleHQtaWNvbi1zZWNvbmRhcnkgdWktYnV0dG9uLXRleHQtb25seSIpLnJlbW92ZUF0dHIoInJvbGUiKS5yZW1vdmVBdHRyKCJhcmlhLXByZXNzZWQiKS5odG1sKHRoaXMuYnV0dG9uRWxlbWVudC5maW5kKCIudWktYnV0dG9uLXRleHQiKS5odG1sKCkpOwp0aGlzLmhhc1RpdGxlfHx0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cigidGl0bGUiKTthLldpZGdldC5wcm90b3R5cGUuZGVzdHJveS5jYWxsKHRoaXMpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGcsZSl7YS5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKGc9PT0iZGlzYWJsZWQiKWU/dGhpcy5lbGVtZW50LmF0dHIoImRpc2FibGVkIix0cnVlKTp0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cigiZGlzYWJsZWQiKTt0aGlzLl9yZXNldEJ1dHRvbigpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcy5lbGVtZW50LmlzKCI6ZGlzYWJsZWQiKTtnIT09dGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLl9zZXRPcHRpb24oImRpc2FibGVkIixnKTtpZih0aGlzLnR5cGU9PT0icmFkaW8iKWYodGhpcy5lbGVtZW50WzBdKS5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS5pcygiOmNoZWNrZWQiKT9hKHRoaXMpLmJ1dHRvbigid2lkZ2V0IikuYWRkQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpLmF0dHIoImFyaWEtcHJlc3NlZCIsCnRydWUpOmEodGhpcykuYnV0dG9uKCJ3aWRnZXQiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtYWN0aXZlIikuYXR0cigiYXJpYS1wcmVzc2VkIixmYWxzZSl9KTtlbHNlIGlmKHRoaXMudHlwZT09PSJjaGVja2JveCIpdGhpcy5lbGVtZW50LmlzKCI6Y2hlY2tlZCIpP3RoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIikuYXR0cigiYXJpYS1wcmVzc2VkIix0cnVlKTp0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpLmF0dHIoImFyaWEtcHJlc3NlZCIsZmFsc2UpfSxfcmVzZXRCdXR0b246ZnVuY3Rpb24oKXtpZih0aGlzLnR5cGU9PT0iaW5wdXQiKXRoaXMub3B0aW9ucy5sYWJlbCYmdGhpcy5lbGVtZW50LnZhbCh0aGlzLm9wdGlvbnMubGFiZWwpO2Vsc2V7dmFyIGc9dGhpcy5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1idXR0b24taWNvbnMtb25seSB1aS1idXR0b24taWNvbi1vbmx5IHVpLWJ1dHRvbi10ZXh0LWljb25zIHVpLWJ1dHRvbi10ZXh0LWljb24tcHJpbWFyeSB1aS1idXR0b24tdGV4dC1pY29uLXNlY29uZGFyeSB1aS1idXR0b24tdGV4dC1vbmx5IiksCmU9YSgiPHNwYW4+PC9zcGFuPiIpLmFkZENsYXNzKCJ1aS1idXR0b24tdGV4dCIpLmh0bWwodGhpcy5vcHRpb25zLmxhYmVsKS5hcHBlbmRUbyhnLmVtcHR5KCkpLnRleHQoKSxpPXRoaXMub3B0aW9ucy5pY29ucyxiPWkucHJpbWFyeSYmaS5zZWNvbmRhcnksaD1bXTtpZihpLnByaW1hcnl8fGkuc2Vjb25kYXJ5KXtpZih0aGlzLm9wdGlvbnMudGV4dCloLnB1c2goInVpLWJ1dHRvbi10ZXh0LWljb24iKyhiPyJzIjppLnByaW1hcnk/Ii1wcmltYXJ5IjoiLXNlY29uZGFyeSIpKTtpLnByaW1hcnkmJmcucHJlcGVuZCgiPHNwYW4gY2xhc3M9J3VpLWJ1dHRvbi1pY29uLXByaW1hcnkgdWktaWNvbiAiK2kucHJpbWFyeSsiJz48L3NwYW4+Iik7aS5zZWNvbmRhcnkmJmcuYXBwZW5kKCI8c3BhbiBjbGFzcz0ndWktYnV0dG9uLWljb24tc2Vjb25kYXJ5IHVpLWljb24gIitpLnNlY29uZGFyeSsiJz48L3NwYW4+Iik7aWYoIXRoaXMub3B0aW9ucy50ZXh0KXtoLnB1c2goYj8idWktYnV0dG9uLWljb25zLW9ubHkiOgoidWktYnV0dG9uLWljb24tb25seSIpO3RoaXMuaGFzVGl0bGV8fGcuYXR0cigidGl0bGUiLGUpfX1lbHNlIGgucHVzaCgidWktYnV0dG9uLXRleHQtb25seSIpO2cuYWRkQ2xhc3MoaC5qb2luKCIgIikpfX19KTthLndpZGdldCgidWkuYnV0dG9uc2V0Iix7b3B0aW9uczp7aXRlbXM6IjpidXR0b24sIDpzdWJtaXQsIDpyZXNldCwgOmNoZWNrYm94LCA6cmFkaW8sIGEsIDpkYXRhKGJ1dHRvbikifSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1idXR0b25zZXQiKX0sX2luaXQ6ZnVuY3Rpb24oKXt0aGlzLnJlZnJlc2goKX0sX3NldE9wdGlvbjpmdW5jdGlvbihnLGUpe2c9PT0iZGlzYWJsZWQiJiZ0aGlzLmJ1dHRvbnMuYnV0dG9uKCJvcHRpb24iLGcsZSk7YS5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5idXR0b25zPXRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZmlsdGVyKCI6dWktYnV0dG9uIikuYnV0dG9uKCJyZWZyZXNoIikuZW5kKCkubm90KCI6dWktYnV0dG9uIikuYnV0dG9uKCkuZW5kKCkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGEodGhpcykuYnV0dG9uKCJ3aWRnZXQiKVswXX0pLnJlbW92ZUNsYXNzKCJ1aS1jb3JuZXItYWxsIHVpLWNvcm5lci1sZWZ0IHVpLWNvcm5lci1yaWdodCIpLmZpbHRlcigiOmZpcnN0IikuYWRkQ2xhc3MoInVpLWNvcm5lci1sZWZ0IikuZW5kKCkuZmlsdGVyKCI6bGFzdCIpLmFkZENsYXNzKCJ1aS1jb3JuZXItcmlnaHQiKS5lbmQoKS5lbmQoKX0sCmRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLWJ1dHRvbnNldCIpO3RoaXMuYnV0dG9ucy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS5idXR0b24oIndpZGdldCIpWzBdfSkucmVtb3ZlQ2xhc3MoInVpLWNvcm5lci1sZWZ0IHVpLWNvcm5lci1yaWdodCIpLmVuZCgpLmJ1dHRvbigiZGVzdHJveSIpO2EuV2lkZ2V0LnByb3RvdHlwZS5kZXN0cm95LmNhbGwodGhpcyl9fSl9KShqUXVlcnkpOwooZnVuY3Rpb24oYSxkKXtmdW5jdGlvbiBjKCl7dGhpcy5kZWJ1Zz1mYWxzZTt0aGlzLl9jdXJJbnN0PW51bGw7dGhpcy5fa2V5RXZlbnQ9ZmFsc2U7dGhpcy5fZGlzYWJsZWRJbnB1dHM9W107dGhpcy5faW5EaWFsb2c9dGhpcy5fZGF0ZXBpY2tlclNob3dpbmc9ZmFsc2U7dGhpcy5fbWFpbkRpdklkPSJ1aS1kYXRlcGlja2VyLWRpdiI7dGhpcy5faW5saW5lQ2xhc3M9InVpLWRhdGVwaWNrZXItaW5saW5lIjt0aGlzLl9hcHBlbmRDbGFzcz0idWktZGF0ZXBpY2tlci1hcHBlbmQiO3RoaXMuX3RyaWdnZXJDbGFzcz0idWktZGF0ZXBpY2tlci10cmlnZ2VyIjt0aGlzLl9kaWFsb2dDbGFzcz0idWktZGF0ZXBpY2tlci1kaWFsb2ciO3RoaXMuX2Rpc2FibGVDbGFzcz0idWktZGF0ZXBpY2tlci1kaXNhYmxlZCI7dGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3M9InVpLWRhdGVwaWNrZXItdW5zZWxlY3RhYmxlIjt0aGlzLl9jdXJyZW50Q2xhc3M9InVpLWRhdGVwaWNrZXItY3VycmVudC1kYXkiO3RoaXMuX2RheU92ZXJDbGFzcz0KInVpLWRhdGVwaWNrZXItZGF5cy1jZWxsLW92ZXIiO3RoaXMucmVnaW9uYWw9W107dGhpcy5yZWdpb25hbFsiIl09e2Nsb3NlVGV4dDoiRG9uZSIscHJldlRleHQ6IlByZXYiLG5leHRUZXh0OiJOZXh0IixjdXJyZW50VGV4dDoiVG9kYXkiLG1vbnRoTmFtZXM6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLG1vbnRoTmFtZXNTaG9ydDpbIkphbiIsIkZlYiIsIk1hciIsIkFwciIsIk1heSIsIkp1biIsIkp1bCIsIkF1ZyIsIlNlcCIsIk9jdCIsIk5vdiIsIkRlYyJdLGRheU5hbWVzOlsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSxkYXlOYW1lc1Nob3J0OlsiU3VuIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0Il0sZGF5TmFtZXNNaW46WyJTdSIsCiJNbyIsIlR1IiwiV2UiLCJUaCIsIkZyIiwiU2EiXSx3ZWVrSGVhZGVyOiJXayIsZGF0ZUZvcm1hdDoibW0vZGQveXkiLGZpcnN0RGF5OjAsaXNSVEw6ZmFsc2Usc2hvd01vbnRoQWZ0ZXJZZWFyOmZhbHNlLHllYXJTdWZmaXg6IiJ9O3RoaXMuX2RlZmF1bHRzPXtzaG93T246ImZvY3VzIixzaG93QW5pbToiZmFkZUluIixzaG93T3B0aW9uczp7fSxkZWZhdWx0RGF0ZTpudWxsLGFwcGVuZFRleHQ6IiIsYnV0dG9uVGV4dDoiLi4uIixidXR0b25JbWFnZToiIixidXR0b25JbWFnZU9ubHk6ZmFsc2UsaGlkZUlmTm9QcmV2TmV4dDpmYWxzZSxuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0OmZhbHNlLGdvdG9DdXJyZW50OmZhbHNlLGNoYW5nZU1vbnRoOmZhbHNlLGNoYW5nZVllYXI6ZmFsc2UseWVhclJhbmdlOiJjLTEwOmMrMTAiLHNob3dPdGhlck1vbnRoczpmYWxzZSxzZWxlY3RPdGhlck1vbnRoczpmYWxzZSxzaG93V2VlazpmYWxzZSxjYWxjdWxhdGVXZWVrOnRoaXMuaXNvODYwMVdlZWssc2hvcnRZZWFyQ3V0b2ZmOiIrMTAiLAptaW5EYXRlOm51bGwsbWF4RGF0ZTpudWxsLGR1cmF0aW9uOiJmYXN0IixiZWZvcmVTaG93RGF5Om51bGwsYmVmb3JlU2hvdzpudWxsLG9uU2VsZWN0Om51bGwsb25DaGFuZ2VNb250aFllYXI6bnVsbCxvbkNsb3NlOm51bGwsbnVtYmVyT2ZNb250aHM6MSxzaG93Q3VycmVudEF0UG9zOjAsc3RlcE1vbnRoczoxLHN0ZXBCaWdNb250aHM6MTIsYWx0RmllbGQ6IiIsYWx0Rm9ybWF0OiIiLGNvbnN0cmFpbklucHV0OnRydWUsc2hvd0J1dHRvblBhbmVsOmZhbHNlLGF1dG9TaXplOmZhbHNlfTthLmV4dGVuZCh0aGlzLl9kZWZhdWx0cyx0aGlzLnJlZ2lvbmFsWyIiXSk7dGhpcy5kcERpdj1mKGEoJzxkaXYgaWQ9IicrdGhpcy5fbWFpbkRpdklkKyciIGNsYXNzPSJ1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCI+PC9kaXY+JykpfWZ1bmN0aW9uIGYoYil7cmV0dXJuIGIuZGVsZWdhdGUoImJ1dHRvbiwgLnVpLWRhdGVwaWNrZXItcHJldiwgLnVpLWRhdGVwaWNrZXItbmV4dCwgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYSIsCiJtb3VzZW91dCIsZnVuY3Rpb24oKXthKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpO3RoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItcHJldiIpIT0tMSYmYSh0aGlzKS5yZW1vdmVDbGFzcygidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIik7dGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikhPS0xJiZhKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXIiKX0pLmRlbGVnYXRlKCJidXR0b24sIC51aS1kYXRlcGlja2VyLXByZXYsIC51aS1kYXRlcGlja2VyLW5leHQsIC51aS1kYXRlcGlja2VyLWNhbGVuZGFyIHRkIGEiLCJtb3VzZW92ZXIiLGZ1bmN0aW9uKCl7aWYoIWEuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoaS5pbmxpbmU/Yi5wYXJlbnQoKVswXTppLmlucHV0WzBdKSl7YSh0aGlzKS5wYXJlbnRzKCIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIpLmZpbmQoImEiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTsKYSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKTt0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLXByZXYiKSE9LTEmJmEodGhpcykuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlciIpO3RoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItbmV4dCIpIT0tMSYmYSh0aGlzKS5hZGRDbGFzcygidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyIil9fSl9ZnVuY3Rpb24gZyhiLGgpe2EuZXh0ZW5kKGIsaCk7Zm9yKHZhciBqIGluIGgpaWYoaFtqXT09bnVsbHx8aFtqXT09ZCliW2pdPWhbal07cmV0dXJuIGJ9YS5leHRlbmQoYS51aSx7ZGF0ZXBpY2tlcjp7dmVyc2lvbjoiMS44LjEzIn19KTt2YXIgZT0obmV3IERhdGUpLmdldFRpbWUoKSxpO2EuZXh0ZW5kKGMucHJvdG90eXBlLHttYXJrZXJDbGFzc05hbWU6Imhhc0RhdGVwaWNrZXIiLGxvZzpmdW5jdGlvbigpe3RoaXMuZGVidWcmJmNvbnNvbGUubG9nLmFwcGx5KCIiLGFyZ3VtZW50cyl9LApfd2lkZ2V0RGF0ZXBpY2tlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRwRGl2fSxzZXREZWZhdWx0czpmdW5jdGlvbihiKXtnKHRoaXMuX2RlZmF1bHRzLGJ8fHt9KTtyZXR1cm4gdGhpc30sX2F0dGFjaERhdGVwaWNrZXI6ZnVuY3Rpb24oYixoKXt2YXIgaj1udWxsO2Zvcih2YXIgbCBpbiB0aGlzLl9kZWZhdWx0cyl7dmFyIG89Yi5nZXRBdHRyaWJ1dGUoImRhdGU6IitsKTtpZihvKXtqPWp8fHt9O3RyeXtqW2xdPWV2YWwobyl9Y2F0Y2gobil7altsXT1vfX19bD1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7bz1sPT0iZGl2Inx8bD09InNwYW4iO2lmKCFiLmlkKXt0aGlzLnV1aWQrPTE7Yi5pZD0iZHAiK3RoaXMudXVpZH12YXIgaz10aGlzLl9uZXdJbnN0KGEoYiksbyk7ay5zZXR0aW5ncz1hLmV4dGVuZCh7fSxofHx7fSxqfHx7fSk7aWYobD09ImlucHV0Iil0aGlzLl9jb25uZWN0RGF0ZXBpY2tlcihiLGspO2Vsc2UgbyYmdGhpcy5faW5saW5lRGF0ZXBpY2tlcihiLGspfSxfbmV3SW5zdDpmdW5jdGlvbihiLApoKXtyZXR1cm57aWQ6YlswXS5pZC5yZXBsYWNlKC8oW15BLVphLXowLTlfLV0pL2csIlxcXFwkMSIpLGlucHV0OmIsc2VsZWN0ZWREYXk6MCxzZWxlY3RlZE1vbnRoOjAsc2VsZWN0ZWRZZWFyOjAsZHJhd01vbnRoOjAsZHJhd1llYXI6MCxpbmxpbmU6aCxkcERpdjohaD90aGlzLmRwRGl2OmYoYSgnPGRpdiBjbGFzcz0iJyt0aGlzLl9pbmxpbmVDbGFzcysnIHVpLWRhdGVwaWNrZXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCB1aS1jb3JuZXItYWxsIj48L2Rpdj4nKSl9fSxfY29ubmVjdERhdGVwaWNrZXI6ZnVuY3Rpb24oYixoKXt2YXIgaj1hKGIpO2guYXBwZW5kPWEoW10pO2gudHJpZ2dlcj1hKFtdKTtpZighai5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3RoaXMuX2F0dGFjaG1lbnRzKGosaCk7ai5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkua2V5ZG93bih0aGlzLl9kb0tleURvd24pLmtleXByZXNzKHRoaXMuX2RvS2V5UHJlc3MpLmtleXVwKHRoaXMuX2RvS2V5VXApLmJpbmQoInNldERhdGEuZGF0ZXBpY2tlciIsCmZ1bmN0aW9uKGwsbyxuKXtoLnNldHRpbmdzW29dPW59KS5iaW5kKCJnZXREYXRhLmRhdGVwaWNrZXIiLGZ1bmN0aW9uKGwsbyl7cmV0dXJuIHRoaXMuX2dldChoLG8pfSk7dGhpcy5fYXV0b1NpemUoaCk7YS5kYXRhKGIsImRhdGVwaWNrZXIiLGgpfX0sX2F0dGFjaG1lbnRzOmZ1bmN0aW9uKGIsaCl7dmFyIGo9dGhpcy5fZ2V0KGgsImFwcGVuZFRleHQiKSxsPXRoaXMuX2dldChoLCJpc1JUTCIpO2guYXBwZW5kJiZoLmFwcGVuZC5yZW1vdmUoKTtpZihqKXtoLmFwcGVuZD1hKCc8c3BhbiBjbGFzcz0iJyt0aGlzLl9hcHBlbmRDbGFzcysnIj4nK2orIjwvc3Bhbj4iKTtiW2w/ImJlZm9yZSI6ImFmdGVyIl0oaC5hcHBlbmQpfWIudW5iaW5kKCJmb2N1cyIsdGhpcy5fc2hvd0RhdGVwaWNrZXIpO2gudHJpZ2dlciYmaC50cmlnZ2VyLnJlbW92ZSgpO2o9dGhpcy5fZ2V0KGgsInNob3dPbiIpO2lmKGo9PSJmb2N1cyJ8fGo9PSJib3RoIiliLmZvY3VzKHRoaXMuX3Nob3dEYXRlcGlja2VyKTsKaWYoaj09ImJ1dHRvbiJ8fGo9PSJib3RoIil7aj10aGlzLl9nZXQoaCwiYnV0dG9uVGV4dCIpO3ZhciBvPXRoaXMuX2dldChoLCJidXR0b25JbWFnZSIpO2gudHJpZ2dlcj1hKHRoaXMuX2dldChoLCJidXR0b25JbWFnZU9ubHkiKT9hKCI8aW1nLz4iKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmF0dHIoe3NyYzpvLGFsdDpqLHRpdGxlOmp9KTphKCc8YnV0dG9uIHR5cGU9ImJ1dHRvbiI+PC9idXR0b24+JykuYWRkQ2xhc3ModGhpcy5fdHJpZ2dlckNsYXNzKS5odG1sKG89PSIiP2o6YSgiPGltZy8+IikuYXR0cih7c3JjOm8sYWx0OmosdGl0bGU6an0pKSk7YltsPyJiZWZvcmUiOiJhZnRlciJdKGgudHJpZ2dlcik7aC50cmlnZ2VyLmNsaWNrKGZ1bmN0aW9uKCl7YS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmYS5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9PWJbMF0/YS5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOmEuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIoYlswXSk7CnJldHVybiBmYWxzZX0pfX0sX2F1dG9TaXplOmZ1bmN0aW9uKGIpe2lmKHRoaXMuX2dldChiLCJhdXRvU2l6ZSIpJiYhYi5pbmxpbmUpe3ZhciBoPW5ldyBEYXRlKDIwMDksMTEsMjApLGo9dGhpcy5fZ2V0KGIsImRhdGVGb3JtYXQiKTtpZihqLm1hdGNoKC9bRE1dLykpe3ZhciBsPWZ1bmN0aW9uKG8pe2Zvcih2YXIgbj0wLGs9MCxtPTA7bTxvLmxlbmd0aDttKyspaWYob1ttXS5sZW5ndGg+bil7bj1vW21dLmxlbmd0aDtrPW19cmV0dXJuIGt9O2guc2V0TW9udGgobCh0aGlzLl9nZXQoYixqLm1hdGNoKC9NTS8pPyJtb250aE5hbWVzIjoibW9udGhOYW1lc1Nob3J0IikpKTtoLnNldERhdGUobCh0aGlzLl9nZXQoYixqLm1hdGNoKC9ERC8pPyJkYXlOYW1lcyI6ImRheU5hbWVzU2hvcnQiKSkrMjAtaC5nZXREYXkoKSl9Yi5pbnB1dC5hdHRyKCJzaXplIix0aGlzLl9mb3JtYXREYXRlKGIsaCkubGVuZ3RoKX19LF9pbmxpbmVEYXRlcGlja2VyOmZ1bmN0aW9uKGIsaCl7dmFyIGo9YShiKTsKaWYoIWouaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtqLmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5hcHBlbmQoaC5kcERpdikuYmluZCgic2V0RGF0YS5kYXRlcGlja2VyIixmdW5jdGlvbihsLG8sbil7aC5zZXR0aW5nc1tvXT1ufSkuYmluZCgiZ2V0RGF0YS5kYXRlcGlja2VyIixmdW5jdGlvbihsLG8pe3JldHVybiB0aGlzLl9nZXQoaCxvKX0pO2EuZGF0YShiLCJkYXRlcGlja2VyIixoKTt0aGlzLl9zZXREYXRlKGgsdGhpcy5fZ2V0RGVmYXVsdERhdGUoaCksdHJ1ZSk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihoKTt0aGlzLl91cGRhdGVBbHRlcm5hdGUoaCk7aC5kcERpdi5zaG93KCl9fSxfZGlhbG9nRGF0ZXBpY2tlcjpmdW5jdGlvbihiLGgsaixsLG8pe2I9dGhpcy5fZGlhbG9nSW5zdDtpZighYil7dGhpcy51dWlkKz0xO3RoaXMuX2RpYWxvZ0lucHV0PWEoJzxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iJysoImRwIit0aGlzLnV1aWQpKyciIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogLTEwMHB4OyB3aWR0aDogMHB4OyB6LWluZGV4OiAtMTA7Ii8+Jyk7CnRoaXMuX2RpYWxvZ0lucHV0LmtleWRvd24odGhpcy5fZG9LZXlEb3duKTthKCJib2R5IikuYXBwZW5kKHRoaXMuX2RpYWxvZ0lucHV0KTtiPXRoaXMuX2RpYWxvZ0luc3Q9dGhpcy5fbmV3SW5zdCh0aGlzLl9kaWFsb2dJbnB1dCxmYWxzZSk7Yi5zZXR0aW5ncz17fTthLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sImRhdGVwaWNrZXIiLGIpfWcoYi5zZXR0aW5ncyxsfHx7fSk7aD1oJiZoLmNvbnN0cnVjdG9yPT1EYXRlP3RoaXMuX2Zvcm1hdERhdGUoYixoKTpoO3RoaXMuX2RpYWxvZ0lucHV0LnZhbChoKTt0aGlzLl9wb3M9bz9vLmxlbmd0aD9vOltvLnBhZ2VYLG8ucGFnZVldOm51bGw7aWYoIXRoaXMuX3Bvcyl0aGlzLl9wb3M9W2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aC8yLTEwMCsoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCksZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodC8KMi0xNTArKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKV07dGhpcy5fZGlhbG9nSW5wdXQuY3NzKCJsZWZ0Iix0aGlzLl9wb3NbMF0rMjArInB4IikuY3NzKCJ0b3AiLHRoaXMuX3Bvc1sxXSsicHgiKTtiLnNldHRpbmdzLm9uU2VsZWN0PWo7dGhpcy5faW5EaWFsb2c9dHJ1ZTt0aGlzLmRwRGl2LmFkZENsYXNzKHRoaXMuX2RpYWxvZ0NsYXNzKTt0aGlzLl9zaG93RGF0ZXBpY2tlcih0aGlzLl9kaWFsb2dJbnB1dFswXSk7YS5ibG9ja1VJJiZhLmJsb2NrVUkodGhpcy5kcERpdik7YS5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLCJkYXRlcGlja2VyIixiKTtyZXR1cm4gdGhpc30sX2Rlc3Ryb3lEYXRlcGlja2VyOmZ1bmN0aW9uKGIpe3ZhciBoPWEoYiksaj1hLmRhdGEoYiwiZGF0ZXBpY2tlciIpO2lmKGguaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXt2YXIgbD1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7YS5yZW1vdmVEYXRhKGIsCiJkYXRlcGlja2VyIik7aWYobD09ImlucHV0Iil7ai5hcHBlbmQucmVtb3ZlKCk7ai50cmlnZ2VyLnJlbW92ZSgpO2gucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLnVuYmluZCgiZm9jdXMiLHRoaXMuX3Nob3dEYXRlcGlja2VyKS51bmJpbmQoImtleWRvd24iLHRoaXMuX2RvS2V5RG93bikudW5iaW5kKCJrZXlwcmVzcyIsdGhpcy5fZG9LZXlQcmVzcykudW5iaW5kKCJrZXl1cCIsdGhpcy5fZG9LZXlVcCl9ZWxzZSBpZihsPT0iZGl2Inx8bD09InNwYW4iKWgucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmVtcHR5KCl9fSxfZW5hYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbihiKXt2YXIgaD1hKGIpLGo9YS5kYXRhKGIsImRhdGVwaWNrZXIiKTtpZihoLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7dmFyIGw9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKGw9PSJpbnB1dCIpe2IuZGlzYWJsZWQ9ZmFsc2U7ai50cmlnZ2VyLmZpbHRlcigiYnV0dG9uIikuZWFjaChmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9CmZhbHNlfSkuZW5kKCkuZmlsdGVyKCJpbWciKS5jc3Moe29wYWNpdHk6IjEuMCIsY3Vyc29yOiIifSl9ZWxzZSBpZihsPT0iZGl2Inx8bD09InNwYW4iKXtoPWguY2hpbGRyZW4oIi4iK3RoaXMuX2lubGluZUNsYXNzKTtoLmNoaWxkcmVuKCkucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIik7aC5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLnJlbW92ZUF0dHIoImRpc2FibGVkIil9dGhpcy5fZGlzYWJsZWRJbnB1dHM9YS5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsZnVuY3Rpb24obyl7cmV0dXJuIG89PWI/bnVsbDpvfSl9fSxfZGlzYWJsZURhdGVwaWNrZXI6ZnVuY3Rpb24oYil7dmFyIGg9YShiKSxqPWEuZGF0YShiLCJkYXRlcGlja2VyIik7aWYoaC5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3ZhciBsPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihsPT0iaW5wdXQiKXtiLmRpc2FibGVkPQp0cnVlO2oudHJpZ2dlci5maWx0ZXIoImJ1dHRvbiIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPXRydWV9KS5lbmQoKS5maWx0ZXIoImltZyIpLmNzcyh7b3BhY2l0eToiMC41IixjdXJzb3I6ImRlZmF1bHQifSl9ZWxzZSBpZihsPT0iZGl2Inx8bD09InNwYW4iKXtoPWguY2hpbGRyZW4oIi4iK3RoaXMuX2lubGluZUNsYXNzKTtoLmNoaWxkcmVuKCkuYWRkQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIik7aC5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhciIpLmF0dHIoImRpc2FibGVkIiwiZGlzYWJsZWQiKX10aGlzLl9kaXNhYmxlZElucHV0cz1hLm1hcCh0aGlzLl9kaXNhYmxlZElucHV0cyxmdW5jdGlvbihvKXtyZXR1cm4gbz09Yj9udWxsOm99KTt0aGlzLl9kaXNhYmxlZElucHV0c1t0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGhdPWJ9fSxfaXNEaXNhYmxlZERhdGVwaWNrZXI6ZnVuY3Rpb24oYil7aWYoIWIpcmV0dXJuIGZhbHNlOwpmb3IodmFyIGg9MDtoPHRoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aDtoKyspaWYodGhpcy5fZGlzYWJsZWRJbnB1dHNbaF09PWIpcmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlfSxfZ2V0SW5zdDpmdW5jdGlvbihiKXt0cnl7cmV0dXJuIGEuZGF0YShiLCJkYXRlcGlja2VyIil9Y2F0Y2goaCl7dGhyb3ciTWlzc2luZyBpbnN0YW5jZSBkYXRhIGZvciB0aGlzIGRhdGVwaWNrZXIiO319LF9vcHRpb25EYXRlcGlja2VyOmZ1bmN0aW9uKGIsaCxqKXt2YXIgbD10aGlzLl9nZXRJbnN0KGIpO2lmKGFyZ3VtZW50cy5sZW5ndGg9PTImJnR5cGVvZiBoPT0ic3RyaW5nIilyZXR1cm4gaD09ImRlZmF1bHRzIj9hLmV4dGVuZCh7fSxhLmRhdGVwaWNrZXIuX2RlZmF1bHRzKTpsP2g9PSJhbGwiP2EuZXh0ZW5kKHt9LGwuc2V0dGluZ3MpOnRoaXMuX2dldChsLGgpOm51bGw7dmFyIG89aHx8e307aWYodHlwZW9mIGg9PSJzdHJpbmciKXtvPXt9O29baF09an1pZihsKXt0aGlzLl9jdXJJbnN0PT1sJiYKdGhpcy5faGlkZURhdGVwaWNrZXIoKTt2YXIgbj10aGlzLl9nZXREYXRlRGF0ZXBpY2tlcihiLHRydWUpLGs9dGhpcy5fZ2V0TWluTWF4RGF0ZShsLCJtaW4iKSxtPXRoaXMuX2dldE1pbk1heERhdGUobCwibWF4Iik7ZyhsLnNldHRpbmdzLG8pO2lmKGshPT1udWxsJiZvLmRhdGVGb3JtYXQhPT1kJiZvLm1pbkRhdGU9PT1kKWwuc2V0dGluZ3MubWluRGF0ZT10aGlzLl9mb3JtYXREYXRlKGwsayk7aWYobSE9PW51bGwmJm8uZGF0ZUZvcm1hdCE9PWQmJm8ubWF4RGF0ZT09PWQpbC5zZXR0aW5ncy5tYXhEYXRlPXRoaXMuX2Zvcm1hdERhdGUobCxtKTt0aGlzLl9hdHRhY2htZW50cyhhKGIpLGwpO3RoaXMuX2F1dG9TaXplKGwpO3RoaXMuX3NldERhdGUobCxuKTt0aGlzLl91cGRhdGVBbHRlcm5hdGUobCk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihsKX19LF9jaGFuZ2VEYXRlcGlja2VyOmZ1bmN0aW9uKGIsaCxqKXt0aGlzLl9vcHRpb25EYXRlcGlja2VyKGIsaCxqKX0sX3JlZnJlc2hEYXRlcGlja2VyOmZ1bmN0aW9uKGIpeyhiPQp0aGlzLl9nZXRJbnN0KGIpKSYmdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihiKX0sX3NldERhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKGIsaCl7aWYoYj10aGlzLl9nZXRJbnN0KGIpKXt0aGlzLl9zZXREYXRlKGIsaCk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihiKTt0aGlzLl91cGRhdGVBbHRlcm5hdGUoYil9fSxfZ2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24oYixoKXsoYj10aGlzLl9nZXRJbnN0KGIpKSYmIWIuaW5saW5lJiZ0aGlzLl9zZXREYXRlRnJvbUZpZWxkKGIsaCk7cmV0dXJuIGI/dGhpcy5fZ2V0RGF0ZShiKTpudWxsfSxfZG9LZXlEb3duOmZ1bmN0aW9uKGIpe3ZhciBoPWEuZGF0ZXBpY2tlci5fZ2V0SW5zdChiLnRhcmdldCksaj10cnVlLGw9aC5kcERpdi5pcygiLnVpLWRhdGVwaWNrZXItcnRsIik7aC5fa2V5RXZlbnQ9dHJ1ZTtpZihhLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nKXN3aXRjaChiLmtleUNvZGUpe2Nhc2UgOTphLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7Cmo9ZmFsc2U7YnJlYWs7Y2FzZSAxMzpqPWEoInRkLiIrYS5kYXRlcGlja2VyLl9kYXlPdmVyQ2xhc3MrIjpub3QoLiIrYS5kYXRlcGlja2VyLl9jdXJyZW50Q2xhc3MrIikiLGguZHBEaXYpO2pbMF0/YS5kYXRlcGlja2VyLl9zZWxlY3REYXkoYi50YXJnZXQsaC5zZWxlY3RlZE1vbnRoLGguc2VsZWN0ZWRZZWFyLGpbMF0pOmEuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKTtyZXR1cm4gZmFsc2U7Y2FzZSAyNzphLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7YnJlYWs7Y2FzZSAzMzphLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoYi50YXJnZXQsYi5jdHJsS2V5Py1hLmRhdGVwaWNrZXIuX2dldChoLCJzdGVwQmlnTW9udGhzIik6LWEuZGF0ZXBpY2tlci5fZ2V0KGgsInN0ZXBNb250aHMiKSwiTSIpO2JyZWFrO2Nhc2UgMzQ6YS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGIudGFyZ2V0LGIuY3RybEtleT8rYS5kYXRlcGlja2VyLl9nZXQoaCwic3RlcEJpZ01vbnRocyIpOithLmRhdGVwaWNrZXIuX2dldChoLAoic3RlcE1vbnRocyIpLCJNIik7YnJlYWs7Y2FzZSAzNTppZihiLmN0cmxLZXl8fGIubWV0YUtleSlhLmRhdGVwaWNrZXIuX2NsZWFyRGF0ZShiLnRhcmdldCk7aj1iLmN0cmxLZXl8fGIubWV0YUtleTticmVhaztjYXNlIDM2OmlmKGIuY3RybEtleXx8Yi5tZXRhS2V5KWEuZGF0ZXBpY2tlci5fZ290b1RvZGF5KGIudGFyZ2V0KTtqPWIuY3RybEtleXx8Yi5tZXRhS2V5O2JyZWFrO2Nhc2UgMzc6aWYoYi5jdHJsS2V5fHxiLm1ldGFLZXkpYS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGIudGFyZ2V0LGw/KzE6LTEsIkQiKTtqPWIuY3RybEtleXx8Yi5tZXRhS2V5O2lmKGIub3JpZ2luYWxFdmVudC5hbHRLZXkpYS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGIudGFyZ2V0LGIuY3RybEtleT8tYS5kYXRlcGlja2VyLl9nZXQoaCwic3RlcEJpZ01vbnRocyIpOi1hLmRhdGVwaWNrZXIuX2dldChoLCJzdGVwTW9udGhzIiksIk0iKTticmVhaztjYXNlIDM4OmlmKGIuY3RybEtleXx8Yi5tZXRhS2V5KWEuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShiLnRhcmdldCwKLTcsIkQiKTtqPWIuY3RybEtleXx8Yi5tZXRhS2V5O2JyZWFrO2Nhc2UgMzk6aWYoYi5jdHJsS2V5fHxiLm1ldGFLZXkpYS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGIudGFyZ2V0LGw/LTE6KzEsIkQiKTtqPWIuY3RybEtleXx8Yi5tZXRhS2V5O2lmKGIub3JpZ2luYWxFdmVudC5hbHRLZXkpYS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGIudGFyZ2V0LGIuY3RybEtleT8rYS5kYXRlcGlja2VyLl9nZXQoaCwic3RlcEJpZ01vbnRocyIpOithLmRhdGVwaWNrZXIuX2dldChoLCJzdGVwTW9udGhzIiksIk0iKTticmVhaztjYXNlIDQwOmlmKGIuY3RybEtleXx8Yi5tZXRhS2V5KWEuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShiLnRhcmdldCwrNywiRCIpO2o9Yi5jdHJsS2V5fHxiLm1ldGFLZXk7YnJlYWs7ZGVmYXVsdDpqPWZhbHNlfWVsc2UgaWYoYi5rZXlDb2RlPT0zNiYmYi5jdHJsS2V5KWEuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodGhpcyk7ZWxzZSBqPWZhbHNlO2lmKGope2IucHJldmVudERlZmF1bHQoKTsKYi5zdG9wUHJvcGFnYXRpb24oKX19LF9kb0tleVByZXNzOmZ1bmN0aW9uKGIpe3ZhciBoPWEuZGF0ZXBpY2tlci5fZ2V0SW5zdChiLnRhcmdldCk7aWYoYS5kYXRlcGlja2VyLl9nZXQoaCwiY29uc3RyYWluSW5wdXQiKSl7aD1hLmRhdGVwaWNrZXIuX3Bvc3NpYmxlQ2hhcnMoYS5kYXRlcGlja2VyLl9nZXQoaCwiZGF0ZUZvcm1hdCIpKTt2YXIgaj1TdHJpbmcuZnJvbUNoYXJDb2RlKGIuY2hhckNvZGU9PWQ/Yi5rZXlDb2RlOmIuY2hhckNvZGUpO3JldHVybiBiLmN0cmxLZXl8fGIubWV0YUtleXx8ajwiICJ8fCFofHxoLmluZGV4T2Yoaik+LTF9fSxfZG9LZXlVcDpmdW5jdGlvbihiKXtiPWEuZGF0ZXBpY2tlci5fZ2V0SW5zdChiLnRhcmdldCk7aWYoYi5pbnB1dC52YWwoKSE9Yi5sYXN0VmFsKXRyeXtpZihhLmRhdGVwaWNrZXIucGFyc2VEYXRlKGEuZGF0ZXBpY2tlci5fZ2V0KGIsImRhdGVGb3JtYXQiKSxiLmlucHV0P2IuaW5wdXQudmFsKCk6bnVsbCxhLmRhdGVwaWNrZXIuX2dldEZvcm1hdENvbmZpZyhiKSkpe2EuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZChiKTsKYS5kYXRlcGlja2VyLl91cGRhdGVBbHRlcm5hdGUoYik7YS5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGIpfX1jYXRjaChoKXthLmRhdGVwaWNrZXIubG9nKGgpfXJldHVybiB0cnVlfSxfc2hvd0RhdGVwaWNrZXI6ZnVuY3Rpb24oYil7Yj1iLnRhcmdldHx8YjtpZihiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPSJpbnB1dCIpYj1hKCJpbnB1dCIsYi5wYXJlbnROb2RlKVswXTtpZighKGEuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoYil8fGEuZGF0ZXBpY2tlci5fbGFzdElucHV0PT1iKSl7dmFyIGg9YS5kYXRlcGlja2VyLl9nZXRJbnN0KGIpO2EuZGF0ZXBpY2tlci5fY3VySW5zdCYmYS5kYXRlcGlja2VyLl9jdXJJbnN0IT1oJiZhLmRhdGVwaWNrZXIuX2N1ckluc3QuZHBEaXYuc3RvcCh0cnVlLHRydWUpO3ZhciBqPWEuZGF0ZXBpY2tlci5fZ2V0KGgsImJlZm9yZVNob3ciKTtnKGguc2V0dGluZ3Msaj9qLmFwcGx5KGIsW2IsaF0pOnt9KTtoLmxhc3RWYWw9Cm51bGw7YS5kYXRlcGlja2VyLl9sYXN0SW5wdXQ9YjthLmRhdGVwaWNrZXIuX3NldERhdGVGcm9tRmllbGQoaCk7aWYoYS5kYXRlcGlja2VyLl9pbkRpYWxvZyliLnZhbHVlPSIiO2lmKCFhLmRhdGVwaWNrZXIuX3Bvcyl7YS5kYXRlcGlja2VyLl9wb3M9YS5kYXRlcGlja2VyLl9maW5kUG9zKGIpO2EuZGF0ZXBpY2tlci5fcG9zWzFdKz1iLm9mZnNldEhlaWdodH12YXIgbD1mYWxzZTthKGIpLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7bHw9YSh0aGlzKS5jc3MoInBvc2l0aW9uIik9PSJmaXhlZCI7cmV0dXJuIWx9KTtpZihsJiZhLmJyb3dzZXIub3BlcmEpe2EuZGF0ZXBpY2tlci5fcG9zWzBdLT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDthLmRhdGVwaWNrZXIuX3Bvc1sxXS09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcH1qPXtsZWZ0OmEuZGF0ZXBpY2tlci5fcG9zWzBdLHRvcDphLmRhdGVwaWNrZXIuX3Bvc1sxXX07YS5kYXRlcGlja2VyLl9wb3M9Cm51bGw7aC5kcERpdi5lbXB0eSgpO2guZHBEaXYuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLGRpc3BsYXk6ImJsb2NrIix0b3A6Ii0xMDAwcHgifSk7YS5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGgpO2o9YS5kYXRlcGlja2VyLl9jaGVja09mZnNldChoLGosbCk7aC5kcERpdi5jc3Moe3Bvc2l0aW9uOmEuZGF0ZXBpY2tlci5faW5EaWFsb2cmJmEuYmxvY2tVST8ic3RhdGljIjpsPyJmaXhlZCI6ImFic29sdXRlIixkaXNwbGF5OiJub25lIixsZWZ0OmoubGVmdCsicHgiLHRvcDpqLnRvcCsicHgifSk7aWYoIWguaW5saW5lKXtqPWEuZGF0ZXBpY2tlci5fZ2V0KGgsInNob3dBbmltIik7dmFyIG89YS5kYXRlcGlja2VyLl9nZXQoaCwiZHVyYXRpb24iKSxuPWZ1bmN0aW9uKCl7dmFyIGs9aC5kcERpdi5maW5kKCJpZnJhbWUudWktZGF0ZXBpY2tlci1jb3ZlciIpO2lmKGsubGVuZ3RoKXt2YXIgbT1hLmRhdGVwaWNrZXIuX2dldEJvcmRlcnMoaC5kcERpdik7ay5jc3Moe2xlZnQ6LW1bMF0sCnRvcDotbVsxXSx3aWR0aDpoLmRwRGl2Lm91dGVyV2lkdGgoKSxoZWlnaHQ6aC5kcERpdi5vdXRlckhlaWdodCgpfSl9fTtoLmRwRGl2LnpJbmRleChhKGIpLnpJbmRleCgpKzEpO2EuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmc9dHJ1ZTthLmVmZmVjdHMmJmEuZWZmZWN0c1tqXT9oLmRwRGl2LnNob3coaixhLmRhdGVwaWNrZXIuX2dldChoLCJzaG93T3B0aW9ucyIpLG8sbik6aC5kcERpdltqfHwic2hvdyJdKGo/bzpudWxsLG4pO2lmKCFqfHwhbyluKCk7aC5pbnB1dC5pcygiOnZpc2libGUiKSYmIWguaW5wdXQuaXMoIjpkaXNhYmxlZCIpJiZoLmlucHV0LmZvY3VzKCk7YS5kYXRlcGlja2VyLl9jdXJJbnN0PWh9fX0sX3VwZGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24oYil7dmFyIGg9YS5kYXRlcGlja2VyLl9nZXRCb3JkZXJzKGIuZHBEaXYpO2k9YjtiLmRwRGl2LmVtcHR5KCkuYXBwZW5kKHRoaXMuX2dlbmVyYXRlSFRNTChiKSk7dmFyIGo9Yi5kcERpdi5maW5kKCJpZnJhbWUudWktZGF0ZXBpY2tlci1jb3ZlciIpOwpqLmxlbmd0aCYmai5jc3Moe2xlZnQ6LWhbMF0sdG9wOi1oWzFdLHdpZHRoOmIuZHBEaXYub3V0ZXJXaWR0aCgpLGhlaWdodDpiLmRwRGl2Lm91dGVySGVpZ2h0KCl9KTtiLmRwRGl2LmZpbmQoIi4iK3RoaXMuX2RheU92ZXJDbGFzcysiIGEiKS5tb3VzZW92ZXIoKTtoPXRoaXMuX2dldE51bWJlck9mTW9udGhzKGIpO2o9aFsxXTtiLmRwRGl2LnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW11bHRpLTIgdWktZGF0ZXBpY2tlci1tdWx0aS0zIHVpLWRhdGVwaWNrZXItbXVsdGktNCIpLndpZHRoKCIiKTtqPjEmJmIuZHBEaXYuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbXVsdGktIitqKS5jc3MoIndpZHRoIiwxNypqKyJlbSIpO2IuZHBEaXZbKGhbMF0hPTF8fGhbMV0hPTE/ImFkZCI6InJlbW92ZSIpKyJDbGFzcyJdKCJ1aS1kYXRlcGlja2VyLW11bHRpIik7Yi5kcERpdlsodGhpcy5fZ2V0KGIsImlzUlRMIik/ImFkZCI6InJlbW92ZSIpKyJDbGFzcyJdKCJ1aS1kYXRlcGlja2VyLXJ0bCIpOwpiPT1hLmRhdGVwaWNrZXIuX2N1ckluc3QmJmEuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJmIuaW5wdXQmJmIuaW5wdXQuaXMoIjp2aXNpYmxlIikmJiFiLmlucHV0LmlzKCI6ZGlzYWJsZWQiKSYmYi5pbnB1dFswXSE9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmYi5pbnB1dC5mb2N1cygpO2lmKGIueWVhcnNodG1sKXt2YXIgbD1iLnllYXJzaHRtbDtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bD09PWIueWVhcnNodG1sJiZiLnllYXJzaHRtbCYmYi5kcERpdi5maW5kKCJzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyOmZpcnN0IikucmVwbGFjZVdpdGgoYi55ZWFyc2h0bWwpO2w9Yi55ZWFyc2h0bWw9bnVsbH0sMCl9fSxfZ2V0Qm9yZGVyczpmdW5jdGlvbihiKXt2YXIgaD1mdW5jdGlvbihqKXtyZXR1cm57dGhpbjoxLG1lZGl1bToyLHRoaWNrOjN9W2pdfHxqfTtyZXR1cm5bcGFyc2VGbG9hdChoKGIuY3NzKCJib3JkZXItbGVmdC13aWR0aCIpKSkscGFyc2VGbG9hdChoKGIuY3NzKCJib3JkZXItdG9wLXdpZHRoIikpKV19LApfY2hlY2tPZmZzZXQ6ZnVuY3Rpb24oYixoLGope3ZhciBsPWIuZHBEaXYub3V0ZXJXaWR0aCgpLG89Yi5kcERpdi5vdXRlckhlaWdodCgpLG49Yi5pbnB1dD9iLmlucHV0Lm91dGVyV2lkdGgoKTowLGs9Yi5pbnB1dD9iLmlucHV0Lm91dGVySGVpZ2h0KCk6MCxtPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCthKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkscD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0K2EoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO2gubGVmdC09dGhpcy5fZ2V0KGIsImlzUlRMIik/bC1uOjA7aC5sZWZ0LT1qJiZoLmxlZnQ9PWIuaW5wdXQub2Zmc2V0KCkubGVmdD9hKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCk6MDtoLnRvcC09aiYmaC50b3A9PWIuaW5wdXQub2Zmc2V0KCkudG9wK2s/YShkb2N1bWVudCkuc2Nyb2xsVG9wKCk6MDtoLmxlZnQtPU1hdGgubWluKGgubGVmdCxoLmxlZnQrbD5tJiZtPmw/TWF0aC5hYnMoaC5sZWZ0K2wtCm0pOjApO2gudG9wLT1NYXRoLm1pbihoLnRvcCxoLnRvcCtvPnAmJnA+bz9NYXRoLmFicyhvK2spOjApO3JldHVybiBofSxfZmluZFBvczpmdW5jdGlvbihiKXtmb3IodmFyIGg9dGhpcy5fZ2V0KHRoaXMuX2dldEluc3QoYiksImlzUlRMIik7YiYmKGIudHlwZT09ImhpZGRlbiJ8fGIubm9kZVR5cGUhPTF8fGEuZXhwci5maWx0ZXJzLmhpZGRlbihiKSk7KWI9YltoPyJwcmV2aW91c1NpYmxpbmciOiJuZXh0U2libGluZyJdO2I9YShiKS5vZmZzZXQoKTtyZXR1cm5bYi5sZWZ0LGIudG9wXX0sX2hpZGVEYXRlcGlja2VyOmZ1bmN0aW9uKGIpe3ZhciBoPXRoaXMuX2N1ckluc3Q7aWYoISghaHx8YiYmaCE9YS5kYXRhKGIsImRhdGVwaWNrZXIiKSkpaWYodGhpcy5fZGF0ZXBpY2tlclNob3dpbmcpe2I9dGhpcy5fZ2V0KGgsInNob3dBbmltIik7dmFyIGo9dGhpcy5fZ2V0KGgsImR1cmF0aW9uIiksbD1mdW5jdGlvbigpe2EuZGF0ZXBpY2tlci5fdGlkeURpYWxvZyhoKTt0aGlzLl9jdXJJbnN0PQpudWxsfTthLmVmZmVjdHMmJmEuZWZmZWN0c1tiXT9oLmRwRGl2LmhpZGUoYixhLmRhdGVwaWNrZXIuX2dldChoLCJzaG93T3B0aW9ucyIpLGosbCk6aC5kcERpdltiPT0ic2xpZGVEb3duIj8ic2xpZGVVcCI6Yj09ImZhZGVJbiI/ImZhZGVPdXQiOiJoaWRlIl0oYj9qOm51bGwsbCk7Ynx8bCgpO2lmKGI9dGhpcy5fZ2V0KGgsIm9uQ2xvc2UiKSliLmFwcGx5KGguaW5wdXQ/aC5pbnB1dFswXTpudWxsLFtoLmlucHV0P2guaW5wdXQudmFsKCk6IiIsaF0pO3RoaXMuX2RhdGVwaWNrZXJTaG93aW5nPWZhbHNlO3RoaXMuX2xhc3RJbnB1dD1udWxsO2lmKHRoaXMuX2luRGlhbG9nKXt0aGlzLl9kaWFsb2dJbnB1dC5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDoiMCIsdG9wOiItMTAwcHgifSk7aWYoYS5ibG9ja1VJKXthLnVuYmxvY2tVSSgpO2EoImJvZHkiKS5hcHBlbmQodGhpcy5kcERpdil9fXRoaXMuX2luRGlhbG9nPWZhbHNlfX0sX3RpZHlEaWFsb2c6ZnVuY3Rpb24oYil7Yi5kcERpdi5yZW1vdmVDbGFzcyh0aGlzLl9kaWFsb2dDbGFzcykudW5iaW5kKCIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIpfSwKX2NoZWNrRXh0ZXJuYWxDbGljazpmdW5jdGlvbihiKXtpZihhLmRhdGVwaWNrZXIuX2N1ckluc3Qpe2I9YShiLnRhcmdldCk7YlswXS5pZCE9YS5kYXRlcGlja2VyLl9tYWluRGl2SWQmJmIucGFyZW50cygiIyIrYS5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aD09MCYmIWIuaGFzQ2xhc3MoYS5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkmJiFiLmhhc0NsYXNzKGEuZGF0ZXBpY2tlci5fdHJpZ2dlckNsYXNzKSYmYS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmIShhLmRhdGVwaWNrZXIuX2luRGlhbG9nJiZhLmJsb2NrVUkpJiZhLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9fSxfYWRqdXN0RGF0ZTpmdW5jdGlvbihiLGgsail7Yj1hKGIpO3ZhciBsPXRoaXMuX2dldEluc3QoYlswXSk7aWYoIXRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKGJbMF0pKXt0aGlzLl9hZGp1c3RJbnN0RGF0ZShsLGgrKGo9PSJNIj90aGlzLl9nZXQobCwic2hvd0N1cnJlbnRBdFBvcyIpOgowKSxqKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGwpfX0sX2dvdG9Ub2RheTpmdW5jdGlvbihiKXtiPWEoYik7dmFyIGg9dGhpcy5fZ2V0SW5zdChiWzBdKTtpZih0aGlzLl9nZXQoaCwiZ290b0N1cnJlbnQiKSYmaC5jdXJyZW50RGF5KXtoLnNlbGVjdGVkRGF5PWguY3VycmVudERheTtoLmRyYXdNb250aD1oLnNlbGVjdGVkTW9udGg9aC5jdXJyZW50TW9udGg7aC5kcmF3WWVhcj1oLnNlbGVjdGVkWWVhcj1oLmN1cnJlbnRZZWFyfWVsc2V7dmFyIGo9bmV3IERhdGU7aC5zZWxlY3RlZERheT1qLmdldERhdGUoKTtoLmRyYXdNb250aD1oLnNlbGVjdGVkTW9udGg9ai5nZXRNb250aCgpO2guZHJhd1llYXI9aC5zZWxlY3RlZFllYXI9ai5nZXRGdWxsWWVhcigpfXRoaXMuX25vdGlmeUNoYW5nZShoKTt0aGlzLl9hZGp1c3REYXRlKGIpfSxfc2VsZWN0TW9udGhZZWFyOmZ1bmN0aW9uKGIsaCxqKXtiPWEoYik7dmFyIGw9dGhpcy5fZ2V0SW5zdChiWzBdKTtsLl9zZWxlY3RpbmdNb250aFllYXI9CmZhbHNlO2xbInNlbGVjdGVkIisoaj09Ik0iPyJNb250aCI6IlllYXIiKV09bFsiZHJhdyIrKGo9PSJNIj8iTW9udGgiOiJZZWFyIildPXBhcnNlSW50KGgub3B0aW9uc1toLnNlbGVjdGVkSW5kZXhdLnZhbHVlLDEwKTt0aGlzLl9ub3RpZnlDaGFuZ2UobCk7dGhpcy5fYWRqdXN0RGF0ZShiKX0sX2NsaWNrTW9udGhZZWFyOmZ1bmN0aW9uKGIpe3ZhciBoPXRoaXMuX2dldEluc3QoYShiKVswXSk7aC5pbnB1dCYmaC5fc2VsZWN0aW5nTW9udGhZZWFyJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aC5pbnB1dC5mb2N1cygpfSwwKTtoLl9zZWxlY3RpbmdNb250aFllYXI9IWguX3NlbGVjdGluZ01vbnRoWWVhcn0sX3NlbGVjdERheTpmdW5jdGlvbihiLGgsaixsKXt2YXIgbz1hKGIpO2lmKCEoYShsKS5oYXNDbGFzcyh0aGlzLl91bnNlbGVjdGFibGVDbGFzcyl8fHRoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKG9bMF0pKSl7bz10aGlzLl9nZXRJbnN0KG9bMF0pO28uc2VsZWN0ZWREYXk9by5jdXJyZW50RGF5PQphKCJhIixsKS5odG1sKCk7by5zZWxlY3RlZE1vbnRoPW8uY3VycmVudE1vbnRoPWg7by5zZWxlY3RlZFllYXI9by5jdXJyZW50WWVhcj1qO3RoaXMuX3NlbGVjdERhdGUoYix0aGlzLl9mb3JtYXREYXRlKG8sby5jdXJyZW50RGF5LG8uY3VycmVudE1vbnRoLG8uY3VycmVudFllYXIpKX19LF9jbGVhckRhdGU6ZnVuY3Rpb24oYil7Yj1hKGIpO3RoaXMuX2dldEluc3QoYlswXSk7dGhpcy5fc2VsZWN0RGF0ZShiLCIiKX0sX3NlbGVjdERhdGU6ZnVuY3Rpb24oYixoKXtiPXRoaXMuX2dldEluc3QoYShiKVswXSk7aD1oIT1udWxsP2g6dGhpcy5fZm9ybWF0RGF0ZShiKTtiLmlucHV0JiZiLmlucHV0LnZhbChoKTt0aGlzLl91cGRhdGVBbHRlcm5hdGUoYik7dmFyIGo9dGhpcy5fZ2V0KGIsIm9uU2VsZWN0Iik7aWYoailqLmFwcGx5KGIuaW5wdXQ/Yi5pbnB1dFswXTpudWxsLFtoLGJdKTtlbHNlIGIuaW5wdXQmJmIuaW5wdXQudHJpZ2dlcigiY2hhbmdlIik7aWYoYi5pbmxpbmUpdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihiKTsKZWxzZXt0aGlzLl9oaWRlRGF0ZXBpY2tlcigpO3RoaXMuX2xhc3RJbnB1dD1iLmlucHV0WzBdO3R5cGVvZiBiLmlucHV0WzBdIT0ib2JqZWN0IiYmYi5pbnB1dC5mb2N1cygpO3RoaXMuX2xhc3RJbnB1dD1udWxsfX0sX3VwZGF0ZUFsdGVybmF0ZTpmdW5jdGlvbihiKXt2YXIgaD10aGlzLl9nZXQoYiwiYWx0RmllbGQiKTtpZihoKXt2YXIgaj10aGlzLl9nZXQoYiwiYWx0Rm9ybWF0Iil8fHRoaXMuX2dldChiLCJkYXRlRm9ybWF0IiksbD10aGlzLl9nZXREYXRlKGIpLG89dGhpcy5mb3JtYXREYXRlKGosbCx0aGlzLl9nZXRGb3JtYXRDb25maWcoYikpO2EoaCkuZWFjaChmdW5jdGlvbigpe2EodGhpcykudmFsKG8pfSl9fSxub1dlZWtlbmRzOmZ1bmN0aW9uKGIpe2I9Yi5nZXREYXkoKTtyZXR1cm5bYj4wJiZiPDYsIiJdfSxpc284NjAxV2VlazpmdW5jdGlvbihiKXtiPW5ldyBEYXRlKGIuZ2V0VGltZSgpKTtiLnNldERhdGUoYi5nZXREYXRlKCkrNC0oYi5nZXREYXkoKXx8NykpO3ZhciBoPQpiLmdldFRpbWUoKTtiLnNldE1vbnRoKDApO2Iuc2V0RGF0ZSgxKTtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJvdW5kKChoLWIpLzg2NEU1KS83KSsxfSxwYXJzZURhdGU6ZnVuY3Rpb24oYixoLGope2lmKGI9PW51bGx8fGg9PW51bGwpdGhyb3ciSW52YWxpZCBhcmd1bWVudHMiO2g9dHlwZW9mIGg9PSJvYmplY3QiP2gudG9TdHJpbmcoKTpoKyIiO2lmKGg9PSIiKXJldHVybiBudWxsO3ZhciBsPShqP2ouc2hvcnRZZWFyQ3V0b2ZmOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5zaG9ydFllYXJDdXRvZmY7bD10eXBlb2YgbCE9InN0cmluZyI/bDoobmV3IERhdGUpLmdldEZ1bGxZZWFyKCklMTAwK3BhcnNlSW50KGwsMTApO2Zvcih2YXIgbz0oaj9qLmRheU5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzU2hvcnQsbj0oaj9qLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxrPShqP2oubW9udGhOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQsCm09KGo/ai5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLHA9aj0tMSxxPS0xLHM9LTEscj1mYWxzZSx1PWZ1bmN0aW9uKHkpeyh5PUcrMTxiLmxlbmd0aCYmYi5jaGFyQXQoRysxKT09eSkmJkcrKztyZXR1cm4geX0sdj1mdW5jdGlvbih5KXt2YXIgSD11KHkpO3k9bmV3IFJlZ0V4cCgiXlxcZHsxLCIrKHk9PSJAIj8xNDp5PT0iISI/MjA6eT09InkiJiZIPzQ6eT09Im8iPzM6MikrIn0iKTt5PWguc3Vic3RyaW5nKHopLm1hdGNoKHkpO2lmKCF5KXRocm93Ik1pc3NpbmcgbnVtYmVyIGF0IHBvc2l0aW9uICIrejt6Kz15WzBdLmxlbmd0aDtyZXR1cm4gcGFyc2VJbnQoeVswXSwxMCl9LHc9ZnVuY3Rpb24oeSxILE4pe3k9YS5tYXAodSh5KT9OOkgsZnVuY3Rpb24oRCxFKXtyZXR1cm5bW0UsRF1dfSkuc29ydChmdW5jdGlvbihELEUpe3JldHVybi0oRFsxXS5sZW5ndGgtRVsxXS5sZW5ndGgpfSk7dmFyIEo9LTE7YS5lYWNoKHksZnVuY3Rpb24oRCxFKXtEPQpFWzFdO2lmKGguc3Vic3RyKHosRC5sZW5ndGgpLnRvTG93ZXJDYXNlKCk9PUQudG9Mb3dlckNhc2UoKSl7Sj1FWzBdO3orPUQubGVuZ3RoO3JldHVybiBmYWxzZX19KTtpZihKIT0tMSlyZXR1cm4gSisxO2Vsc2UgdGhyb3ciVW5rbm93biBuYW1lIGF0IHBvc2l0aW9uICIrejt9LHg9ZnVuY3Rpb24oKXtpZihoLmNoYXJBdCh6KSE9Yi5jaGFyQXQoRykpdGhyb3ciVW5leHBlY3RlZCBsaXRlcmFsIGF0IHBvc2l0aW9uICIrejt6Kyt9LHo9MCxHPTA7RzxiLmxlbmd0aDtHKyspaWYocilpZihiLmNoYXJBdChHKT09IiciJiYhdSgiJyIpKXI9ZmFsc2U7ZWxzZSB4KCk7ZWxzZSBzd2l0Y2goYi5jaGFyQXQoRykpe2Nhc2UgImQiOnE9digiZCIpO2JyZWFrO2Nhc2UgIkQiOncoIkQiLG8sbik7YnJlYWs7Y2FzZSAibyI6cz12KCJvIik7YnJlYWs7Y2FzZSAibSI6cD12KCJtIik7YnJlYWs7Y2FzZSAiTSI6cD13KCJNIixrLG0pO2JyZWFrO2Nhc2UgInkiOmo9digieSIpO2JyZWFrO2Nhc2UgIkAiOnZhciBDPQpuZXcgRGF0ZSh2KCJAIikpO2o9Qy5nZXRGdWxsWWVhcigpO3A9Qy5nZXRNb250aCgpKzE7cT1DLmdldERhdGUoKTticmVhaztjYXNlICIhIjpDPW5ldyBEYXRlKCh2KCIhIiktdGhpcy5fdGlja3NUbzE5NzApLzFFNCk7aj1DLmdldEZ1bGxZZWFyKCk7cD1DLmdldE1vbnRoKCkrMTtxPUMuZ2V0RGF0ZSgpO2JyZWFrO2Nhc2UgIiciOmlmKHUoIiciKSl4KCk7ZWxzZSByPXRydWU7YnJlYWs7ZGVmYXVsdDp4KCl9aWYoaj09LTEpaj0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCk7ZWxzZSBpZihqPDEwMClqKz0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCktKG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpJTEwMCsoajw9bD8wOi0xMDApO2lmKHM+LTEpe3A9MTtxPXM7ZG97bD10aGlzLl9nZXREYXlzSW5Nb250aChqLHAtMSk7aWYocTw9bClicmVhaztwKys7cS09bH13aGlsZSgxKX1DPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGoscC0xLHEpKTtpZihDLmdldEZ1bGxZZWFyKCkhPQpqfHxDLmdldE1vbnRoKCkrMSE9cHx8Qy5nZXREYXRlKCkhPXEpdGhyb3ciSW52YWxpZCBkYXRlIjtyZXR1cm4gQ30sQVRPTToieXktbW0tZGQiLENPT0tJRToiRCwgZGQgTSB5eSIsSVNPXzg2MDE6Inl5LW1tLWRkIixSRkNfODIyOiJELCBkIE0geSIsUkZDXzg1MDoiREQsIGRkLU0teSIsUkZDXzEwMzY6IkQsIGQgTSB5IixSRkNfMTEyMzoiRCwgZCBNIHl5IixSRkNfMjgyMjoiRCwgZCBNIHl5IixSU1M6IkQsIGQgTSB5IixUSUNLUzoiISIsVElNRVNUQU1QOiJAIixXM0M6Inl5LW1tLWRkIixfdGlja3NUbzE5NzA6KDcxODY4NStNYXRoLmZsb29yKDQ5Mi41KS1NYXRoLmZsb29yKDE5LjcpK01hdGguZmxvb3IoNC45MjUpKSoyNCo2MCo2MCoxRTcsZm9ybWF0RGF0ZTpmdW5jdGlvbihiLGgsail7aWYoIWgpcmV0dXJuIiI7dmFyIGw9KGo/ai5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LG89KGo/ai5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMsCm49KGo/ai5tb250aE5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydDtqPShqP2oubW9udGhOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lczt2YXIgaz1mdW5jdGlvbih1KXsodT1yKzE8Yi5sZW5ndGgmJmIuY2hhckF0KHIrMSk9PXUpJiZyKys7cmV0dXJuIHV9LG09ZnVuY3Rpb24odSx2LHcpe3Y9IiIrdjtpZihrKHUpKWZvcig7di5sZW5ndGg8dzspdj0iMCIrdjtyZXR1cm4gdn0scD1mdW5jdGlvbih1LHYsdyx4KXtyZXR1cm4gayh1KT94W3ZdOndbdl19LHE9IiIscz1mYWxzZTtpZihoKWZvcih2YXIgcj0wO3I8Yi5sZW5ndGg7cisrKWlmKHMpaWYoYi5jaGFyQXQocik9PSInIiYmIWsoIiciKSlzPWZhbHNlO2Vsc2UgcSs9Yi5jaGFyQXQocik7ZWxzZSBzd2l0Y2goYi5jaGFyQXQocikpe2Nhc2UgImQiOnErPW0oImQiLGguZ2V0RGF0ZSgpLDIpO2JyZWFrO2Nhc2UgIkQiOnErPXAoIkQiLGguZ2V0RGF5KCksbCxvKTticmVhazsKY2FzZSAibyI6cSs9bSgibyIsKGguZ2V0VGltZSgpLShuZXcgRGF0ZShoLmdldEZ1bGxZZWFyKCksMCwwKSkuZ2V0VGltZSgpKS84NjRFNSwzKTticmVhaztjYXNlICJtIjpxKz1tKCJtIixoLmdldE1vbnRoKCkrMSwyKTticmVhaztjYXNlICJNIjpxKz1wKCJNIixoLmdldE1vbnRoKCksbixqKTticmVhaztjYXNlICJ5IjpxKz1rKCJ5Iik/aC5nZXRGdWxsWWVhcigpOihoLmdldFllYXIoKSUxMDA8MTA/IjAiOiIiKStoLmdldFllYXIoKSUxMDA7YnJlYWs7Y2FzZSAiQCI6cSs9aC5nZXRUaW1lKCk7YnJlYWs7Y2FzZSAiISI6cSs9aC5nZXRUaW1lKCkqMUU0K3RoaXMuX3RpY2tzVG8xOTcwO2JyZWFrO2Nhc2UgIiciOmlmKGsoIiciKSlxKz0iJyI7ZWxzZSBzPXRydWU7YnJlYWs7ZGVmYXVsdDpxKz1iLmNoYXJBdChyKX1yZXR1cm4gcX0sX3Bvc3NpYmxlQ2hhcnM6ZnVuY3Rpb24oYil7Zm9yKHZhciBoPSIiLGo9ZmFsc2UsbD1mdW5jdGlvbihuKXsobj1vKzE8Yi5sZW5ndGgmJmIuY2hhckF0KG8rCjEpPT1uKSYmbysrO3JldHVybiBufSxvPTA7bzxiLmxlbmd0aDtvKyspaWYoailpZihiLmNoYXJBdChvKT09IiciJiYhbCgiJyIpKWo9ZmFsc2U7ZWxzZSBoKz1iLmNoYXJBdChvKTtlbHNlIHN3aXRjaChiLmNoYXJBdChvKSl7Y2FzZSAiZCI6Y2FzZSAibSI6Y2FzZSAieSI6Y2FzZSAiQCI6aCs9IjAxMjM0NTY3ODkiO2JyZWFrO2Nhc2UgIkQiOmNhc2UgIk0iOnJldHVybiBudWxsO2Nhc2UgIiciOmlmKGwoIiciKSloKz0iJyI7ZWxzZSBqPXRydWU7YnJlYWs7ZGVmYXVsdDpoKz1iLmNoYXJBdChvKX1yZXR1cm4gaH0sX2dldDpmdW5jdGlvbihiLGgpe3JldHVybiBiLnNldHRpbmdzW2hdIT09ZD9iLnNldHRpbmdzW2hdOnRoaXMuX2RlZmF1bHRzW2hdfSxfc2V0RGF0ZUZyb21GaWVsZDpmdW5jdGlvbihiLGgpe2lmKGIuaW5wdXQudmFsKCkhPWIubGFzdFZhbCl7dmFyIGo9dGhpcy5fZ2V0KGIsImRhdGVGb3JtYXQiKSxsPWIubGFzdFZhbD1iLmlucHV0P2IuaW5wdXQudmFsKCk6bnVsbCwKbyxuO289bj10aGlzLl9nZXREZWZhdWx0RGF0ZShiKTt2YXIgaz10aGlzLl9nZXRGb3JtYXRDb25maWcoYik7dHJ5e289dGhpcy5wYXJzZURhdGUoaixsLGspfHxufWNhdGNoKG0pe3RoaXMubG9nKG0pO2w9aD8iIjpsfWIuc2VsZWN0ZWREYXk9by5nZXREYXRlKCk7Yi5kcmF3TW9udGg9Yi5zZWxlY3RlZE1vbnRoPW8uZ2V0TW9udGgoKTtiLmRyYXdZZWFyPWIuc2VsZWN0ZWRZZWFyPW8uZ2V0RnVsbFllYXIoKTtiLmN1cnJlbnREYXk9bD9vLmdldERhdGUoKTowO2IuY3VycmVudE1vbnRoPWw/by5nZXRNb250aCgpOjA7Yi5jdXJyZW50WWVhcj1sP28uZ2V0RnVsbFllYXIoKTowO3RoaXMuX2FkanVzdEluc3REYXRlKGIpfX0sX2dldERlZmF1bHREYXRlOmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLl9yZXN0cmljdE1pbk1heChiLHRoaXMuX2RldGVybWluZURhdGUoYix0aGlzLl9nZXQoYiwiZGVmYXVsdERhdGUiKSxuZXcgRGF0ZSkpfSxfZGV0ZXJtaW5lRGF0ZTpmdW5jdGlvbihiLGgsCmope3ZhciBsPWZ1bmN0aW9uKG4pe3ZhciBrPW5ldyBEYXRlO2suc2V0RGF0ZShrLmdldERhdGUoKStuKTtyZXR1cm4ga30sbz1mdW5jdGlvbihuKXt0cnl7cmV0dXJuIGEuZGF0ZXBpY2tlci5wYXJzZURhdGUoYS5kYXRlcGlja2VyLl9nZXQoYiwiZGF0ZUZvcm1hdCIpLG4sYS5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcoYikpfWNhdGNoKGspe312YXIgbT0obi50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eYy8pP2EuZGF0ZXBpY2tlci5fZ2V0RGF0ZShiKTpudWxsKXx8bmV3IERhdGUscD1tLmdldEZ1bGxZZWFyKCkscT1tLmdldE1vbnRoKCk7bT1tLmdldERhdGUoKTtmb3IodmFyIHM9LyhbKy1dP1swLTldKylccyooZHxEfHd8V3xtfE18eXxZKT8vZyxyPXMuZXhlYyhuKTtyOyl7c3dpdGNoKHJbMl18fCJkIil7Y2FzZSAiZCI6Y2FzZSAiRCI6bSs9cGFyc2VJbnQoclsxXSwxMCk7YnJlYWs7Y2FzZSAidyI6Y2FzZSAiVyI6bSs9cGFyc2VJbnQoclsxXSwxMCkqNzticmVhaztjYXNlICJtIjpjYXNlICJNIjpxKz0KcGFyc2VJbnQoclsxXSwxMCk7bT1NYXRoLm1pbihtLGEuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgocCxxKSk7YnJlYWs7Y2FzZSAieSI6Y2FzZSAiWSI6cCs9cGFyc2VJbnQoclsxXSwxMCk7bT1NYXRoLm1pbihtLGEuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgocCxxKSk7YnJlYWt9cj1zLmV4ZWMobil9cmV0dXJuIG5ldyBEYXRlKHAscSxtKX07aWYoaD0oaD1oPT1udWxsfHxoPT09IiI/ajp0eXBlb2YgaD09InN0cmluZyI/byhoKTp0eXBlb2YgaD09Im51bWJlciI/aXNOYU4oaCk/ajpsKGgpOm5ldyBEYXRlKGguZ2V0VGltZSgpKSkmJmgudG9TdHJpbmcoKT09IkludmFsaWQgRGF0ZSI/ajpoKXtoLnNldEhvdXJzKDApO2guc2V0TWludXRlcygwKTtoLnNldFNlY29uZHMoMCk7aC5zZXRNaWxsaXNlY29uZHMoMCl9cmV0dXJuIHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KGgpfSxfZGF5bGlnaHRTYXZpbmdBZGp1c3Q6ZnVuY3Rpb24oYil7aWYoIWIpcmV0dXJuIG51bGw7CmIuc2V0SG91cnMoYi5nZXRIb3VycygpPjEyP2IuZ2V0SG91cnMoKSsyOjApO3JldHVybiBifSxfc2V0RGF0ZTpmdW5jdGlvbihiLGgsail7dmFyIGw9IWgsbz1iLnNlbGVjdGVkTW9udGgsbj1iLnNlbGVjdGVkWWVhcjtoPXRoaXMuX3Jlc3RyaWN0TWluTWF4KGIsdGhpcy5fZGV0ZXJtaW5lRGF0ZShiLGgsbmV3IERhdGUpKTtiLnNlbGVjdGVkRGF5PWIuY3VycmVudERheT1oLmdldERhdGUoKTtiLmRyYXdNb250aD1iLnNlbGVjdGVkTW9udGg9Yi5jdXJyZW50TW9udGg9aC5nZXRNb250aCgpO2IuZHJhd1llYXI9Yi5zZWxlY3RlZFllYXI9Yi5jdXJyZW50WWVhcj1oLmdldEZ1bGxZZWFyKCk7aWYoKG8hPWIuc2VsZWN0ZWRNb250aHx8biE9Yi5zZWxlY3RlZFllYXIpJiYhail0aGlzLl9ub3RpZnlDaGFuZ2UoYik7dGhpcy5fYWRqdXN0SW5zdERhdGUoYik7aWYoYi5pbnB1dCliLmlucHV0LnZhbChsPyIiOnRoaXMuX2Zvcm1hdERhdGUoYikpfSxfZ2V0RGF0ZTpmdW5jdGlvbihiKXtyZXR1cm4hYi5jdXJyZW50WWVhcnx8CmIuaW5wdXQmJmIuaW5wdXQudmFsKCk9PSIiP251bGw6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoYi5jdXJyZW50WWVhcixiLmN1cnJlbnRNb250aCxiLmN1cnJlbnREYXkpKX0sX2dlbmVyYXRlSFRNTDpmdW5jdGlvbihiKXt2YXIgaD1uZXcgRGF0ZTtoPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGguZ2V0RnVsbFllYXIoKSxoLmdldE1vbnRoKCksaC5nZXREYXRlKCkpKTt2YXIgaj10aGlzLl9nZXQoYiwiaXNSVEwiKSxsPXRoaXMuX2dldChiLCJzaG93QnV0dG9uUGFuZWwiKSxvPXRoaXMuX2dldChiLCJoaWRlSWZOb1ByZXZOZXh0Iiksbj10aGlzLl9nZXQoYiwibmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCIpLGs9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoYiksbT10aGlzLl9nZXQoYiwic2hvd0N1cnJlbnRBdFBvcyIpLHA9dGhpcy5fZ2V0KGIsInN0ZXBNb250aHMiKSxxPWtbMF0hPTF8fGtbMV0hPTEscz10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCghYi5jdXJyZW50RGF5PwpuZXcgRGF0ZSg5OTk5LDksOSk6bmV3IERhdGUoYi5jdXJyZW50WWVhcixiLmN1cnJlbnRNb250aCxiLmN1cnJlbnREYXkpKSxyPXRoaXMuX2dldE1pbk1heERhdGUoYiwibWluIiksdT10aGlzLl9nZXRNaW5NYXhEYXRlKGIsIm1heCIpO209Yi5kcmF3TW9udGgtbTt2YXIgdj1iLmRyYXdZZWFyO2lmKG08MCl7bSs9MTI7di0tfWlmKHUpe3ZhciB3PXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHUuZ2V0RnVsbFllYXIoKSx1LmdldE1vbnRoKCkta1swXSprWzFdKzEsdS5nZXREYXRlKCkpKTtmb3Iodz1yJiZ3PHI/cjp3O3RoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHYsbSwxKSk+dzspe20tLTtpZihtPDApe209MTE7di0tfX19Yi5kcmF3TW9udGg9bTtiLmRyYXdZZWFyPXY7dz10aGlzLl9nZXQoYiwicHJldlRleHQiKTt3PSFuP3c6dGhpcy5mb3JtYXREYXRlKHcsdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodixtLXAsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyhiKSk7Cnc9dGhpcy5fY2FuQWRqdXN0TW9udGgoYiwtMSx2LG0pPyc8YSBjbGFzcz0idWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwiIG9uY2xpY2s9IkRQX2pRdWVyeV8nK2UrIi5kYXRlcGlja2VyLl9hZGp1c3REYXRlKCcjIitiLmlkKyInLCAtIitwKyIsICdNJyk7XCIgdGl0bGU9XCIiK3crJyI+PHNwYW4gY2xhc3M9InVpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtJysoaj8iZSI6InciKSsnIj4nK3crIjwvc3Bhbj48L2E+IjpvPyIiOic8YSBjbGFzcz0idWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQiIHRpdGxlPSInK3crJyI+PHNwYW4gY2xhc3M9InVpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtJysoaj8iZSI6InciKSsnIj4nK3crIjwvc3Bhbj48L2E+Ijt2YXIgeD10aGlzLl9nZXQoYiwibmV4dFRleHQiKTt4PSFuP3g6dGhpcy5mb3JtYXREYXRlKHgsdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUodiwKbStwLDEpKSx0aGlzLl9nZXRGb3JtYXRDb25maWcoYikpO289dGhpcy5fY2FuQWRqdXN0TW9udGgoYiwrMSx2LG0pPyc8YSBjbGFzcz0idWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwiIG9uY2xpY2s9IkRQX2pRdWVyeV8nK2UrIi5kYXRlcGlja2VyLl9hZGp1c3REYXRlKCcjIitiLmlkKyInLCArIitwKyIsICdNJyk7XCIgdGl0bGU9XCIiK3grJyI+PHNwYW4gY2xhc3M9InVpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtJysoaj8idyI6ImUiKSsnIj4nK3grIjwvc3Bhbj48L2E+IjpvPyIiOic8YSBjbGFzcz0idWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQiIHRpdGxlPSInK3grJyI+PHNwYW4gY2xhc3M9InVpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtJysoaj8idyI6ImUiKSsnIj4nK3grIjwvc3Bhbj48L2E+IjtwPXRoaXMuX2dldChiLCJjdXJyZW50VGV4dCIpO3g9dGhpcy5fZ2V0KGIsImdvdG9DdXJyZW50IikmJgpiLmN1cnJlbnREYXk/czpoO3A9IW4/cDp0aGlzLmZvcm1hdERhdGUocCx4LHRoaXMuX2dldEZvcm1hdENvbmZpZyhiKSk7bj0hYi5pbmxpbmU/JzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idWktZGF0ZXBpY2tlci1jbG9zZSB1aS1zdGF0ZS1kZWZhdWx0IHVpLXByaW9yaXR5LXByaW1hcnkgdWktY29ybmVyLWFsbCIgb25jbGljaz0iRFBfalF1ZXJ5XycrZSsnLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7Ij4nK3RoaXMuX2dldChiLCJjbG9zZVRleHQiKSsiPC9idXR0b24+IjoiIjtsPWw/JzxkaXYgY2xhc3M9InVpLWRhdGVwaWNrZXItYnV0dG9ucGFuZSB1aS13aWRnZXQtY29udGVudCI+Jysoaj9uOiIiKSsodGhpcy5faXNJblJhbmdlKGIseCk/JzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idWktZGF0ZXBpY2tlci1jdXJyZW50IHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktc2Vjb25kYXJ5IHVpLWNvcm5lci1hbGwiIG9uY2xpY2s9IkRQX2pRdWVyeV8nKwplKyIuZGF0ZXBpY2tlci5fZ290b1RvZGF5KCcjIitiLmlkKyInKTtcIj4iK3ArIjwvYnV0dG9uPiI6IiIpKyhqPyIiOm4pKyI8L2Rpdj4iOiIiO249cGFyc2VJbnQodGhpcy5fZ2V0KGIsImZpcnN0RGF5IiksMTApO249aXNOYU4obik/MDpuO3A9dGhpcy5fZ2V0KGIsInNob3dXZWVrIik7eD10aGlzLl9nZXQoYiwiZGF5TmFtZXMiKTt0aGlzLl9nZXQoYiwiZGF5TmFtZXNTaG9ydCIpO3ZhciB6PXRoaXMuX2dldChiLCJkYXlOYW1lc01pbiIpLEc9dGhpcy5fZ2V0KGIsIm1vbnRoTmFtZXMiKSxDPXRoaXMuX2dldChiLCJtb250aE5hbWVzU2hvcnQiKSx5PXRoaXMuX2dldChiLCJiZWZvcmVTaG93RGF5IiksSD10aGlzLl9nZXQoYiwic2hvd090aGVyTW9udGhzIiksTj10aGlzLl9nZXQoYiwic2VsZWN0T3RoZXJNb250aHMiKTt0aGlzLl9nZXQoYiwiY2FsY3VsYXRlV2VlayIpO2Zvcih2YXIgSj10aGlzLl9nZXREZWZhdWx0RGF0ZShiKSxEPSIiLEU9MDtFPGtbMF07RSsrKXtmb3IodmFyIFA9CiIiLEw9MDtMPGtbMV07TCsrKXt2YXIgUT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZSh2LG0sYi5zZWxlY3RlZERheSkpLEI9IiB1aS1jb3JuZXItYWxsIixGPSIiO2lmKHEpe0YrPSc8ZGl2IGNsYXNzPSJ1aS1kYXRlcGlja2VyLWdyb3VwJztpZihrWzFdPjEpc3dpdGNoKEwpe2Nhc2UgMDpGKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtZmlyc3QiO0I9IiB1aS1jb3JuZXItIisoaj8icmlnaHQiOiJsZWZ0Iik7YnJlYWs7Y2FzZSBrWzFdLTE6Ris9IiB1aS1kYXRlcGlja2VyLWdyb3VwLWxhc3QiO0I9IiB1aS1jb3JuZXItIisoaj8ibGVmdCI6InJpZ2h0Iik7YnJlYWs7ZGVmYXVsdDpGKz0iIHVpLWRhdGVwaWNrZXItZ3JvdXAtbWlkZGxlIjtCPSIiO2JyZWFrfUYrPSciPid9Ris9JzxkaXYgY2xhc3M9InVpLWRhdGVwaWNrZXItaGVhZGVyIHVpLXdpZGdldC1oZWFkZXIgdWktaGVscGVyLWNsZWFyZml4JytCKyciPicrKC9hbGx8bGVmdC8udGVzdChCKSYmRT09MD9qPwpvOnc6IiIpKygvYWxsfHJpZ2h0Ly50ZXN0KEIpJiZFPT0wP2o/dzpvOiIiKSt0aGlzLl9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcihiLG0sdixyLHUsRT4wfHxMPjAsRyxDKSsnPC9kaXY+PHRhYmxlIGNsYXNzPSJ1aS1kYXRlcGlja2VyLWNhbGVuZGFyIj48dGhlYWQ+PHRyPic7dmFyIEk9cD8nPHRoIGNsYXNzPSJ1aS1kYXRlcGlja2VyLXdlZWstY29sIj4nK3RoaXMuX2dldChiLCJ3ZWVrSGVhZGVyIikrIjwvdGg+IjoiIjtmb3IoQj0wO0I8NztCKyspe3ZhciBBPShCK24pJTc7SSs9Ijx0aCIrKChCK24rNiklNz49NT8nIGNsYXNzPSJ1aS1kYXRlcGlja2VyLXdlZWstZW5kIic6IiIpKyc+PHNwYW4gdGl0bGU9IicreFtBXSsnIj4nK3pbQV0rIjwvc3Bhbj48L3RoPiJ9Ris9SSsiPC90cj48L3RoZWFkPjx0Ym9keT4iO0k9dGhpcy5fZ2V0RGF5c0luTW9udGgodixtKTtpZih2PT1iLnNlbGVjdGVkWWVhciYmbT09Yi5zZWxlY3RlZE1vbnRoKWIuc2VsZWN0ZWREYXk9TWF0aC5taW4oYi5zZWxlY3RlZERheSwKSSk7Qj0odGhpcy5fZ2V0Rmlyc3REYXlPZk1vbnRoKHYsbSktbis3KSU3O0k9cT82Ok1hdGguY2VpbCgoQitJKS83KTtBPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHYsbSwxLUIpKTtmb3IodmFyIFI9MDtSPEk7UisrKXtGKz0iPHRyPiI7dmFyIFM9IXA/IiI6Jzx0ZCBjbGFzcz0idWktZGF0ZXBpY2tlci13ZWVrLWNvbCI+Jyt0aGlzLl9nZXQoYiwiY2FsY3VsYXRlV2VlayIpKEEpKyI8L3RkPiI7Zm9yKEI9MDtCPDc7QisrKXt2YXIgTT15P3kuYXBwbHkoYi5pbnB1dD9iLmlucHV0WzBdOm51bGwsW0FdKTpbdHJ1ZSwiIl0sSz1BLmdldE1vbnRoKCkhPW0sTz1LJiYhTnx8IU1bMF18fHImJkE8cnx8dSYmQT51O1MrPSc8dGQgY2xhc3M9IicrKChCK24rNiklNz49NT8iIHVpLWRhdGVwaWNrZXItd2Vlay1lbmQiOiIiKSsoSz8iIHVpLWRhdGVwaWNrZXItb3RoZXItbW9udGgiOiIiKSsoQS5nZXRUaW1lKCk9PVEuZ2V0VGltZSgpJiZtPT1iLnNlbGVjdGVkTW9udGgmJgpiLl9rZXlFdmVudHx8Si5nZXRUaW1lKCk9PUEuZ2V0VGltZSgpJiZKLmdldFRpbWUoKT09US5nZXRUaW1lKCk/IiAiK3RoaXMuX2RheU92ZXJDbGFzczoiIikrKE8/IiAiK3RoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzKyIgdWktc3RhdGUtZGlzYWJsZWQiOiIiKSsoSyYmIUg/IiI6IiAiK01bMV0rKEEuZ2V0VGltZSgpPT1zLmdldFRpbWUoKT8iICIrdGhpcy5fY3VycmVudENsYXNzOiIiKSsoQS5nZXRUaW1lKCk9PWguZ2V0VGltZSgpPyIgdWktZGF0ZXBpY2tlci10b2RheSI6IiIpKSsnIicrKCghS3x8SCkmJk1bMl0/JyB0aXRsZT0iJytNWzJdKyciJzoiIikrKE8/IiI6JyBvbmNsaWNrPSJEUF9qUXVlcnlfJytlKyIuZGF0ZXBpY2tlci5fc2VsZWN0RGF5KCcjIitiLmlkKyInLCIrQS5nZXRNb250aCgpKyIsIitBLmdldEZ1bGxZZWFyKCkrJywgdGhpcyk7cmV0dXJuIGZhbHNlOyInKSsiPiIrKEsmJiFIPyImI3hhMDsiOk8/JzxzcGFuIGNsYXNzPSJ1aS1zdGF0ZS1kZWZhdWx0Ij4nK0EuZ2V0RGF0ZSgpKwoiPC9zcGFuPiI6JzxhIGNsYXNzPSJ1aS1zdGF0ZS1kZWZhdWx0JysoQS5nZXRUaW1lKCk9PWguZ2V0VGltZSgpPyIgdWktc3RhdGUtaGlnaGxpZ2h0IjoiIikrKEEuZ2V0VGltZSgpPT1zLmdldFRpbWUoKT8iIHVpLXN0YXRlLWFjdGl2ZSI6IiIpKyhLPyIgdWktcHJpb3JpdHktc2Vjb25kYXJ5IjoiIikrJyIgaHJlZj0iIyI+JytBLmdldERhdGUoKSsiPC9hPiIpKyI8L3RkPiI7QS5zZXREYXRlKEEuZ2V0RGF0ZSgpKzEpO0E9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QoQSl9Ris9UysiPC90cj4ifW0rKztpZihtPjExKXttPTA7disrfUYrPSI8L3Rib2R5PjwvdGFibGU+IisocT8iPC9kaXY+Iisoa1swXT4wJiZMPT1rWzFdLTE/JzxkaXYgY2xhc3M9InVpLWRhdGVwaWNrZXItcm93LWJyZWFrIj48L2Rpdj4nOiIiKToiIik7UCs9Rn1EKz1QfUQrPWwrKGEuYnJvd3Nlci5tc2llJiZwYXJzZUludChhLmJyb3dzZXIudmVyc2lvbiwxMCk8NyYmIWIuaW5saW5lPyc8aWZyYW1lIHNyYz0iamF2YXNjcmlwdDpmYWxzZTsiIGNsYXNzPSJ1aS1kYXRlcGlja2VyLWNvdmVyIiBmcmFtZWJvcmRlcj0iMCI+PC9pZnJhbWU+JzoKIiIpO2IuX2tleUV2ZW50PWZhbHNlO3JldHVybiBEfSxfZ2VuZXJhdGVNb250aFllYXJIZWFkZXI6ZnVuY3Rpb24oYixoLGosbCxvLG4sayxtKXt2YXIgcD10aGlzLl9nZXQoYiwiY2hhbmdlTW9udGgiKSxxPXRoaXMuX2dldChiLCJjaGFuZ2VZZWFyIikscz10aGlzLl9nZXQoYiwic2hvd01vbnRoQWZ0ZXJZZWFyIikscj0nPGRpdiBjbGFzcz0idWktZGF0ZXBpY2tlci10aXRsZSI+Jyx1PSIiO2lmKG58fCFwKXUrPSc8c3BhbiBjbGFzcz0idWktZGF0ZXBpY2tlci1tb250aCI+JytrW2hdKyI8L3NwYW4+IjtlbHNle2s9bCYmbC5nZXRGdWxsWWVhcigpPT1qO3ZhciB2PW8mJm8uZ2V0RnVsbFllYXIoKT09ajt1Kz0nPHNlbGVjdCBjbGFzcz0idWktZGF0ZXBpY2tlci1tb250aCIgb25jaGFuZ2U9IkRQX2pRdWVyeV8nK2UrIi5kYXRlcGlja2VyLl9zZWxlY3RNb250aFllYXIoJyMiK2IuaWQrIicsIHRoaXMsICdNJyk7XCIgb25jbGljaz1cIkRQX2pRdWVyeV8iK2UrIi5kYXRlcGlja2VyLl9jbGlja01vbnRoWWVhcignIyIrCmIuaWQrIicpO1wiPiI7Zm9yKHZhciB3PTA7dzwxMjt3KyspaWYoKCFrfHx3Pj1sLmdldE1vbnRoKCkpJiYoIXZ8fHc8PW8uZ2V0TW9udGgoKSkpdSs9JzxvcHRpb24gdmFsdWU9IicrdysnIicrKHc9PWg/JyBzZWxlY3RlZD0ic2VsZWN0ZWQiJzoiIikrIj4iK21bd10rIjwvb3B0aW9uPiI7dSs9Ijwvc2VsZWN0PiJ9c3x8KHIrPXUrKG58fCEocCYmcSk/IiYjeGEwOyI6IiIpKTtpZighYi55ZWFyc2h0bWwpe2IueWVhcnNodG1sPSIiO2lmKG58fCFxKXIrPSc8c3BhbiBjbGFzcz0idWktZGF0ZXBpY2tlci15ZWFyIj4nK2orIjwvc3Bhbj4iO2Vsc2V7bT10aGlzLl9nZXQoYiwieWVhclJhbmdlIikuc3BsaXQoIjoiKTt2YXIgeD0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCk7az1mdW5jdGlvbih6KXt6PXoubWF0Y2goL2NbKy1dLiovKT9qK3BhcnNlSW50KHouc3Vic3RyaW5nKDEpLDEwKTp6Lm1hdGNoKC9bKy1dLiovKT94K3BhcnNlSW50KHosMTApOnBhcnNlSW50KHosMTApO3JldHVybiBpc05hTih6KT8KeDp6fTtoPWsobVswXSk7bT1NYXRoLm1heChoLGsobVsxXXx8IiIpKTtoPWw/TWF0aC5tYXgoaCxsLmdldEZ1bGxZZWFyKCkpOmg7bT1vP01hdGgubWluKG0sby5nZXRGdWxsWWVhcigpKTptO2ZvcihiLnllYXJzaHRtbCs9JzxzZWxlY3QgY2xhc3M9InVpLWRhdGVwaWNrZXIteWVhciIgb25jaGFuZ2U9IkRQX2pRdWVyeV8nK2UrIi5kYXRlcGlja2VyLl9zZWxlY3RNb250aFllYXIoJyMiK2IuaWQrIicsIHRoaXMsICdZJyk7XCIgb25jbGljaz1cIkRQX2pRdWVyeV8iK2UrIi5kYXRlcGlja2VyLl9jbGlja01vbnRoWWVhcignIyIrYi5pZCsiJyk7XCI+IjtoPD1tO2grKyliLnllYXJzaHRtbCs9JzxvcHRpb24gdmFsdWU9IicraCsnIicrKGg9PWo/JyBzZWxlY3RlZD0ic2VsZWN0ZWQiJzoiIikrIj4iK2grIjwvb3B0aW9uPiI7Yi55ZWFyc2h0bWwrPSI8L3NlbGVjdD4iO3IrPWIueWVhcnNodG1sO2IueWVhcnNodG1sPW51bGx9fXIrPXRoaXMuX2dldChiLCJ5ZWFyU3VmZml4Iik7aWYocylyKz0KKG58fCEocCYmcSk/IiYjeGEwOyI6IiIpK3U7cis9IjwvZGl2PiI7cmV0dXJuIHJ9LF9hZGp1c3RJbnN0RGF0ZTpmdW5jdGlvbihiLGgsail7dmFyIGw9Yi5kcmF3WWVhcisoaj09IlkiP2g6MCksbz1iLmRyYXdNb250aCsoaj09Ik0iP2g6MCk7aD1NYXRoLm1pbihiLnNlbGVjdGVkRGF5LHRoaXMuX2dldERheXNJbk1vbnRoKGwsbykpKyhqPT0iRCI/aDowKTtsPXRoaXMuX3Jlc3RyaWN0TWluTWF4KGIsdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUobCxvLGgpKSk7Yi5zZWxlY3RlZERheT1sLmdldERhdGUoKTtiLmRyYXdNb250aD1iLnNlbGVjdGVkTW9udGg9bC5nZXRNb250aCgpO2IuZHJhd1llYXI9Yi5zZWxlY3RlZFllYXI9bC5nZXRGdWxsWWVhcigpO2lmKGo9PSJNInx8aj09IlkiKXRoaXMuX25vdGlmeUNoYW5nZShiKX0sX3Jlc3RyaWN0TWluTWF4OmZ1bmN0aW9uKGIsaCl7dmFyIGo9dGhpcy5fZ2V0TWluTWF4RGF0ZShiLCJtaW4iKTtiPXRoaXMuX2dldE1pbk1heERhdGUoYiwKIm1heCIpO2g9aiYmaDxqP2o6aDtyZXR1cm4gaD1iJiZoPmI/YjpofSxfbm90aWZ5Q2hhbmdlOmZ1bmN0aW9uKGIpe3ZhciBoPXRoaXMuX2dldChiLCJvbkNoYW5nZU1vbnRoWWVhciIpO2lmKGgpaC5hcHBseShiLmlucHV0P2IuaW5wdXRbMF06bnVsbCxbYi5zZWxlY3RlZFllYXIsYi5zZWxlY3RlZE1vbnRoKzEsYl0pfSxfZ2V0TnVtYmVyT2ZNb250aHM6ZnVuY3Rpb24oYil7Yj10aGlzLl9nZXQoYiwibnVtYmVyT2ZNb250aHMiKTtyZXR1cm4gYj09bnVsbD9bMSwxXTp0eXBlb2YgYj09Im51bWJlciI/WzEsYl06Yn0sX2dldE1pbk1heERhdGU6ZnVuY3Rpb24oYixoKXtyZXR1cm4gdGhpcy5fZGV0ZXJtaW5lRGF0ZShiLHRoaXMuX2dldChiLGgrIkRhdGUiKSxudWxsKX0sX2dldERheXNJbk1vbnRoOmZ1bmN0aW9uKGIsaCl7cmV0dXJuIDMyLXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGIsaCwzMikpLmdldERhdGUoKX0sX2dldEZpcnN0RGF5T2ZNb250aDpmdW5jdGlvbihiLApoKXtyZXR1cm4obmV3IERhdGUoYixoLDEpKS5nZXREYXkoKX0sX2NhbkFkanVzdE1vbnRoOmZ1bmN0aW9uKGIsaCxqLGwpe3ZhciBvPXRoaXMuX2dldE51bWJlck9mTW9udGhzKGIpO2o9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaixsKyhoPDA/aDpvWzBdKm9bMV0pLDEpKTtoPDAmJmouc2V0RGF0ZSh0aGlzLl9nZXREYXlzSW5Nb250aChqLmdldEZ1bGxZZWFyKCksai5nZXRNb250aCgpKSk7cmV0dXJuIHRoaXMuX2lzSW5SYW5nZShiLGopfSxfaXNJblJhbmdlOmZ1bmN0aW9uKGIsaCl7dmFyIGo9dGhpcy5fZ2V0TWluTWF4RGF0ZShiLCJtaW4iKTtiPXRoaXMuX2dldE1pbk1heERhdGUoYiwibWF4Iik7cmV0dXJuKCFqfHxoLmdldFRpbWUoKT49ai5nZXRUaW1lKCkpJiYoIWJ8fGguZ2V0VGltZSgpPD1iLmdldFRpbWUoKSl9LF9nZXRGb3JtYXRDb25maWc6ZnVuY3Rpb24oYil7dmFyIGg9dGhpcy5fZ2V0KGIsInNob3J0WWVhckN1dG9mZiIpO2g9dHlwZW9mIGghPQoic3RyaW5nIj9oOihuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSUxMDArcGFyc2VJbnQoaCwxMCk7cmV0dXJue3Nob3J0WWVhckN1dG9mZjpoLGRheU5hbWVzU2hvcnQ6dGhpcy5fZ2V0KGIsImRheU5hbWVzU2hvcnQiKSxkYXlOYW1lczp0aGlzLl9nZXQoYiwiZGF5TmFtZXMiKSxtb250aE5hbWVzU2hvcnQ6dGhpcy5fZ2V0KGIsIm1vbnRoTmFtZXNTaG9ydCIpLG1vbnRoTmFtZXM6dGhpcy5fZ2V0KGIsIm1vbnRoTmFtZXMiKX19LF9mb3JtYXREYXRlOmZ1bmN0aW9uKGIsaCxqLGwpe2lmKCFoKXtiLmN1cnJlbnREYXk9Yi5zZWxlY3RlZERheTtiLmN1cnJlbnRNb250aD1iLnNlbGVjdGVkTW9udGg7Yi5jdXJyZW50WWVhcj1iLnNlbGVjdGVkWWVhcn1oPWg/dHlwZW9mIGg9PSJvYmplY3QiP2g6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUobCxqLGgpKTp0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShiLmN1cnJlbnRZZWFyLGIuY3VycmVudE1vbnRoLGIuY3VycmVudERheSkpOwpyZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMuX2dldChiLCJkYXRlRm9ybWF0IiksaCx0aGlzLl9nZXRGb3JtYXRDb25maWcoYikpfX0pO2EuZm4uZGF0ZXBpY2tlcj1mdW5jdGlvbihiKXtpZighdGhpcy5sZW5ndGgpcmV0dXJuIHRoaXM7aWYoIWEuZGF0ZXBpY2tlci5pbml0aWFsaXplZCl7YShkb2N1bWVudCkubW91c2Vkb3duKGEuZGF0ZXBpY2tlci5fY2hlY2tFeHRlcm5hbENsaWNrKS5maW5kKCJib2R5IikuYXBwZW5kKGEuZGF0ZXBpY2tlci5kcERpdik7YS5kYXRlcGlja2VyLmluaXRpYWxpemVkPXRydWV9dmFyIGg9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKHR5cGVvZiBiPT0ic3RyaW5nIiYmKGI9PSJpc0Rpc2FibGVkInx8Yj09ImdldERhdGUifHxiPT0id2lkZ2V0IikpcmV0dXJuIGEuZGF0ZXBpY2tlclsiXyIrYisiRGF0ZXBpY2tlciJdLmFwcGx5KGEuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KGgpKTtpZihiPT0ib3B0aW9uIiYmCmFyZ3VtZW50cy5sZW5ndGg9PTImJnR5cGVvZiBhcmd1bWVudHNbMV09PSJzdHJpbmciKXJldHVybiBhLmRhdGVwaWNrZXJbIl8iK2IrIkRhdGVwaWNrZXIiXS5hcHBseShhLmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChoKSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3R5cGVvZiBiPT0ic3RyaW5nIj9hLmRhdGVwaWNrZXJbIl8iK2IrIkRhdGVwaWNrZXIiXS5hcHBseShhLmRhdGVwaWNrZXIsW3RoaXNdLmNvbmNhdChoKSk6YS5kYXRlcGlja2VyLl9hdHRhY2hEYXRlcGlja2VyKHRoaXMsYil9KX07YS5kYXRlcGlja2VyPW5ldyBjO2EuZGF0ZXBpY2tlci5pbml0aWFsaXplZD1mYWxzZTthLmRhdGVwaWNrZXIudXVpZD0obmV3IERhdGUpLmdldFRpbWUoKTthLmRhdGVwaWNrZXIudmVyc2lvbj0iMS44LjEzIjt3aW5kb3dbIkRQX2pRdWVyeV8iK2VdPWF9KShqUXVlcnkpOwooZnVuY3Rpb24oYSxkKXt2YXIgYz17YnV0dG9uczp0cnVlLGhlaWdodDp0cnVlLG1heEhlaWdodDp0cnVlLG1heFdpZHRoOnRydWUsbWluSGVpZ2h0OnRydWUsbWluV2lkdGg6dHJ1ZSx3aWR0aDp0cnVlfSxmPXttYXhIZWlnaHQ6dHJ1ZSxtYXhXaWR0aDp0cnVlLG1pbkhlaWdodDp0cnVlLG1pbldpZHRoOnRydWV9LGc9YS5hdHRyRm58fHt2YWw6dHJ1ZSxjc3M6dHJ1ZSxodG1sOnRydWUsdGV4dDp0cnVlLGRhdGE6dHJ1ZSx3aWR0aDp0cnVlLGhlaWdodDp0cnVlLG9mZnNldDp0cnVlLGNsaWNrOnRydWV9O2Eud2lkZ2V0KCJ1aS5kaWFsb2ciLHtvcHRpb25zOnthdXRvT3Blbjp0cnVlLGJ1dHRvbnM6e30sY2xvc2VPbkVzY2FwZTp0cnVlLGNsb3NlVGV4dDoiY2xvc2UiLGRpYWxvZ0NsYXNzOiIiLGRyYWdnYWJsZTp0cnVlLGhpZGU6bnVsbCxoZWlnaHQ6ImF1dG8iLG1heEhlaWdodDpmYWxzZSxtYXhXaWR0aDpmYWxzZSxtaW5IZWlnaHQ6MTUwLG1pbldpZHRoOjE1MCxtb2RhbDpmYWxzZSwKcG9zaXRpb246e215OiJjZW50ZXIiLGF0OiJjZW50ZXIiLGNvbGxpc2lvbjoiZml0Iix1c2luZzpmdW5jdGlvbihlKXt2YXIgaT1hKHRoaXMpLmNzcyhlKS5vZmZzZXQoKS50b3A7aTwwJiZhKHRoaXMpLmNzcygidG9wIixlLnRvcC1pKX19LHJlc2l6YWJsZTp0cnVlLHNob3c6bnVsbCxzdGFjazp0cnVlLHRpdGxlOiIiLHdpZHRoOjMwMCx6SW5kZXg6MUUzfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5vcmlnaW5hbFRpdGxlPXRoaXMuZWxlbWVudC5hdHRyKCJ0aXRsZSIpO2lmKHR5cGVvZiB0aGlzLm9yaWdpbmFsVGl0bGUhPT0ic3RyaW5nIil0aGlzLm9yaWdpbmFsVGl0bGU9IiI7dGhpcy5vcHRpb25zLnRpdGxlPXRoaXMub3B0aW9ucy50aXRsZXx8dGhpcy5vcmlnaW5hbFRpdGxlO3ZhciBlPXRoaXMsaT1lLm9wdGlvbnMsYj1pLnRpdGxlfHwiJiMxNjA7IixoPWEudWkuZGlhbG9nLmdldFRpdGxlSWQoZS5lbGVtZW50KSxqPShlLnVpRGlhbG9nPWEoIjxkaXY+PC9kaXY+IikpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmhpZGUoKS5hZGRDbGFzcygidWktZGlhbG9nIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsICIrCmkuZGlhbG9nQ2xhc3MpLmNzcyh7ekluZGV4OmkuekluZGV4fSkuYXR0cigidGFiSW5kZXgiLC0xKS5jc3MoIm91dGxpbmUiLDApLmtleWRvd24oZnVuY3Rpb24obil7aWYoaS5jbG9zZU9uRXNjYXBlJiZuLmtleUNvZGUmJm4ua2V5Q29kZT09PWEudWkua2V5Q29kZS5FU0NBUEUpe2UuY2xvc2Uobik7bi5wcmV2ZW50RGVmYXVsdCgpfX0pLmF0dHIoe3JvbGU6ImRpYWxvZyIsImFyaWEtbGFiZWxsZWRieSI6aH0pLm1vdXNlZG93bihmdW5jdGlvbihuKXtlLm1vdmVUb1RvcChmYWxzZSxuKX0pO2UuZWxlbWVudC5zaG93KCkucmVtb3ZlQXR0cigidGl0bGUiKS5hZGRDbGFzcygidWktZGlhbG9nLWNvbnRlbnQgdWktd2lkZ2V0LWNvbnRlbnQiKS5hcHBlbmRUbyhqKTt2YXIgbD0oZS51aURpYWxvZ1RpdGxlYmFyPWEoIjxkaXY+PC9kaXY+IikpLmFkZENsYXNzKCJ1aS1kaWFsb2ctdGl0bGViYXIgdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsIHVpLWhlbHBlci1jbGVhcmZpeCIpLnByZXBlbmRUbyhqKSwKbz1hKCc8YSBocmVmPSIjIj48L2E+JykuYWRkQ2xhc3MoInVpLWRpYWxvZy10aXRsZWJhci1jbG9zZSB1aS1jb3JuZXItYWxsIikuYXR0cigicm9sZSIsImJ1dHRvbiIpLmhvdmVyKGZ1bmN0aW9uKCl7by5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKX0sZnVuY3Rpb24oKXtvLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpfSkuZm9jdXMoZnVuY3Rpb24oKXtvLmFkZENsYXNzKCJ1aS1zdGF0ZS1mb2N1cyIpfSkuYmx1cihmdW5jdGlvbigpe28ucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWZvY3VzIil9KS5jbGljayhmdW5jdGlvbihuKXtlLmNsb3NlKG4pO3JldHVybiBmYWxzZX0pLmFwcGVuZFRvKGwpOyhlLnVpRGlhbG9nVGl0bGViYXJDbG9zZVRleHQ9YSgiPHNwYW4+PC9zcGFuPiIpKS5hZGRDbGFzcygidWktaWNvbiB1aS1pY29uLWNsb3NldGhpY2siKS50ZXh0KGkuY2xvc2VUZXh0KS5hcHBlbmRUbyhvKTthKCI8c3Bhbj48L3NwYW4+IikuYWRkQ2xhc3MoInVpLWRpYWxvZy10aXRsZSIpLmF0dHIoImlkIiwKaCkuaHRtbChiKS5wcmVwZW5kVG8obCk7aWYoYS5pc0Z1bmN0aW9uKGkuYmVmb3JlY2xvc2UpJiYhYS5pc0Z1bmN0aW9uKGkuYmVmb3JlQ2xvc2UpKWkuYmVmb3JlQ2xvc2U9aS5iZWZvcmVjbG9zZTtsLmZpbmQoIioiKS5hZGQobCkuZGlzYWJsZVNlbGVjdGlvbigpO2kuZHJhZ2dhYmxlJiZhLmZuLmRyYWdnYWJsZSYmZS5fbWFrZURyYWdnYWJsZSgpO2kucmVzaXphYmxlJiZhLmZuLnJlc2l6YWJsZSYmZS5fbWFrZVJlc2l6YWJsZSgpO2UuX2NyZWF0ZUJ1dHRvbnMoaS5idXR0b25zKTtlLl9pc09wZW49ZmFsc2U7YS5mbi5iZ2lmcmFtZSYmai5iZ2lmcmFtZSgpfSxfaW5pdDpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5hdXRvT3BlbiYmdGhpcy5vcGVuKCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uub3ZlcmxheSYmZS5vdmVybGF5LmRlc3Ryb3koKTtlLnVpRGlhbG9nLmhpZGUoKTtlLmVsZW1lbnQudW5iaW5kKCIuZGlhbG9nIikucmVtb3ZlRGF0YSgiZGlhbG9nIikucmVtb3ZlQ2xhc3MoInVpLWRpYWxvZy1jb250ZW50IHVpLXdpZGdldC1jb250ZW50IikuaGlkZSgpLmFwcGVuZFRvKCJib2R5Iik7CmUudWlEaWFsb2cucmVtb3ZlKCk7ZS5vcmlnaW5hbFRpdGxlJiZlLmVsZW1lbnQuYXR0cigidGl0bGUiLGUub3JpZ2luYWxUaXRsZSk7cmV0dXJuIGV9LHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVpRGlhbG9nfSxjbG9zZTpmdW5jdGlvbihlKXt2YXIgaT10aGlzLGIsaDtpZihmYWxzZSE9PWkuX3RyaWdnZXIoImJlZm9yZUNsb3NlIixlKSl7aS5vdmVybGF5JiZpLm92ZXJsYXkuZGVzdHJveSgpO2kudWlEaWFsb2cudW5iaW5kKCJrZXlwcmVzcy51aS1kaWFsb2ciKTtpLl9pc09wZW49ZmFsc2U7aWYoaS5vcHRpb25zLmhpZGUpaS51aURpYWxvZy5oaWRlKGkub3B0aW9ucy5oaWRlLGZ1bmN0aW9uKCl7aS5fdHJpZ2dlcigiY2xvc2UiLGUpfSk7ZWxzZXtpLnVpRGlhbG9nLmhpZGUoKTtpLl90cmlnZ2VyKCJjbG9zZSIsZSl9YS51aS5kaWFsb2cub3ZlcmxheS5yZXNpemUoKTtpZihpLm9wdGlvbnMubW9kYWwpe2I9MDthKCIudWktZGlhbG9nIikuZWFjaChmdW5jdGlvbigpe2lmKHRoaXMhPT0KaS51aURpYWxvZ1swXSl7aD1hKHRoaXMpLmNzcygiei1pbmRleCIpO2lzTmFOKGgpfHwoYj1NYXRoLm1heChiLGgpKX19KTthLnVpLmRpYWxvZy5tYXhaPWJ9cmV0dXJuIGl9fSxpc09wZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNPcGVufSxtb3ZlVG9Ub3A6ZnVuY3Rpb24oZSxpKXt2YXIgYj10aGlzLGg9Yi5vcHRpb25zO2lmKGgubW9kYWwmJiFlfHwhaC5zdGFjayYmIWgubW9kYWwpcmV0dXJuIGIuX3RyaWdnZXIoImZvY3VzIixpKTtpZihoLnpJbmRleD5hLnVpLmRpYWxvZy5tYXhaKWEudWkuZGlhbG9nLm1heFo9aC56SW5kZXg7aWYoYi5vdmVybGF5KXthLnVpLmRpYWxvZy5tYXhaKz0xO2Iub3ZlcmxheS4kZWwuY3NzKCJ6LWluZGV4IixhLnVpLmRpYWxvZy5vdmVybGF5Lm1heFo9YS51aS5kaWFsb2cubWF4Wil9ZT17c2Nyb2xsVG9wOmIuZWxlbWVudC5hdHRyKCJzY3JvbGxUb3AiKSxzY3JvbGxMZWZ0OmIuZWxlbWVudC5hdHRyKCJzY3JvbGxMZWZ0Iil9O2EudWkuZGlhbG9nLm1heForPQoxO2IudWlEaWFsb2cuY3NzKCJ6LWluZGV4IixhLnVpLmRpYWxvZy5tYXhaKTtiLmVsZW1lbnQuYXR0cihlKTtiLl90cmlnZ2VyKCJmb2N1cyIsaSk7cmV0dXJuIGJ9LG9wZW46ZnVuY3Rpb24oKXtpZighdGhpcy5faXNPcGVuKXt2YXIgZT10aGlzLGk9ZS5vcHRpb25zLGI9ZS51aURpYWxvZztlLm92ZXJsYXk9aS5tb2RhbD9uZXcgYS51aS5kaWFsb2cub3ZlcmxheShlKTpudWxsO2UuX3NpemUoKTtlLl9wb3NpdGlvbihpLnBvc2l0aW9uKTtiLnNob3coaS5zaG93KTtlLm1vdmVUb1RvcCh0cnVlKTtpLm1vZGFsJiZiLmJpbmQoImtleXByZXNzLnVpLWRpYWxvZyIsZnVuY3Rpb24oaCl7aWYoaC5rZXlDb2RlPT09YS51aS5rZXlDb2RlLlRBQil7dmFyIGo9YSgiOnRhYmJhYmxlIix0aGlzKSxsPWouZmlsdGVyKCI6Zmlyc3QiKTtqPWouZmlsdGVyKCI6bGFzdCIpO2lmKGgudGFyZ2V0PT09alswXSYmIWguc2hpZnRLZXkpe2wuZm9jdXMoMSk7cmV0dXJuIGZhbHNlfWVsc2UgaWYoaC50YXJnZXQ9PT0KbFswXSYmaC5zaGlmdEtleSl7ai5mb2N1cygxKTtyZXR1cm4gZmFsc2V9fX0pO2EoZS5lbGVtZW50LmZpbmQoIjp0YWJiYWJsZSIpLmdldCgpLmNvbmNhdChiLmZpbmQoIi51aS1kaWFsb2ctYnV0dG9ucGFuZSA6dGFiYmFibGUiKS5nZXQoKS5jb25jYXQoYi5nZXQoKSkpKS5lcSgwKS5mb2N1cygpO2UuX2lzT3Blbj10cnVlO2UuX3RyaWdnZXIoIm9wZW4iKTtyZXR1cm4gZX19LF9jcmVhdGVCdXR0b25zOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMsYj1mYWxzZSxoPWEoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoInVpLWRpYWxvZy1idXR0b25wYW5lIHVpLXdpZGdldC1jb250ZW50IHVpLWhlbHBlci1jbGVhcmZpeCIpLGo9YSgiPGRpdj48L2Rpdj4iKS5hZGRDbGFzcygidWktZGlhbG9nLWJ1dHRvbnNldCIpLmFwcGVuZFRvKGgpO2kudWlEaWFsb2cuZmluZCgiLnVpLWRpYWxvZy1idXR0b25wYW5lIikucmVtb3ZlKCk7dHlwZW9mIGU9PT0ib2JqZWN0IiYmZSE9PW51bGwmJmEuZWFjaChlLApmdW5jdGlvbigpe3JldHVybiEoYj10cnVlKX0pO2lmKGIpe2EuZWFjaChlLGZ1bmN0aW9uKGwsbyl7bz1hLmlzRnVuY3Rpb24obyk/e2NsaWNrOm8sdGV4dDpsfTpvO3ZhciBuPWEoJzxidXR0b24gdHlwZT0iYnV0dG9uIj48L2J1dHRvbj4nKS5jbGljayhmdW5jdGlvbigpe28uY2xpY2suYXBwbHkoaS5lbGVtZW50WzBdLGFyZ3VtZW50cyl9KS5hcHBlbmRUbyhqKTthLmVhY2gobyxmdW5jdGlvbihrLG0pe2lmKGshPT0iY2xpY2siKWsgaW4gZz9uW2tdKG0pOm4uYXR0cihrLG0pfSk7YS5mbi5idXR0b24mJm4uYnV0dG9uKCl9KTtoLmFwcGVuZFRvKGkudWlEaWFsb2cpfX0sX21ha2VEcmFnZ2FibGU6ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGwpe3JldHVybntwb3NpdGlvbjpsLnBvc2l0aW9uLG9mZnNldDpsLm9mZnNldH19dmFyIGk9dGhpcyxiPWkub3B0aW9ucyxoPWEoZG9jdW1lbnQpLGo7aS51aURpYWxvZy5kcmFnZ2FibGUoe2NhbmNlbDoiLnVpLWRpYWxvZy1jb250ZW50LCAudWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlIiwKaGFuZGxlOiIudWktZGlhbG9nLXRpdGxlYmFyIixjb250YWlubWVudDoiZG9jdW1lbnQiLHN0YXJ0OmZ1bmN0aW9uKGwsbyl7aj1iLmhlaWdodD09PSJhdXRvIj8iYXV0byI6YSh0aGlzKS5oZWlnaHQoKTthKHRoaXMpLmhlaWdodChhKHRoaXMpLmhlaWdodCgpKS5hZGRDbGFzcygidWktZGlhbG9nLWRyYWdnaW5nIik7aS5fdHJpZ2dlcigiZHJhZ1N0YXJ0IixsLGUobykpfSxkcmFnOmZ1bmN0aW9uKGwsbyl7aS5fdHJpZ2dlcigiZHJhZyIsbCxlKG8pKX0sc3RvcDpmdW5jdGlvbihsLG8pe2IucG9zaXRpb249W28ucG9zaXRpb24ubGVmdC1oLnNjcm9sbExlZnQoKSxvLnBvc2l0aW9uLnRvcC1oLnNjcm9sbFRvcCgpXTthKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1kaWFsb2ctZHJhZ2dpbmciKS5oZWlnaHQoaik7aS5fdHJpZ2dlcigiZHJhZ1N0b3AiLGwsZShvKSk7YS51aS5kaWFsb2cub3ZlcmxheS5yZXNpemUoKX19KX0sX21ha2VSZXNpemFibGU6ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gaShsKXtyZXR1cm57b3JpZ2luYWxQb3NpdGlvbjpsLm9yaWdpbmFsUG9zaXRpb24sCm9yaWdpbmFsU2l6ZTpsLm9yaWdpbmFsU2l6ZSxwb3NpdGlvbjpsLnBvc2l0aW9uLHNpemU6bC5zaXplfX1lPWU9PT1kP3RoaXMub3B0aW9ucy5yZXNpemFibGU6ZTt2YXIgYj10aGlzLGg9Yi5vcHRpb25zLGo9Yi51aURpYWxvZy5jc3MoInBvc2l0aW9uIik7ZT10eXBlb2YgZT09PSJzdHJpbmciP2U6Im4sZSxzLHcsc2Usc3csbmUsbnciO2IudWlEaWFsb2cucmVzaXphYmxlKHtjYW5jZWw6Ii51aS1kaWFsb2ctY29udGVudCIsY29udGFpbm1lbnQ6ImRvY3VtZW50IixhbHNvUmVzaXplOmIuZWxlbWVudCxtYXhXaWR0aDpoLm1heFdpZHRoLG1heEhlaWdodDpoLm1heEhlaWdodCxtaW5XaWR0aDpoLm1pbldpZHRoLG1pbkhlaWdodDpiLl9taW5IZWlnaHQoKSxoYW5kbGVzOmUsc3RhcnQ6ZnVuY3Rpb24obCxvKXthKHRoaXMpLmFkZENsYXNzKCJ1aS1kaWFsb2ctcmVzaXppbmciKTtiLl90cmlnZ2VyKCJyZXNpemVTdGFydCIsbCxpKG8pKX0scmVzaXplOmZ1bmN0aW9uKGwsbyl7Yi5fdHJpZ2dlcigicmVzaXplIiwKbCxpKG8pKX0sc3RvcDpmdW5jdGlvbihsLG8pe2EodGhpcykucmVtb3ZlQ2xhc3MoInVpLWRpYWxvZy1yZXNpemluZyIpO2guaGVpZ2h0PWEodGhpcykuaGVpZ2h0KCk7aC53aWR0aD1hKHRoaXMpLndpZHRoKCk7Yi5fdHJpZ2dlcigicmVzaXplU3RvcCIsbCxpKG8pKTthLnVpLmRpYWxvZy5vdmVybGF5LnJlc2l6ZSgpfX0pLmNzcygicG9zaXRpb24iLGopLmZpbmQoIi51aS1yZXNpemFibGUtc2UiKS5hZGRDbGFzcygidWktaWNvbiB1aS1pY29uLWdyaXAtZGlhZ29uYWwtc2UiKX0sX21pbkhlaWdodDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztyZXR1cm4gZS5oZWlnaHQ9PT0iYXV0byI/ZS5taW5IZWlnaHQ6TWF0aC5taW4oZS5taW5IZWlnaHQsZS5oZWlnaHQpfSxfcG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIGk9W10sYj1bMCwwXSxoO2lmKGUpe2lmKHR5cGVvZiBlPT09InN0cmluZyJ8fHR5cGVvZiBlPT09Im9iamVjdCImJiIwImluIGUpe2k9ZS5zcGxpdD9lLnNwbGl0KCIgIik6CltlWzBdLGVbMV1dO2lmKGkubGVuZ3RoPT09MSlpWzFdPWlbMF07YS5lYWNoKFsibGVmdCIsInRvcCJdLGZ1bmN0aW9uKGosbCl7aWYoK2lbal09PT1pW2pdKXtiW2pdPWlbal07aVtqXT1sfX0pO2U9e215Omkuam9pbigiICIpLGF0Omkuam9pbigiICIpLG9mZnNldDpiLmpvaW4oIiAiKX19ZT1hLmV4dGVuZCh7fSxhLnVpLmRpYWxvZy5wcm90b3R5cGUub3B0aW9ucy5wb3NpdGlvbixlKX1lbHNlIGU9YS51aS5kaWFsb2cucHJvdG90eXBlLm9wdGlvbnMucG9zaXRpb247KGg9dGhpcy51aURpYWxvZy5pcygiOnZpc2libGUiKSl8fHRoaXMudWlEaWFsb2cuc2hvdygpO3RoaXMudWlEaWFsb2cuY3NzKHt0b3A6MCxsZWZ0OjB9KS5wb3NpdGlvbihhLmV4dGVuZCh7b2Y6d2luZG93fSxlKSk7aHx8dGhpcy51aURpYWxvZy5oaWRlKCl9LF9zZXRPcHRpb25zOmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMsYj17fSxoPWZhbHNlO2EuZWFjaChlLGZ1bmN0aW9uKGosbCl7aS5fc2V0T3B0aW9uKGosbCk7CmlmKGogaW4gYyloPXRydWU7aWYoaiBpbiBmKWJbal09bH0pO2gmJnRoaXMuX3NpemUoKTt0aGlzLnVpRGlhbG9nLmlzKCI6ZGF0YShyZXNpemFibGUpIikmJnRoaXMudWlEaWFsb2cucmVzaXphYmxlKCJvcHRpb24iLGIpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsaSl7dmFyIGI9dGhpcyxoPWIudWlEaWFsb2c7c3dpdGNoKGUpe2Nhc2UgImJlZm9yZWNsb3NlIjplPSJiZWZvcmVDbG9zZSI7YnJlYWs7Y2FzZSAiYnV0dG9ucyI6Yi5fY3JlYXRlQnV0dG9ucyhpKTticmVhaztjYXNlICJjbG9zZVRleHQiOmIudWlEaWFsb2dUaXRsZWJhckNsb3NlVGV4dC50ZXh0KCIiK2kpO2JyZWFrO2Nhc2UgImRpYWxvZ0NsYXNzIjpoLnJlbW92ZUNsYXNzKGIub3B0aW9ucy5kaWFsb2dDbGFzcykuYWRkQ2xhc3MoInVpLWRpYWxvZyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCAiK2kpO2JyZWFrO2Nhc2UgImRpc2FibGVkIjppP2guYWRkQ2xhc3MoInVpLWRpYWxvZy1kaXNhYmxlZCIpOgpoLnJlbW92ZUNsYXNzKCJ1aS1kaWFsb2ctZGlzYWJsZWQiKTticmVhaztjYXNlICJkcmFnZ2FibGUiOnZhciBqPWguaXMoIjpkYXRhKGRyYWdnYWJsZSkiKTtqJiYhaSYmaC5kcmFnZ2FibGUoImRlc3Ryb3kiKTshaiYmaSYmYi5fbWFrZURyYWdnYWJsZSgpO2JyZWFrO2Nhc2UgInBvc2l0aW9uIjpiLl9wb3NpdGlvbihpKTticmVhaztjYXNlICJyZXNpemFibGUiOihqPWguaXMoIjpkYXRhKHJlc2l6YWJsZSkiKSkmJiFpJiZoLnJlc2l6YWJsZSgiZGVzdHJveSIpO2omJnR5cGVvZiBpPT09InN0cmluZyImJmgucmVzaXphYmxlKCJvcHRpb24iLCJoYW5kbGVzIixpKTshaiYmaSE9PWZhbHNlJiZiLl9tYWtlUmVzaXphYmxlKGkpO2JyZWFrO2Nhc2UgInRpdGxlIjphKCIudWktZGlhbG9nLXRpdGxlIixiLnVpRGlhbG9nVGl0bGViYXIpLmh0bWwoIiIrKGl8fCImIzE2MDsiKSk7YnJlYWt9YS5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkoYixhcmd1bWVudHMpfSxfc2l6ZTpmdW5jdGlvbigpe3ZhciBlPQp0aGlzLm9wdGlvbnMsaSxiLGg9dGhpcy51aURpYWxvZy5pcygiOnZpc2libGUiKTt0aGlzLmVsZW1lbnQuc2hvdygpLmNzcyh7d2lkdGg6ImF1dG8iLG1pbkhlaWdodDowLGhlaWdodDowfSk7aWYoZS5taW5XaWR0aD5lLndpZHRoKWUud2lkdGg9ZS5taW5XaWR0aDtpPXRoaXMudWlEaWFsb2cuY3NzKHtoZWlnaHQ6ImF1dG8iLHdpZHRoOmUud2lkdGh9KS5oZWlnaHQoKTtiPU1hdGgubWF4KDAsZS5taW5IZWlnaHQtaSk7aWYoZS5oZWlnaHQ9PT0iYXV0byIpaWYoYS5zdXBwb3J0Lm1pbkhlaWdodCl0aGlzLmVsZW1lbnQuY3NzKHttaW5IZWlnaHQ6YixoZWlnaHQ6ImF1dG8ifSk7ZWxzZXt0aGlzLnVpRGlhbG9nLnNob3coKTtlPXRoaXMuZWxlbWVudC5jc3MoImhlaWdodCIsImF1dG8iKS5oZWlnaHQoKTtofHx0aGlzLnVpRGlhbG9nLmhpZGUoKTt0aGlzLmVsZW1lbnQuaGVpZ2h0KE1hdGgubWF4KGUsYikpfWVsc2UgdGhpcy5lbGVtZW50LmhlaWdodChNYXRoLm1heChlLmhlaWdodC0KaSwwKSk7dGhpcy51aURpYWxvZy5pcygiOmRhdGEocmVzaXphYmxlKSIpJiZ0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZSgib3B0aW9uIiwibWluSGVpZ2h0Iix0aGlzLl9taW5IZWlnaHQoKSl9fSk7YS5leHRlbmQoYS51aS5kaWFsb2cse3ZlcnNpb246IjEuOC4xMyIsdXVpZDowLG1heFo6MCxnZXRUaXRsZUlkOmZ1bmN0aW9uKGUpe2U9ZS5hdHRyKCJpZCIpO2lmKCFlKXt0aGlzLnV1aWQrPTE7ZT10aGlzLnV1aWR9cmV0dXJuInVpLWRpYWxvZy10aXRsZS0iK2V9LG92ZXJsYXk6ZnVuY3Rpb24oZSl7dGhpcy4kZWw9YS51aS5kaWFsb2cub3ZlcmxheS5jcmVhdGUoZSl9fSk7YS5leHRlbmQoYS51aS5kaWFsb2cub3ZlcmxheSx7aW5zdGFuY2VzOltdLG9sZEluc3RhbmNlczpbXSxtYXhaOjAsZXZlbnRzOmEubWFwKCJmb2N1cyxtb3VzZWRvd24sbW91c2V1cCxrZXlkb3duLGtleXByZXNzLGNsaWNrIi5zcGxpdCgiLCIpLGZ1bmN0aW9uKGUpe3JldHVybiBlKyIuZGlhbG9nLW92ZXJsYXkifSkuam9pbigiICIpLApjcmVhdGU6ZnVuY3Rpb24oZSl7aWYodGhpcy5pbnN0YW5jZXMubGVuZ3RoPT09MCl7c2V0VGltZW91dChmdW5jdGlvbigpe2EudWkuZGlhbG9nLm92ZXJsYXkuaW5zdGFuY2VzLmxlbmd0aCYmYShkb2N1bWVudCkuYmluZChhLnVpLmRpYWxvZy5vdmVybGF5LmV2ZW50cyxmdW5jdGlvbihiKXtpZihhKGIudGFyZ2V0KS56SW5kZXgoKTxhLnVpLmRpYWxvZy5vdmVybGF5Lm1heFopcmV0dXJuIGZhbHNlfSl9LDEpO2EoZG9jdW1lbnQpLmJpbmQoImtleWRvd24uZGlhbG9nLW92ZXJsYXkiLGZ1bmN0aW9uKGIpe2lmKGUub3B0aW9ucy5jbG9zZU9uRXNjYXBlJiZiLmtleUNvZGUmJmIua2V5Q29kZT09PWEudWkua2V5Q29kZS5FU0NBUEUpe2UuY2xvc2UoYik7Yi5wcmV2ZW50RGVmYXVsdCgpfX0pO2Eod2luZG93KS5iaW5kKCJyZXNpemUuZGlhbG9nLW92ZXJsYXkiLGEudWkuZGlhbG9nLm92ZXJsYXkucmVzaXplKX12YXIgaT0odGhpcy5vbGRJbnN0YW5jZXMucG9wKCl8fGEoIjxkaXY+PC9kaXY+IikuYWRkQ2xhc3MoInVpLXdpZGdldC1vdmVybGF5IikpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmNzcyh7d2lkdGg6dGhpcy53aWR0aCgpLApoZWlnaHQ6dGhpcy5oZWlnaHQoKX0pO2EuZm4uYmdpZnJhbWUmJmkuYmdpZnJhbWUoKTt0aGlzLmluc3RhbmNlcy5wdXNoKGkpO3JldHVybiBpfSxkZXN0cm95OmZ1bmN0aW9uKGUpe3ZhciBpPWEuaW5BcnJheShlLHRoaXMuaW5zdGFuY2VzKTtpIT0tMSYmdGhpcy5vbGRJbnN0YW5jZXMucHVzaCh0aGlzLmluc3RhbmNlcy5zcGxpY2UoaSwxKVswXSk7dGhpcy5pbnN0YW5jZXMubGVuZ3RoPT09MCYmYShbZG9jdW1lbnQsd2luZG93XSkudW5iaW5kKCIuZGlhbG9nLW92ZXJsYXkiKTtlLnJlbW92ZSgpO3ZhciBiPTA7YS5lYWNoKHRoaXMuaW5zdGFuY2VzLGZ1bmN0aW9uKCl7Yj1NYXRoLm1heChiLHRoaXMuY3NzKCJ6LWluZGV4IikpfSk7dGhpcy5tYXhaPWJ9LGhlaWdodDpmdW5jdGlvbigpe3ZhciBlLGk7aWYoYS5icm93c2VyLm1zaWUmJmEuYnJvd3Nlci52ZXJzaW9uPDcpe2U9TWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCxkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCk7Cmk9TWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodCxkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCk7cmV0dXJuIGU8aT9hKHdpbmRvdykuaGVpZ2h0KCkrInB4IjplKyJweCJ9ZWxzZSByZXR1cm4gYShkb2N1bWVudCkuaGVpZ2h0KCkrInB4In0sd2lkdGg6ZnVuY3Rpb24oKXt2YXIgZSxpO2lmKGEuYnJvd3Nlci5tc2llJiZhLmJyb3dzZXIudmVyc2lvbjw3KXtlPU1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCxkb2N1bWVudC5ib2R5LnNjcm9sbFdpZHRoKTtpPU1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRXaWR0aCxkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoKTtyZXR1cm4gZTxpP2Eod2luZG93KS53aWR0aCgpKyJweCI6ZSsicHgifWVsc2UgcmV0dXJuIGEoZG9jdW1lbnQpLndpZHRoKCkrInB4In0scmVzaXplOmZ1bmN0aW9uKCl7dmFyIGU9YShbXSk7YS5lYWNoKGEudWkuZGlhbG9nLm92ZXJsYXkuaW5zdGFuY2VzLApmdW5jdGlvbigpe2U9ZS5hZGQodGhpcyl9KTtlLmNzcyh7d2lkdGg6MCxoZWlnaHQ6MH0pLmNzcyh7d2lkdGg6YS51aS5kaWFsb2cub3ZlcmxheS53aWR0aCgpLGhlaWdodDphLnVpLmRpYWxvZy5vdmVybGF5LmhlaWdodCgpfSl9fSk7YS5leHRlbmQoYS51aS5kaWFsb2cub3ZlcmxheS5wcm90b3R5cGUse2Rlc3Ryb3k6ZnVuY3Rpb24oKXthLnVpLmRpYWxvZy5vdmVybGF5LmRlc3Ryb3kodGhpcy4kZWwpfX0pfSkoalF1ZXJ5KTsKKGZ1bmN0aW9uKGEpe2EudWk9YS51aXx8e307dmFyIGQ9L2xlZnR8Y2VudGVyfHJpZ2h0LyxjPS90b3B8Y2VudGVyfGJvdHRvbS8sZj1hLmZuLnBvc2l0aW9uLGc9YS5mbi5vZmZzZXQ7YS5mbi5wb3NpdGlvbj1mdW5jdGlvbihlKXtpZighZXx8IWUub2YpcmV0dXJuIGYuYXBwbHkodGhpcyxhcmd1bWVudHMpO2U9YS5leHRlbmQoe30sZSk7dmFyIGk9YShlLm9mKSxiPWlbMF0saD0oZS5jb2xsaXNpb258fCJmbGlwIikuc3BsaXQoIiAiKSxqPWUub2Zmc2V0P2Uub2Zmc2V0LnNwbGl0KCIgIik6WzAsMF0sbCxvLG47aWYoYi5ub2RlVHlwZT09PTkpe2w9aS53aWR0aCgpO289aS5oZWlnaHQoKTtuPXt0b3A6MCxsZWZ0OjB9fWVsc2UgaWYoYi5zZXRUaW1lb3V0KXtsPWkud2lkdGgoKTtvPWkuaGVpZ2h0KCk7bj17dG9wOmkuc2Nyb2xsVG9wKCksbGVmdDppLnNjcm9sbExlZnQoKX19ZWxzZSBpZihiLnByZXZlbnREZWZhdWx0KXtlLmF0PSJsZWZ0IHRvcCI7bD1vPTA7bj17dG9wOmUub2YucGFnZVksCmxlZnQ6ZS5vZi5wYWdlWH19ZWxzZXtsPWkub3V0ZXJXaWR0aCgpO289aS5vdXRlckhlaWdodCgpO249aS5vZmZzZXQoKX1hLmVhY2goWyJteSIsImF0Il0sZnVuY3Rpb24oKXt2YXIgaz0oZVt0aGlzXXx8IiIpLnNwbGl0KCIgIik7aWYoay5sZW5ndGg9PT0xKWs9ZC50ZXN0KGtbMF0pP2suY29uY2F0KFsiY2VudGVyIl0pOmMudGVzdChrWzBdKT9bImNlbnRlciJdLmNvbmNhdChrKTpbImNlbnRlciIsImNlbnRlciJdO2tbMF09ZC50ZXN0KGtbMF0pP2tbMF06ImNlbnRlciI7a1sxXT1jLnRlc3Qoa1sxXSk/a1sxXToiY2VudGVyIjtlW3RoaXNdPWt9KTtpZihoLmxlbmd0aD09PTEpaFsxXT1oWzBdO2pbMF09cGFyc2VJbnQoalswXSwxMCl8fDA7aWYoai5sZW5ndGg9PT0xKWpbMV09alswXTtqWzFdPXBhcnNlSW50KGpbMV0sMTApfHwwO2lmKGUuYXRbMF09PT0icmlnaHQiKW4ubGVmdCs9bDtlbHNlIGlmKGUuYXRbMF09PT0iY2VudGVyIiluLmxlZnQrPWwvMjtpZihlLmF0WzFdPT09ImJvdHRvbSIpbi50b3ArPQpvO2Vsc2UgaWYoZS5hdFsxXT09PSJjZW50ZXIiKW4udG9wKz1vLzI7bi5sZWZ0Kz1qWzBdO24udG9wKz1qWzFdO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgaz1hKHRoaXMpLG09ay5vdXRlcldpZHRoKCkscD1rLm91dGVySGVpZ2h0KCkscT1wYXJzZUludChhLmN1ckNTUyh0aGlzLCJtYXJnaW5MZWZ0Iix0cnVlKSl8fDAscz1wYXJzZUludChhLmN1ckNTUyh0aGlzLCJtYXJnaW5Ub3AiLHRydWUpKXx8MCxyPW0rcSsocGFyc2VJbnQoYS5jdXJDU1ModGhpcywibWFyZ2luUmlnaHQiLHRydWUpKXx8MCksdT1wK3MrKHBhcnNlSW50KGEuY3VyQ1NTKHRoaXMsIm1hcmdpbkJvdHRvbSIsdHJ1ZSkpfHwwKSx2PWEuZXh0ZW5kKHt9LG4pLHc7aWYoZS5teVswXT09PSJyaWdodCIpdi5sZWZ0LT1tO2Vsc2UgaWYoZS5teVswXT09PSJjZW50ZXIiKXYubGVmdC09bS8yO2lmKGUubXlbMV09PT0iYm90dG9tIil2LnRvcC09cDtlbHNlIGlmKGUubXlbMV09PT0iY2VudGVyIil2LnRvcC09CnAvMjt2LmxlZnQ9TWF0aC5yb3VuZCh2LmxlZnQpO3YudG9wPU1hdGgucm91bmQodi50b3ApO3c9e2xlZnQ6di5sZWZ0LXEsdG9wOnYudG9wLXN9O2EuZWFjaChbImxlZnQiLCJ0b3AiXSxmdW5jdGlvbih4LHope2EudWkucG9zaXRpb25baFt4XV0mJmEudWkucG9zaXRpb25baFt4XV1bel0odix7dGFyZ2V0V2lkdGg6bCx0YXJnZXRIZWlnaHQ6byxlbGVtV2lkdGg6bSxlbGVtSGVpZ2h0OnAsY29sbGlzaW9uUG9zaXRpb246dyxjb2xsaXNpb25XaWR0aDpyLGNvbGxpc2lvbkhlaWdodDp1LG9mZnNldDpqLG15OmUubXksYXQ6ZS5hdH0pfSk7YS5mbi5iZ2lmcmFtZSYmay5iZ2lmcmFtZSgpO2sub2Zmc2V0KGEuZXh0ZW5kKHYse3VzaW5nOmUudXNpbmd9KSl9KX07YS51aS5wb3NpdGlvbj17Zml0OntsZWZ0OmZ1bmN0aW9uKGUsaSl7dmFyIGI9YSh3aW5kb3cpO2I9aS5jb2xsaXNpb25Qb3NpdGlvbi5sZWZ0K2kuY29sbGlzaW9uV2lkdGgtYi53aWR0aCgpLWIuc2Nyb2xsTGVmdCgpO2UubGVmdD0KYj4wP2UubGVmdC1iOk1hdGgubWF4KGUubGVmdC1pLmNvbGxpc2lvblBvc2l0aW9uLmxlZnQsZS5sZWZ0KX0sdG9wOmZ1bmN0aW9uKGUsaSl7dmFyIGI9YSh3aW5kb3cpO2I9aS5jb2xsaXNpb25Qb3NpdGlvbi50b3AraS5jb2xsaXNpb25IZWlnaHQtYi5oZWlnaHQoKS1iLnNjcm9sbFRvcCgpO2UudG9wPWI+MD9lLnRvcC1iOk1hdGgubWF4KGUudG9wLWkuY29sbGlzaW9uUG9zaXRpb24udG9wLGUudG9wKX19LGZsaXA6e2xlZnQ6ZnVuY3Rpb24oZSxpKXtpZihpLmF0WzBdIT09ImNlbnRlciIpe3ZhciBiPWEod2luZG93KTtiPWkuY29sbGlzaW9uUG9zaXRpb24ubGVmdCtpLmNvbGxpc2lvbldpZHRoLWIud2lkdGgoKS1iLnNjcm9sbExlZnQoKTt2YXIgaD1pLm15WzBdPT09ImxlZnQiPy1pLmVsZW1XaWR0aDppLm15WzBdPT09InJpZ2h0Ij9pLmVsZW1XaWR0aDowLGo9aS5hdFswXT09PSJsZWZ0Ij9pLnRhcmdldFdpZHRoOi1pLnRhcmdldFdpZHRoLGw9LTIqaS5vZmZzZXRbMF07ZS5sZWZ0Kz0KaS5jb2xsaXNpb25Qb3NpdGlvbi5sZWZ0PDA/aCtqK2w6Yj4wP2graitsOjB9fSx0b3A6ZnVuY3Rpb24oZSxpKXtpZihpLmF0WzFdIT09ImNlbnRlciIpe3ZhciBiPWEod2luZG93KTtiPWkuY29sbGlzaW9uUG9zaXRpb24udG9wK2kuY29sbGlzaW9uSGVpZ2h0LWIuaGVpZ2h0KCktYi5zY3JvbGxUb3AoKTt2YXIgaD1pLm15WzFdPT09InRvcCI/LWkuZWxlbUhlaWdodDppLm15WzFdPT09ImJvdHRvbSI/aS5lbGVtSGVpZ2h0OjAsaj1pLmF0WzFdPT09InRvcCI/aS50YXJnZXRIZWlnaHQ6LWkudGFyZ2V0SGVpZ2h0LGw9LTIqaS5vZmZzZXRbMV07ZS50b3ArPWkuY29sbGlzaW9uUG9zaXRpb24udG9wPDA/aCtqK2w6Yj4wP2graitsOjB9fX19O2lmKCFhLm9mZnNldC5zZXRPZmZzZXQpe2Eub2Zmc2V0LnNldE9mZnNldD1mdW5jdGlvbihlLGkpe2lmKC9zdGF0aWMvLnRlc3QoYS5jdXJDU1MoZSwicG9zaXRpb24iKSkpZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiO3ZhciBiPWEoZSksCmg9Yi5vZmZzZXQoKSxqPXBhcnNlSW50KGEuY3VyQ1NTKGUsInRvcCIsdHJ1ZSksMTApfHwwLGw9cGFyc2VJbnQoYS5jdXJDU1MoZSwibGVmdCIsdHJ1ZSksMTApfHwwO2g9e3RvcDppLnRvcC1oLnRvcCtqLGxlZnQ6aS5sZWZ0LWgubGVmdCtsfTsidXNpbmciaW4gaT9pLnVzaW5nLmNhbGwoZSxoKTpiLmNzcyhoKX07YS5mbi5vZmZzZXQ9ZnVuY3Rpb24oZSl7dmFyIGk9dGhpc1swXTtpZighaXx8IWkub3duZXJEb2N1bWVudClyZXR1cm4gbnVsbDtpZihlKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXthLm9mZnNldC5zZXRPZmZzZXQodGhpcyxlKX0pO3JldHVybiBnLmNhbGwodGhpcyl9fX0pKGpRdWVyeSk7CihmdW5jdGlvbihhLGQpe2Eud2lkZ2V0KCJ1aS5wcm9ncmVzc2JhciIse29wdGlvbnM6e3ZhbHVlOjAsbWF4OjEwMH0sbWluOjAsX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5hZGRDbGFzcygidWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKS5hdHRyKHtyb2xlOiJwcm9ncmVzc2JhciIsImFyaWEtdmFsdWVtaW4iOnRoaXMubWluLCJhcmlhLXZhbHVlbWF4Ijp0aGlzLm9wdGlvbnMubWF4LCJhcmlhLXZhbHVlbm93Ijp0aGlzLl92YWx1ZSgpfSk7dGhpcy52YWx1ZURpdj1hKCI8ZGl2IGNsYXNzPSd1aS1wcm9ncmVzc2Jhci12YWx1ZSB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1sZWZ0Jz48L2Rpdj4iKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO3RoaXMub2xkVmFsdWU9dGhpcy5fdmFsdWUoKTt0aGlzLl9yZWZyZXNoVmFsdWUoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktcHJvZ3Jlc3NiYXIgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKS5yZW1vdmVBdHRyKCJyb2xlIikucmVtb3ZlQXR0cigiYXJpYS12YWx1ZW1pbiIpLnJlbW92ZUF0dHIoImFyaWEtdmFsdWVtYXgiKS5yZW1vdmVBdHRyKCJhcmlhLXZhbHVlbm93Iik7CnRoaXMudmFsdWVEaXYucmVtb3ZlKCk7YS5XaWRnZXQucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx2YWx1ZTpmdW5jdGlvbihjKXtpZihjPT09ZClyZXR1cm4gdGhpcy5fdmFsdWUoKTt0aGlzLl9zZXRPcHRpb24oInZhbHVlIixjKTtyZXR1cm4gdGhpc30sX3NldE9wdGlvbjpmdW5jdGlvbihjLGYpe2lmKGM9PT0idmFsdWUiKXt0aGlzLm9wdGlvbnMudmFsdWU9Zjt0aGlzLl9yZWZyZXNoVmFsdWUoKTt0aGlzLl92YWx1ZSgpPT09dGhpcy5vcHRpb25zLm1heCYmdGhpcy5fdHJpZ2dlcigiY29tcGxldGUiKX1hLldpZGdldC5wcm90b3R5cGUuX3NldE9wdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LF92YWx1ZTpmdW5jdGlvbigpe3ZhciBjPXRoaXMub3B0aW9ucy52YWx1ZTtpZih0eXBlb2YgYyE9PSJudW1iZXIiKWM9MDtyZXR1cm4gTWF0aC5taW4odGhpcy5vcHRpb25zLm1heCxNYXRoLm1heCh0aGlzLm1pbixjKSl9LF9wZXJjZW50YWdlOmZ1bmN0aW9uKCl7cmV0dXJuIDEwMCoKdGhpcy5fdmFsdWUoKS90aGlzLm9wdGlvbnMubWF4fSxfcmVmcmVzaFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy52YWx1ZSgpLGY9dGhpcy5fcGVyY2VudGFnZSgpO2lmKHRoaXMub2xkVmFsdWUhPT1jKXt0aGlzLm9sZFZhbHVlPWM7dGhpcy5fdHJpZ2dlcigiY2hhbmdlIil9dGhpcy52YWx1ZURpdi50b2dnbGUoYz50aGlzLm1pbikudG9nZ2xlQ2xhc3MoInVpLWNvcm5lci1yaWdodCIsYz09PXRoaXMub3B0aW9ucy5tYXgpLndpZHRoKGYudG9GaXhlZCgwKSsiJSIpO3RoaXMuZWxlbWVudC5hdHRyKCJhcmlhLXZhbHVlbm93IixjKX19KTthLmV4dGVuZChhLnVpLnByb2dyZXNzYmFyLHt2ZXJzaW9uOiIxLjguMTMifSl9KShqUXVlcnkpOwooZnVuY3Rpb24oYSl7YS53aWRnZXQoInVpLnNsaWRlciIsYS51aS5tb3VzZSx7d2lkZ2V0RXZlbnRQcmVmaXg6InNsaWRlIixvcHRpb25zOnthbmltYXRlOmZhbHNlLGRpc3RhbmNlOjAsbWF4OjEwMCxtaW46MCxvcmllbnRhdGlvbjoiaG9yaXpvbnRhbCIscmFuZ2U6ZmFsc2Usc3RlcDoxLHZhbHVlOjAsdmFsdWVzOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGM9dGhpcy5vcHRpb25zLGY9dGhpcy5lbGVtZW50LmZpbmQoIi51aS1zbGlkZXItaGFuZGxlIikuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCIpLGc9Yy52YWx1ZXMmJmMudmFsdWVzLmxlbmd0aHx8MSxlPVtdO3RoaXMuX21vdXNlU2xpZGluZz10aGlzLl9rZXlTbGlkaW5nPWZhbHNlO3RoaXMuX2FuaW1hdGVPZmY9dHJ1ZTt0aGlzLl9oYW5kbGVJbmRleD1udWxsO3RoaXMuX2RldGVjdE9yaWVudGF0aW9uKCk7dGhpcy5fbW91c2VJbml0KCk7dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1zbGlkZXIgdWktc2xpZGVyLSIrCnRoaXMub3JpZW50YXRpb24rIiB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCIrKGMuZGlzYWJsZWQ/IiB1aS1zbGlkZXItZGlzYWJsZWQgdWktZGlzYWJsZWQiOiIiKSk7dGhpcy5yYW5nZT1hKFtdKTtpZihjLnJhbmdlKXtpZihjLnJhbmdlPT09dHJ1ZSl7aWYoIWMudmFsdWVzKWMudmFsdWVzPVt0aGlzLl92YWx1ZU1pbigpLHRoaXMuX3ZhbHVlTWluKCldO2lmKGMudmFsdWVzLmxlbmd0aCYmYy52YWx1ZXMubGVuZ3RoIT09MiljLnZhbHVlcz1bYy52YWx1ZXNbMF0sYy52YWx1ZXNbMF1dfXRoaXMucmFuZ2U9YSgiPGRpdj48L2Rpdj4iKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKCJ1aS1zbGlkZXItcmFuZ2UgdWktd2lkZ2V0LWhlYWRlciIrKGMucmFuZ2U9PT0ibWluInx8Yy5yYW5nZT09PSJtYXgiPyIgdWktc2xpZGVyLXJhbmdlLSIrYy5yYW5nZToiIikpfWZvcih2YXIgaT1mLmxlbmd0aDtpPGc7aSs9MSllLnB1c2goIjxhIGNsYXNzPSd1aS1zbGlkZXItaGFuZGxlIHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCcgaHJlZj0nIyc+PC9hPiIpOwp0aGlzLmhhbmRsZXM9Zi5hZGQoYShlLmpvaW4oIiIpKS5hcHBlbmRUbyhkLmVsZW1lbnQpKTt0aGlzLmhhbmRsZT10aGlzLmhhbmRsZXMuZXEoMCk7dGhpcy5oYW5kbGVzLmFkZCh0aGlzLnJhbmdlKS5maWx0ZXIoImEiKS5jbGljayhmdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0KCl9KS5ob3ZlcihmdW5jdGlvbigpe2MuZGlzYWJsZWR8fGEodGhpcykuYWRkQ2xhc3MoInVpLXN0YXRlLWhvdmVyIil9LGZ1bmN0aW9uKCl7YSh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKX0pLmZvY3VzKGZ1bmN0aW9uKCl7aWYoYy5kaXNhYmxlZClhKHRoaXMpLmJsdXIoKTtlbHNle2EoIi51aS1zbGlkZXIgLnVpLXN0YXRlLWZvY3VzIikucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWZvY3VzIik7YSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtZm9jdXMiKX19KS5ibHVyKGZ1bmN0aW9uKCl7YSh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtZm9jdXMiKX0pO3RoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uKGIpe2EodGhpcykuZGF0YSgiaW5kZXgudWktc2xpZGVyLWhhbmRsZSIsCmIpfSk7dGhpcy5oYW5kbGVzLmtleWRvd24oZnVuY3Rpb24oYil7dmFyIGg9dHJ1ZSxqPWEodGhpcykuZGF0YSgiaW5kZXgudWktc2xpZGVyLWhhbmRsZSIpLGwsbyxuO2lmKCFkLm9wdGlvbnMuZGlzYWJsZWQpe3N3aXRjaChiLmtleUNvZGUpe2Nhc2UgYS51aS5rZXlDb2RlLkhPTUU6Y2FzZSBhLnVpLmtleUNvZGUuRU5EOmNhc2UgYS51aS5rZXlDb2RlLlBBR0VfVVA6Y2FzZSBhLnVpLmtleUNvZGUuUEFHRV9ET1dOOmNhc2UgYS51aS5rZXlDb2RlLlVQOmNhc2UgYS51aS5rZXlDb2RlLlJJR0hUOmNhc2UgYS51aS5rZXlDb2RlLkRPV046Y2FzZSBhLnVpLmtleUNvZGUuTEVGVDpoPWZhbHNlO2lmKCFkLl9rZXlTbGlkaW5nKXtkLl9rZXlTbGlkaW5nPXRydWU7YSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIik7bD1kLl9zdGFydChiLGopO2lmKGw9PT1mYWxzZSlyZXR1cm59YnJlYWt9bj1kLm9wdGlvbnMuc3RlcDtsPWQub3B0aW9ucy52YWx1ZXMmJmQub3B0aW9ucy52YWx1ZXMubGVuZ3RoPwoobz1kLnZhbHVlcyhqKSk6KG89ZC52YWx1ZSgpKTtzd2l0Y2goYi5rZXlDb2RlKXtjYXNlIGEudWkua2V5Q29kZS5IT01FOm89ZC5fdmFsdWVNaW4oKTticmVhaztjYXNlIGEudWkua2V5Q29kZS5FTkQ6bz1kLl92YWx1ZU1heCgpO2JyZWFrO2Nhc2UgYS51aS5rZXlDb2RlLlBBR0VfVVA6bz1kLl90cmltQWxpZ25WYWx1ZShsKyhkLl92YWx1ZU1heCgpLWQuX3ZhbHVlTWluKCkpLzUpO2JyZWFrO2Nhc2UgYS51aS5rZXlDb2RlLlBBR0VfRE9XTjpvPWQuX3RyaW1BbGlnblZhbHVlKGwtKGQuX3ZhbHVlTWF4KCktZC5fdmFsdWVNaW4oKSkvNSk7YnJlYWs7Y2FzZSBhLnVpLmtleUNvZGUuVVA6Y2FzZSBhLnVpLmtleUNvZGUuUklHSFQ6aWYobD09PWQuX3ZhbHVlTWF4KCkpcmV0dXJuO289ZC5fdHJpbUFsaWduVmFsdWUobCtuKTticmVhaztjYXNlIGEudWkua2V5Q29kZS5ET1dOOmNhc2UgYS51aS5rZXlDb2RlLkxFRlQ6aWYobD09PWQuX3ZhbHVlTWluKCkpcmV0dXJuO289ZC5fdHJpbUFsaWduVmFsdWUobC0Kbik7YnJlYWt9ZC5fc2xpZGUoYixqLG8pO3JldHVybiBofX0pLmtleXVwKGZ1bmN0aW9uKGIpe3ZhciBoPWEodGhpcykuZGF0YSgiaW5kZXgudWktc2xpZGVyLWhhbmRsZSIpO2lmKGQuX2tleVNsaWRpbmcpe2QuX2tleVNsaWRpbmc9ZmFsc2U7ZC5fc3RvcChiLGgpO2QuX2NoYW5nZShiLGgpO2EodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpfX0pO3RoaXMuX3JlZnJlc2hWYWx1ZSgpO3RoaXMuX2FuaW1hdGVPZmY9ZmFsc2V9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXMucmVtb3ZlKCk7dGhpcy5yYW5nZS5yZW1vdmUoKTt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNsaWRlciB1aS1zbGlkZXItaG9yaXpvbnRhbCB1aS1zbGlkZXItdmVydGljYWwgdWktc2xpZGVyLWRpc2FibGVkIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIikucmVtb3ZlRGF0YSgic2xpZGVyIikudW5iaW5kKCIuc2xpZGVyIik7dGhpcy5fbW91c2VEZXN0cm95KCk7CnJldHVybiB0aGlzfSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMub3B0aW9ucyxmLGcsZSxpLGI7aWYoYy5kaXNhYmxlZClyZXR1cm4gZmFsc2U7dGhpcy5lbGVtZW50U2l6ZT17d2lkdGg6dGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCl9O3RoaXMuZWxlbWVudE9mZnNldD10aGlzLmVsZW1lbnQub2Zmc2V0KCk7Zj10aGlzLl9ub3JtVmFsdWVGcm9tTW91c2Uoe3g6ZC5wYWdlWCx5OmQucGFnZVl9KTtnPXRoaXMuX3ZhbHVlTWF4KCktdGhpcy5fdmFsdWVNaW4oKSsxO2k9dGhpczt0aGlzLmhhbmRsZXMuZWFjaChmdW5jdGlvbihoKXt2YXIgaj1NYXRoLmFicyhmLWkudmFsdWVzKGgpKTtpZihnPmope2c9ajtlPWEodGhpcyk7Yj1ofX0pO2lmKGMucmFuZ2U9PT10cnVlJiZ0aGlzLnZhbHVlcygxKT09PWMubWluKXtiKz0xO2U9YSh0aGlzLmhhbmRsZXNbYl0pfWlmKHRoaXMuX3N0YXJ0KGQsYik9PT1mYWxzZSlyZXR1cm4gZmFsc2U7CnRoaXMuX21vdXNlU2xpZGluZz10cnVlO2kuX2hhbmRsZUluZGV4PWI7ZS5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIikuZm9jdXMoKTtjPWUub2Zmc2V0KCk7dGhpcy5fY2xpY2tPZmZzZXQ9IWEoZC50YXJnZXQpLnBhcmVudHMoKS5hbmRTZWxmKCkuaXMoIi51aS1zbGlkZXItaGFuZGxlIik/e2xlZnQ6MCx0b3A6MH06e2xlZnQ6ZC5wYWdlWC1jLmxlZnQtZS53aWR0aCgpLzIsdG9wOmQucGFnZVktYy50b3AtZS5oZWlnaHQoKS8yLShwYXJzZUludChlLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApLShwYXJzZUludChlLmNzcygiYm9yZGVyQm90dG9tV2lkdGgiKSwxMCl8fDApKyhwYXJzZUludChlLmNzcygibWFyZ2luVG9wIiksMTApfHwwKX07dGhpcy5oYW5kbGVzLmhhc0NsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpfHx0aGlzLl9zbGlkZShkLGIsZik7cmV0dXJuIHRoaXMuX2FuaW1hdGVPZmY9dHJ1ZX0sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX0sX21vdXNlRHJhZzpmdW5jdGlvbihkKXt2YXIgYz0KdGhpcy5fbm9ybVZhbHVlRnJvbU1vdXNlKHt4OmQucGFnZVgseTpkLnBhZ2VZfSk7dGhpcy5fc2xpZGUoZCx0aGlzLl9oYW5kbGVJbmRleCxjKTtyZXR1cm4gZmFsc2V9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oZCl7dGhpcy5oYW5kbGVzLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKTt0aGlzLl9tb3VzZVNsaWRpbmc9ZmFsc2U7dGhpcy5fc3RvcChkLHRoaXMuX2hhbmRsZUluZGV4KTt0aGlzLl9jaGFuZ2UoZCx0aGlzLl9oYW5kbGVJbmRleCk7dGhpcy5fY2xpY2tPZmZzZXQ9dGhpcy5faGFuZGxlSW5kZXg9bnVsbDtyZXR1cm4gdGhpcy5fYW5pbWF0ZU9mZj1mYWxzZX0sX2RldGVjdE9yaWVudGF0aW9uOmZ1bmN0aW9uKCl7dGhpcy5vcmllbnRhdGlvbj10aGlzLm9wdGlvbnMub3JpZW50YXRpb249PT0idmVydGljYWwiPyJ2ZXJ0aWNhbCI6Imhvcml6b250YWwifSxfbm9ybVZhbHVlRnJvbU1vdXNlOmZ1bmN0aW9uKGQpe3ZhciBjO2lmKHRoaXMub3JpZW50YXRpb249PT0iaG9yaXpvbnRhbCIpe2M9CnRoaXMuZWxlbWVudFNpemUud2lkdGg7ZD1kLngtdGhpcy5lbGVtZW50T2Zmc2V0LmxlZnQtKHRoaXMuX2NsaWNrT2Zmc2V0P3RoaXMuX2NsaWNrT2Zmc2V0LmxlZnQ6MCl9ZWxzZXtjPXRoaXMuZWxlbWVudFNpemUuaGVpZ2h0O2Q9ZC55LXRoaXMuZWxlbWVudE9mZnNldC50b3AtKHRoaXMuX2NsaWNrT2Zmc2V0P3RoaXMuX2NsaWNrT2Zmc2V0LnRvcDowKX1jPWQvYztpZihjPjEpYz0xO2lmKGM8MCljPTA7aWYodGhpcy5vcmllbnRhdGlvbj09PSJ2ZXJ0aWNhbCIpYz0xLWM7ZD10aGlzLl92YWx1ZU1heCgpLXRoaXMuX3ZhbHVlTWluKCk7cmV0dXJuIHRoaXMuX3RyaW1BbGlnblZhbHVlKHRoaXMuX3ZhbHVlTWluKCkrYypkKX0sX3N0YXJ0OmZ1bmN0aW9uKGQsYyl7dmFyIGY9e2hhbmRsZTp0aGlzLmhhbmRsZXNbY10sdmFsdWU6dGhpcy52YWx1ZSgpfTtpZih0aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCl7Zi52YWx1ZT10aGlzLnZhbHVlcyhjKTsKZi52YWx1ZXM9dGhpcy52YWx1ZXMoKX1yZXR1cm4gdGhpcy5fdHJpZ2dlcigic3RhcnQiLGQsZil9LF9zbGlkZTpmdW5jdGlvbihkLGMsZil7dmFyIGc7aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpe2c9dGhpcy52YWx1ZXMoYz8wOjEpO2lmKHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoPT09MiYmdGhpcy5vcHRpb25zLnJhbmdlPT09dHJ1ZSYmKGM9PT0wJiZmPmd8fGM9PT0xJiZmPGcpKWY9ZztpZihmIT09dGhpcy52YWx1ZXMoYykpe2c9dGhpcy52YWx1ZXMoKTtnW2NdPWY7ZD10aGlzLl90cmlnZ2VyKCJzbGlkZSIsZCx7aGFuZGxlOnRoaXMuaGFuZGxlc1tjXSx2YWx1ZTpmLHZhbHVlczpnfSk7dGhpcy52YWx1ZXMoYz8wOjEpO2QhPT1mYWxzZSYmdGhpcy52YWx1ZXMoYyxmLHRydWUpfX1lbHNlIGlmKGYhPT10aGlzLnZhbHVlKCkpe2Q9dGhpcy5fdHJpZ2dlcigic2xpZGUiLGQse2hhbmRsZTp0aGlzLmhhbmRsZXNbY10sdmFsdWU6Zn0pOwpkIT09ZmFsc2UmJnRoaXMudmFsdWUoZil9fSxfc3RvcDpmdW5jdGlvbihkLGMpe3ZhciBmPXtoYW5kbGU6dGhpcy5oYW5kbGVzW2NdLHZhbHVlOnRoaXMudmFsdWUoKX07aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpe2YudmFsdWU9dGhpcy52YWx1ZXMoYyk7Zi52YWx1ZXM9dGhpcy52YWx1ZXMoKX10aGlzLl90cmlnZ2VyKCJzdG9wIixkLGYpfSxfY2hhbmdlOmZ1bmN0aW9uKGQsYyl7aWYoIXRoaXMuX2tleVNsaWRpbmcmJiF0aGlzLl9tb3VzZVNsaWRpbmcpe3ZhciBmPXtoYW5kbGU6dGhpcy5oYW5kbGVzW2NdLHZhbHVlOnRoaXMudmFsdWUoKX07aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpe2YudmFsdWU9dGhpcy52YWx1ZXMoYyk7Zi52YWx1ZXM9dGhpcy52YWx1ZXMoKX10aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLGQsZil9fSx2YWx1ZTpmdW5jdGlvbihkKXtpZihhcmd1bWVudHMubGVuZ3RoKXt0aGlzLm9wdGlvbnMudmFsdWU9CnRoaXMuX3RyaW1BbGlnblZhbHVlKGQpO3RoaXMuX3JlZnJlc2hWYWx1ZSgpO3RoaXMuX2NoYW5nZShudWxsLDApfWVsc2UgcmV0dXJuIHRoaXMuX3ZhbHVlKCl9LHZhbHVlczpmdW5jdGlvbihkLGMpe3ZhciBmLGcsZTtpZihhcmd1bWVudHMubGVuZ3RoPjEpe3RoaXMub3B0aW9ucy52YWx1ZXNbZF09dGhpcy5fdHJpbUFsaWduVmFsdWUoYyk7dGhpcy5fcmVmcmVzaFZhbHVlKCk7dGhpcy5fY2hhbmdlKG51bGwsZCl9ZWxzZSBpZihhcmd1bWVudHMubGVuZ3RoKWlmKGEuaXNBcnJheShhcmd1bWVudHNbMF0pKXtmPXRoaXMub3B0aW9ucy52YWx1ZXM7Zz1hcmd1bWVudHNbMF07Zm9yKGU9MDtlPGYubGVuZ3RoO2UrPTEpe2ZbZV09dGhpcy5fdHJpbUFsaWduVmFsdWUoZ1tlXSk7dGhpcy5fY2hhbmdlKG51bGwsZSl9dGhpcy5fcmVmcmVzaFZhbHVlKCl9ZWxzZSByZXR1cm4gdGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGg/dGhpcy5fdmFsdWVzKGQpOgp0aGlzLnZhbHVlKCk7ZWxzZSByZXR1cm4gdGhpcy5fdmFsdWVzKCl9LF9zZXRPcHRpb246ZnVuY3Rpb24oZCxjKXt2YXIgZixnPTA7aWYoYS5pc0FycmF5KHRoaXMub3B0aW9ucy52YWx1ZXMpKWc9dGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGg7YS5XaWRnZXQucHJvdG90eXBlLl9zZXRPcHRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3N3aXRjaChkKXtjYXNlICJkaXNhYmxlZCI6aWYoYyl7dGhpcy5oYW5kbGVzLmZpbHRlcigiLnVpLXN0YXRlLWZvY3VzIikuYmx1cigpO3RoaXMuaGFuZGxlcy5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTt0aGlzLmhhbmRsZXMuYXR0cigiZGlzYWJsZWQiLCJkaXNhYmxlZCIpO3RoaXMuZWxlbWVudC5hZGRDbGFzcygidWktZGlzYWJsZWQiKX1lbHNle3RoaXMuaGFuZGxlcy5yZW1vdmVBdHRyKCJkaXNhYmxlZCIpO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktZGlzYWJsZWQiKX1icmVhaztjYXNlICJvcmllbnRhdGlvbiI6dGhpcy5fZGV0ZWN0T3JpZW50YXRpb24oKTsKdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zbGlkZXItaG9yaXpvbnRhbCB1aS1zbGlkZXItdmVydGljYWwiKS5hZGRDbGFzcygidWktc2xpZGVyLSIrdGhpcy5vcmllbnRhdGlvbik7dGhpcy5fcmVmcmVzaFZhbHVlKCk7YnJlYWs7Y2FzZSAidmFsdWUiOnRoaXMuX2FuaW1hdGVPZmY9dHJ1ZTt0aGlzLl9yZWZyZXNoVmFsdWUoKTt0aGlzLl9jaGFuZ2UobnVsbCwwKTt0aGlzLl9hbmltYXRlT2ZmPWZhbHNlO2JyZWFrO2Nhc2UgInZhbHVlcyI6dGhpcy5fYW5pbWF0ZU9mZj10cnVlO3RoaXMuX3JlZnJlc2hWYWx1ZSgpO2ZvcihmPTA7ZjxnO2YrPTEpdGhpcy5fY2hhbmdlKG51bGwsZik7dGhpcy5fYW5pbWF0ZU9mZj1mYWxzZTticmVha319LF92YWx1ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3B0aW9ucy52YWx1ZTtyZXR1cm4gZD10aGlzLl90cmltQWxpZ25WYWx1ZShkKX0sX3ZhbHVlczpmdW5jdGlvbihkKXt2YXIgYyxmO2lmKGFyZ3VtZW50cy5sZW5ndGgpe2M9dGhpcy5vcHRpb25zLnZhbHVlc1tkXTsKcmV0dXJuIGM9dGhpcy5fdHJpbUFsaWduVmFsdWUoYyl9ZWxzZXtjPXRoaXMub3B0aW9ucy52YWx1ZXMuc2xpY2UoKTtmb3IoZj0wO2Y8Yy5sZW5ndGg7Zis9MSljW2ZdPXRoaXMuX3RyaW1BbGlnblZhbHVlKGNbZl0pO3JldHVybiBjfX0sX3RyaW1BbGlnblZhbHVlOmZ1bmN0aW9uKGQpe2lmKGQ8PXRoaXMuX3ZhbHVlTWluKCkpcmV0dXJuIHRoaXMuX3ZhbHVlTWluKCk7aWYoZD49dGhpcy5fdmFsdWVNYXgoKSlyZXR1cm4gdGhpcy5fdmFsdWVNYXgoKTt2YXIgYz10aGlzLm9wdGlvbnMuc3RlcD4wP3RoaXMub3B0aW9ucy5zdGVwOjEsZj0oZC10aGlzLl92YWx1ZU1pbigpKSVjO2FsaWduVmFsdWU9ZC1mO2lmKE1hdGguYWJzKGYpKjI+PWMpYWxpZ25WYWx1ZSs9Zj4wP2M6LWM7cmV0dXJuIHBhcnNlRmxvYXQoYWxpZ25WYWx1ZS50b0ZpeGVkKDUpKX0sX3ZhbHVlTWluOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5taW59LF92YWx1ZU1heDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMubWF4fSwKX3JlZnJlc2hWYWx1ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3B0aW9ucy5yYW5nZSxjPXRoaXMub3B0aW9ucyxmPXRoaXMsZz0hdGhpcy5fYW5pbWF0ZU9mZj9jLmFuaW1hdGU6ZmFsc2UsZSxpPXt9LGIsaCxqLGw7aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpdGhpcy5oYW5kbGVzLmVhY2goZnVuY3Rpb24obyl7ZT0oZi52YWx1ZXMobyktZi5fdmFsdWVNaW4oKSkvKGYuX3ZhbHVlTWF4KCktZi5fdmFsdWVNaW4oKSkqMTAwO2lbZi5vcmllbnRhdGlvbj09PSJob3Jpem9udGFsIj8ibGVmdCI6ImJvdHRvbSJdPWUrIiUiO2EodGhpcykuc3RvcCgxLDEpW2c/ImFuaW1hdGUiOiJjc3MiXShpLGMuYW5pbWF0ZSk7aWYoZi5vcHRpb25zLnJhbmdlPT09dHJ1ZSlpZihmLm9yaWVudGF0aW9uPT09Imhvcml6b250YWwiKXtpZihvPT09MClmLnJhbmdlLnN0b3AoMSwxKVtnPyJhbmltYXRlIjoiY3NzIl0oe2xlZnQ6ZSsiJSJ9LGMuYW5pbWF0ZSk7CmlmKG89PT0xKWYucmFuZ2VbZz8iYW5pbWF0ZSI6ImNzcyJdKHt3aWR0aDplLWIrIiUifSx7cXVldWU6ZmFsc2UsZHVyYXRpb246Yy5hbmltYXRlfSl9ZWxzZXtpZihvPT09MClmLnJhbmdlLnN0b3AoMSwxKVtnPyJhbmltYXRlIjoiY3NzIl0oe2JvdHRvbTplKyIlIn0sYy5hbmltYXRlKTtpZihvPT09MSlmLnJhbmdlW2c/ImFuaW1hdGUiOiJjc3MiXSh7aGVpZ2h0OmUtYisiJSJ9LHtxdWV1ZTpmYWxzZSxkdXJhdGlvbjpjLmFuaW1hdGV9KX1iPWV9KTtlbHNle2g9dGhpcy52YWx1ZSgpO2o9dGhpcy5fdmFsdWVNaW4oKTtsPXRoaXMuX3ZhbHVlTWF4KCk7ZT1sIT09aj8oaC1qKS8obC1qKSoxMDA6MDtpW2Yub3JpZW50YXRpb249PT0iaG9yaXpvbnRhbCI/ImxlZnQiOiJib3R0b20iXT1lKyIlIjt0aGlzLmhhbmRsZS5zdG9wKDEsMSlbZz8iYW5pbWF0ZSI6ImNzcyJdKGksYy5hbmltYXRlKTtpZihkPT09Im1pbiImJnRoaXMub3JpZW50YXRpb249PT0iaG9yaXpvbnRhbCIpdGhpcy5yYW5nZS5zdG9wKDEsCjEpW2c/ImFuaW1hdGUiOiJjc3MiXSh7d2lkdGg6ZSsiJSJ9LGMuYW5pbWF0ZSk7aWYoZD09PSJtYXgiJiZ0aGlzLm9yaWVudGF0aW9uPT09Imhvcml6b250YWwiKXRoaXMucmFuZ2VbZz8iYW5pbWF0ZSI6ImNzcyJdKHt3aWR0aDoxMDAtZSsiJSJ9LHtxdWV1ZTpmYWxzZSxkdXJhdGlvbjpjLmFuaW1hdGV9KTtpZihkPT09Im1pbiImJnRoaXMub3JpZW50YXRpb249PT0idmVydGljYWwiKXRoaXMucmFuZ2Uuc3RvcCgxLDEpW2c/ImFuaW1hdGUiOiJjc3MiXSh7aGVpZ2h0OmUrIiUifSxjLmFuaW1hdGUpO2lmKGQ9PT0ibWF4IiYmdGhpcy5vcmllbnRhdGlvbj09PSJ2ZXJ0aWNhbCIpdGhpcy5yYW5nZVtnPyJhbmltYXRlIjoiY3NzIl0oe2hlaWdodDoxMDAtZSsiJSJ9LHtxdWV1ZTpmYWxzZSxkdXJhdGlvbjpjLmFuaW1hdGV9KX19fSk7YS5leHRlbmQoYS51aS5zbGlkZXIse3ZlcnNpb246IjEuOC4xMyJ9KX0pKGpRdWVyeSk7CihmdW5jdGlvbihhLGQpe2Z1bmN0aW9uIGMoKXtyZXR1cm4rK2d9ZnVuY3Rpb24gZigpe3JldHVybisrZX12YXIgZz0wLGU9MDthLndpZGdldCgidWkudGFicyIse29wdGlvbnM6e2FkZDpudWxsLGFqYXhPcHRpb25zOm51bGwsY2FjaGU6ZmFsc2UsY29va2llOm51bGwsY29sbGFwc2libGU6ZmFsc2UsZGlzYWJsZTpudWxsLGRpc2FibGVkOltdLGVuYWJsZTpudWxsLGV2ZW50OiJjbGljayIsZng6bnVsbCxpZFByZWZpeDoidWktdGFicy0iLGxvYWQ6bnVsbCxwYW5lbFRlbXBsYXRlOiI8ZGl2PjwvZGl2PiIscmVtb3ZlOm51bGwsc2VsZWN0Om51bGwsc2hvdzpudWxsLHNwaW5uZXI6IjxlbT5Mb2FkaW5nJiM4MjMwOzwvZW0+Iix0YWJUZW1wbGF0ZToiPGxpPjxhIGhyZWY9JyN7aHJlZn0nPjxzcGFuPiN7bGFiZWx9PC9zcGFuPjwvYT48L2xpPiJ9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLl90YWJpZnkodHJ1ZSl9LF9zZXRPcHRpb246ZnVuY3Rpb24oaSxiKXtpZihpPT0ic2VsZWN0ZWQiKXRoaXMub3B0aW9ucy5jb2xsYXBzaWJsZSYmCmI9PXRoaXMub3B0aW9ucy5zZWxlY3RlZHx8dGhpcy5zZWxlY3QoYik7ZWxzZXt0aGlzLm9wdGlvbnNbaV09Yjt0aGlzLl90YWJpZnkoKX19LF90YWJJZDpmdW5jdGlvbihpKXtyZXR1cm4gaS50aXRsZSYmaS50aXRsZS5yZXBsYWNlKC9ccy9nLCJfIikucmVwbGFjZSgvW15cd1x1MDBjMC1cdUZGRkYtXS9nLCIiKXx8dGhpcy5vcHRpb25zLmlkUHJlZml4K2MoKX0sX3Nhbml0aXplU2VsZWN0b3I6ZnVuY3Rpb24oaSl7cmV0dXJuIGkucmVwbGFjZSgvOi9nLCJcXDoiKX0sX2Nvb2tpZTpmdW5jdGlvbigpe3ZhciBpPXRoaXMuY29va2llfHwodGhpcy5jb29raWU9dGhpcy5vcHRpb25zLmNvb2tpZS5uYW1lfHwidWktdGFicy0iK2YoKSk7cmV0dXJuIGEuY29va2llLmFwcGx5KG51bGwsW2ldLmNvbmNhdChhLm1ha2VBcnJheShhcmd1bWVudHMpKSl9LF91aTpmdW5jdGlvbihpLGIpe3JldHVybnt0YWI6aSxwYW5lbDpiLGluZGV4OnRoaXMuYW5jaG9ycy5pbmRleChpKX19LF9jbGVhbnVwOmZ1bmN0aW9uKCl7dGhpcy5saXMuZmlsdGVyKCIudWktc3RhdGUtcHJvY2Vzc2luZyIpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1wcm9jZXNzaW5nIikuZmluZCgic3BhbjpkYXRhKGxhYmVsLnRhYnMpIikuZWFjaChmdW5jdGlvbigpe3ZhciBpPQphKHRoaXMpO2kuaHRtbChpLmRhdGEoImxhYmVsLnRhYnMiKSkucmVtb3ZlRGF0YSgibGFiZWwudGFicyIpfSl9LF90YWJpZnk6ZnVuY3Rpb24oaSl7ZnVuY3Rpb24gYihyLHUpe3IuY3NzKCJkaXNwbGF5IiwiIik7IWEuc3VwcG9ydC5vcGFjaXR5JiZ1Lm9wYWNpdHkmJnJbMF0uc3R5bGUucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKX12YXIgaD10aGlzLGo9dGhpcy5vcHRpb25zLGw9L14jLisvO3RoaXMubGlzdD10aGlzLmVsZW1lbnQuZmluZCgib2wsdWwiKS5lcSgwKTt0aGlzLmxpcz1hKCIgPiBsaTpoYXMoYVtocmVmXSkiLHRoaXMubGlzdCk7dGhpcy5hbmNob3JzPXRoaXMubGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBhKCJhIix0aGlzKVswXX0pO3RoaXMucGFuZWxzPWEoW10pO3RoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKHIsdSl7dmFyIHY9YSh1KS5hdHRyKCJocmVmIiksdz12LnNwbGl0KCIjIilbMF0seDtpZih3JiYodz09PWxvY2F0aW9uLnRvU3RyaW5nKCkuc3BsaXQoIiMiKVswXXx8Cih4PWEoImJhc2UiKVswXSkmJnc9PT14LmhyZWYpKXt2PXUuaGFzaDt1LmhyZWY9dn1pZihsLnRlc3QodikpaC5wYW5lbHM9aC5wYW5lbHMuYWRkKGguZWxlbWVudC5maW5kKGguX3Nhbml0aXplU2VsZWN0b3IodikpKTtlbHNlIGlmKHYmJnYhPT0iIyIpe2EuZGF0YSh1LCJocmVmLnRhYnMiLHYpO2EuZGF0YSh1LCJsb2FkLnRhYnMiLHYucmVwbGFjZSgvIy4qJC8sIiIpKTt2PWguX3RhYklkKHUpO3UuaHJlZj0iIyIrdjt1PWguZWxlbWVudC5maW5kKCIjIit2KTtpZighdS5sZW5ndGgpe3U9YShqLnBhbmVsVGVtcGxhdGUpLmF0dHIoImlkIix2KS5hZGRDbGFzcygidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tIikuaW5zZXJ0QWZ0ZXIoaC5wYW5lbHNbci0xXXx8aC5saXN0KTt1LmRhdGEoImRlc3Ryb3kudGFicyIsdHJ1ZSl9aC5wYW5lbHM9aC5wYW5lbHMuYWRkKHUpfWVsc2Ugai5kaXNhYmxlZC5wdXNoKHIpfSk7aWYoaSl7dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIik7CnRoaXMubGlzdC5hZGRDbGFzcygidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwiKTt0aGlzLmxpcy5hZGRDbGFzcygidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItdG9wIik7dGhpcy5wYW5lbHMuYWRkQ2xhc3MoInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSIpO2lmKGouc2VsZWN0ZWQ9PT1kKXtsb2NhdGlvbi5oYXNoJiZ0aGlzLmFuY2hvcnMuZWFjaChmdW5jdGlvbihyLHUpe2lmKHUuaGFzaD09bG9jYXRpb24uaGFzaCl7ai5zZWxlY3RlZD1yO3JldHVybiBmYWxzZX19KTtpZih0eXBlb2Ygai5zZWxlY3RlZCE9PSJudW1iZXIiJiZqLmNvb2tpZSlqLnNlbGVjdGVkPXBhcnNlSW50KGguX2Nvb2tpZSgpLDEwKTtpZih0eXBlb2Ygai5zZWxlY3RlZCE9PSJudW1iZXIiJiZ0aGlzLmxpcy5maWx0ZXIoIi51aS10YWJzLXNlbGVjdGVkIikubGVuZ3RoKWouc2VsZWN0ZWQ9CnRoaXMubGlzLmluZGV4KHRoaXMubGlzLmZpbHRlcigiLnVpLXRhYnMtc2VsZWN0ZWQiKSk7ai5zZWxlY3RlZD1qLnNlbGVjdGVkfHwodGhpcy5saXMubGVuZ3RoPzA6LTEpfWVsc2UgaWYoai5zZWxlY3RlZD09PW51bGwpai5zZWxlY3RlZD0tMTtqLnNlbGVjdGVkPWouc2VsZWN0ZWQ+PTAmJnRoaXMuYW5jaG9yc1tqLnNlbGVjdGVkXXx8ai5zZWxlY3RlZDwwP2ouc2VsZWN0ZWQ6MDtqLmRpc2FibGVkPWEudW5pcXVlKGouZGlzYWJsZWQuY29uY2F0KGEubWFwKHRoaXMubGlzLmZpbHRlcigiLnVpLXN0YXRlLWRpc2FibGVkIiksZnVuY3Rpb24ocil7cmV0dXJuIGgubGlzLmluZGV4KHIpfSkpKS5zb3J0KCk7YS5pbkFycmF5KGouc2VsZWN0ZWQsai5kaXNhYmxlZCkhPS0xJiZqLmRpc2FibGVkLnNwbGljZShhLmluQXJyYXkoai5zZWxlY3RlZCxqLmRpc2FibGVkKSwxKTt0aGlzLnBhbmVscy5hZGRDbGFzcygidWktdGFicy1oaWRlIik7dGhpcy5saXMucmVtb3ZlQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQgdWktc3RhdGUtYWN0aXZlIik7CmlmKGouc2VsZWN0ZWQ+PTAmJnRoaXMuYW5jaG9ycy5sZW5ndGgpe2guZWxlbWVudC5maW5kKGguX3Nhbml0aXplU2VsZWN0b3IoaC5hbmNob3JzW2ouc2VsZWN0ZWRdLmhhc2gpKS5yZW1vdmVDbGFzcygidWktdGFicy1oaWRlIik7dGhpcy5saXMuZXEoai5zZWxlY3RlZCkuYWRkQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQgdWktc3RhdGUtYWN0aXZlIik7aC5lbGVtZW50LnF1ZXVlKCJ0YWJzIixmdW5jdGlvbigpe2guX3RyaWdnZXIoInNob3ciLG51bGwsaC5fdWkoaC5hbmNob3JzW2ouc2VsZWN0ZWRdLGguZWxlbWVudC5maW5kKGguX3Nhbml0aXplU2VsZWN0b3IoaC5hbmNob3JzW2ouc2VsZWN0ZWRdLmhhc2gpKVswXSkpfSk7dGhpcy5sb2FkKGouc2VsZWN0ZWQpfWEod2luZG93KS5iaW5kKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7aC5saXMuYWRkKGguYW5jaG9ycykudW5iaW5kKCIudGFicyIpO2gubGlzPWguYW5jaG9ycz1oLnBhbmVscz1udWxsfSl9ZWxzZSBqLnNlbGVjdGVkPXRoaXMubGlzLmluZGV4KHRoaXMubGlzLmZpbHRlcigiLnVpLXRhYnMtc2VsZWN0ZWQiKSk7CnRoaXMuZWxlbWVudFtqLmNvbGxhcHNpYmxlPyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0oInVpLXRhYnMtY29sbGFwc2libGUiKTtqLmNvb2tpZSYmdGhpcy5fY29va2llKGouc2VsZWN0ZWQsai5jb29raWUpO2k9MDtmb3IodmFyIG87bz10aGlzLmxpc1tpXTtpKyspYShvKVthLmluQXJyYXkoaSxqLmRpc2FibGVkKSE9LTEmJiFhKG8pLmhhc0NsYXNzKCJ1aS10YWJzLXNlbGVjdGVkIik/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXSgidWktc3RhdGUtZGlzYWJsZWQiKTtqLmNhY2hlPT09ZmFsc2UmJnRoaXMuYW5jaG9ycy5yZW1vdmVEYXRhKCJjYWNoZS50YWJzIik7dGhpcy5saXMuYWRkKHRoaXMuYW5jaG9ycykudW5iaW5kKCIudGFicyIpO2lmKGouZXZlbnQhPT0ibW91c2VvdmVyIil7dmFyIG49ZnVuY3Rpb24ocix1KXt1LmlzKCI6bm90KC51aS1zdGF0ZS1kaXNhYmxlZCkiKSYmdS5hZGRDbGFzcygidWktc3RhdGUtIityKX0saz1mdW5jdGlvbihyLHUpe3UucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLSIrCnIpfTt0aGlzLmxpcy5iaW5kKCJtb3VzZW92ZXIudGFicyIsZnVuY3Rpb24oKXtuKCJob3ZlciIsYSh0aGlzKSl9KTt0aGlzLmxpcy5iaW5kKCJtb3VzZW91dC50YWJzIixmdW5jdGlvbigpe2soImhvdmVyIixhKHRoaXMpKX0pO3RoaXMuYW5jaG9ycy5iaW5kKCJmb2N1cy50YWJzIixmdW5jdGlvbigpe24oImZvY3VzIixhKHRoaXMpLmNsb3Nlc3QoImxpIikpfSk7dGhpcy5hbmNob3JzLmJpbmQoImJsdXIudGFicyIsZnVuY3Rpb24oKXtrKCJmb2N1cyIsYSh0aGlzKS5jbG9zZXN0KCJsaSIpKX0pfXZhciBtLHA7aWYoai5meClpZihhLmlzQXJyYXkoai5meCkpe209ai5meFswXTtwPWouZnhbMV19ZWxzZSBtPXA9ai5meDt2YXIgcT1wP2Z1bmN0aW9uKHIsdSl7YShyKS5jbG9zZXN0KCJsaSIpLmFkZENsYXNzKCJ1aS10YWJzLXNlbGVjdGVkIHVpLXN0YXRlLWFjdGl2ZSIpO3UuaGlkZSgpLnJlbW92ZUNsYXNzKCJ1aS10YWJzLWhpZGUiKS5hbmltYXRlKHAscC5kdXJhdGlvbnx8Im5vcm1hbCIsCmZ1bmN0aW9uKCl7Yih1LHApO2guX3RyaWdnZXIoInNob3ciLG51bGwsaC5fdWkocix1WzBdKSl9KX06ZnVuY3Rpb24ocix1KXthKHIpLmNsb3Nlc3QoImxpIikuYWRkQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQgdWktc3RhdGUtYWN0aXZlIik7dS5yZW1vdmVDbGFzcygidWktdGFicy1oaWRlIik7aC5fdHJpZ2dlcigic2hvdyIsbnVsbCxoLl91aShyLHVbMF0pKX0scz1tP2Z1bmN0aW9uKHIsdSl7dS5hbmltYXRlKG0sbS5kdXJhdGlvbnx8Im5vcm1hbCIsZnVuY3Rpb24oKXtoLmxpcy5yZW1vdmVDbGFzcygidWktdGFicy1zZWxlY3RlZCB1aS1zdGF0ZS1hY3RpdmUiKTt1LmFkZENsYXNzKCJ1aS10YWJzLWhpZGUiKTtiKHUsbSk7aC5lbGVtZW50LmRlcXVldWUoInRhYnMiKX0pfTpmdW5jdGlvbihyLHUpe2gubGlzLnJlbW92ZUNsYXNzKCJ1aS10YWJzLXNlbGVjdGVkIHVpLXN0YXRlLWFjdGl2ZSIpO3UuYWRkQ2xhc3MoInVpLXRhYnMtaGlkZSIpO2guZWxlbWVudC5kZXF1ZXVlKCJ0YWJzIil9Owp0aGlzLmFuY2hvcnMuYmluZChqLmV2ZW50KyIudGFicyIsZnVuY3Rpb24oKXt2YXIgcj10aGlzLHU9YShyKS5jbG9zZXN0KCJsaSIpLHY9aC5wYW5lbHMuZmlsdGVyKCI6bm90KC51aS10YWJzLWhpZGUpIiksdz1oLmVsZW1lbnQuZmluZChoLl9zYW5pdGl6ZVNlbGVjdG9yKHIuaGFzaCkpO2lmKHUuaGFzQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQiKSYmIWouY29sbGFwc2libGV8fHUuaGFzQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIil8fHUuaGFzQ2xhc3MoInVpLXN0YXRlLXByb2Nlc3NpbmciKXx8aC5wYW5lbHMuZmlsdGVyKCI6YW5pbWF0ZWQiKS5sZW5ndGh8fGguX3RyaWdnZXIoInNlbGVjdCIsbnVsbCxoLl91aSh0aGlzLHdbMF0pKT09PWZhbHNlKXt0aGlzLmJsdXIoKTtyZXR1cm4gZmFsc2V9ai5zZWxlY3RlZD1oLmFuY2hvcnMuaW5kZXgodGhpcyk7aC5hYm9ydCgpO2lmKGouY29sbGFwc2libGUpaWYodS5oYXNDbGFzcygidWktdGFicy1zZWxlY3RlZCIpKXtqLnNlbGVjdGVkPQotMTtqLmNvb2tpZSYmaC5fY29va2llKGouc2VsZWN0ZWQsai5jb29raWUpO2guZWxlbWVudC5xdWV1ZSgidGFicyIsZnVuY3Rpb24oKXtzKHIsdil9KS5kZXF1ZXVlKCJ0YWJzIik7dGhpcy5ibHVyKCk7cmV0dXJuIGZhbHNlfWVsc2UgaWYoIXYubGVuZ3RoKXtqLmNvb2tpZSYmaC5fY29va2llKGouc2VsZWN0ZWQsai5jb29raWUpO2guZWxlbWVudC5xdWV1ZSgidGFicyIsZnVuY3Rpb24oKXtxKHIsdyl9KTtoLmxvYWQoaC5hbmNob3JzLmluZGV4KHRoaXMpKTt0aGlzLmJsdXIoKTtyZXR1cm4gZmFsc2V9ai5jb29raWUmJmguX2Nvb2tpZShqLnNlbGVjdGVkLGouY29va2llKTtpZih3Lmxlbmd0aCl7di5sZW5ndGgmJmguZWxlbWVudC5xdWV1ZSgidGFicyIsZnVuY3Rpb24oKXtzKHIsdil9KTtoLmVsZW1lbnQucXVldWUoInRhYnMiLGZ1bmN0aW9uKCl7cShyLHcpfSk7aC5sb2FkKGguYW5jaG9ycy5pbmRleCh0aGlzKSl9ZWxzZSB0aHJvdyJqUXVlcnkgVUkgVGFiczogTWlzbWF0Y2hpbmcgZnJhZ21lbnQgaWRlbnRpZmllci4iOwphLmJyb3dzZXIubXNpZSYmdGhpcy5ibHVyKCl9KTt0aGlzLmFuY2hvcnMuYmluZCgiY2xpY2sudGFicyIsZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9KX0sX2dldEluZGV4OmZ1bmN0aW9uKGkpe2lmKHR5cGVvZiBpPT0ic3RyaW5nIilpPXRoaXMuYW5jaG9ycy5pbmRleCh0aGlzLmFuY2hvcnMuZmlsdGVyKCJbaHJlZiQ9IitpKyJdIikpO3JldHVybiBpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5vcHRpb25zO3RoaXMuYWJvcnQoKTt0aGlzLmVsZW1lbnQudW5iaW5kKCIudGFicyIpLnJlbW92ZUNsYXNzKCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLXRhYnMtY29sbGFwc2libGUiKS5yZW1vdmVEYXRhKCJ0YWJzIik7dGhpcy5saXN0LnJlbW92ZUNsYXNzKCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbCIpO3RoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9CmEuZGF0YSh0aGlzLCJocmVmLnRhYnMiKTtpZihiKXRoaXMuaHJlZj1iO3ZhciBoPWEodGhpcykudW5iaW5kKCIudGFicyIpO2EuZWFjaChbImhyZWYiLCJsb2FkIiwiY2FjaGUiXSxmdW5jdGlvbihqLGwpe2gucmVtb3ZlRGF0YShsKyIudGFicyIpfSl9KTt0aGlzLmxpcy51bmJpbmQoIi50YWJzIikuYWRkKHRoaXMucGFuZWxzKS5lYWNoKGZ1bmN0aW9uKCl7YS5kYXRhKHRoaXMsImRlc3Ryb3kudGFicyIpP2EodGhpcykucmVtb3ZlKCk6YSh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItdG9wIHVpLXRhYnMtc2VsZWN0ZWQgdWktc3RhdGUtYWN0aXZlIHVpLXN0YXRlLWhvdmVyIHVpLXN0YXRlLWZvY3VzIHVpLXN0YXRlLWRpc2FibGVkIHVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSB1aS10YWJzLWhpZGUiKX0pO2kuY29va2llJiZ0aGlzLl9jb29raWUobnVsbCxpLmNvb2tpZSk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihpLApiLGgpe2lmKGg9PT1kKWg9dGhpcy5hbmNob3JzLmxlbmd0aDt2YXIgaj10aGlzLGw9dGhpcy5vcHRpb25zO2I9YShsLnRhYlRlbXBsYXRlLnJlcGxhY2UoLyNce2hyZWZcfS9nLGkpLnJlcGxhY2UoLyNce2xhYmVsXH0vZyxiKSk7aT0haS5pbmRleE9mKCIjIik/aS5yZXBsYWNlKCIjIiwiIik6dGhpcy5fdGFiSWQoYSgiYSIsYilbMF0pO2IuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcCIpLmRhdGEoImRlc3Ryb3kudGFicyIsdHJ1ZSk7dmFyIG89ai5lbGVtZW50LmZpbmQoIiMiK2kpO28ubGVuZ3RofHwobz1hKGwucGFuZWxUZW1wbGF0ZSkuYXR0cigiaWQiLGkpLmRhdGEoImRlc3Ryb3kudGFicyIsdHJ1ZSkpO28uYWRkQ2xhc3MoInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSB1aS10YWJzLWhpZGUiKTtpZihoPj10aGlzLmxpcy5sZW5ndGgpe2IuYXBwZW5kVG8odGhpcy5saXN0KTtvLmFwcGVuZFRvKHRoaXMubGlzdFswXS5wYXJlbnROb2RlKX1lbHNle2IuaW5zZXJ0QmVmb3JlKHRoaXMubGlzW2hdKTsKby5pbnNlcnRCZWZvcmUodGhpcy5wYW5lbHNbaF0pfWwuZGlzYWJsZWQ9YS5tYXAobC5kaXNhYmxlZCxmdW5jdGlvbihuKXtyZXR1cm4gbj49aD8rK246bn0pO3RoaXMuX3RhYmlmeSgpO2lmKHRoaXMuYW5jaG9ycy5sZW5ndGg9PTEpe2wuc2VsZWN0ZWQ9MDtiLmFkZENsYXNzKCJ1aS10YWJzLXNlbGVjdGVkIHVpLXN0YXRlLWFjdGl2ZSIpO28ucmVtb3ZlQ2xhc3MoInVpLXRhYnMtaGlkZSIpO3RoaXMuZWxlbWVudC5xdWV1ZSgidGFicyIsZnVuY3Rpb24oKXtqLl90cmlnZ2VyKCJzaG93IixudWxsLGouX3VpKGouYW5jaG9yc1swXSxqLnBhbmVsc1swXSkpfSk7dGhpcy5sb2FkKDApfXRoaXMuX3RyaWdnZXIoImFkZCIsbnVsbCx0aGlzLl91aSh0aGlzLmFuY2hvcnNbaF0sdGhpcy5wYW5lbHNbaF0pKTtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKGkpe2k9dGhpcy5fZ2V0SW5kZXgoaSk7dmFyIGI9dGhpcy5vcHRpb25zLGg9dGhpcy5saXMuZXEoaSkucmVtb3ZlKCksaj10aGlzLnBhbmVscy5lcShpKS5yZW1vdmUoKTsKaWYoaC5oYXNDbGFzcygidWktdGFicy1zZWxlY3RlZCIpJiZ0aGlzLmFuY2hvcnMubGVuZ3RoPjEpdGhpcy5zZWxlY3QoaSsoaSsxPHRoaXMuYW5jaG9ycy5sZW5ndGg/MTotMSkpO2IuZGlzYWJsZWQ9YS5tYXAoYS5ncmVwKGIuZGlzYWJsZWQsZnVuY3Rpb24obCl7cmV0dXJuIGwhPWl9KSxmdW5jdGlvbihsKXtyZXR1cm4gbD49aT8tLWw6bH0pO3RoaXMuX3RhYmlmeSgpO3RoaXMuX3RyaWdnZXIoInJlbW92ZSIsbnVsbCx0aGlzLl91aShoLmZpbmQoImEiKVswXSxqWzBdKSk7cmV0dXJuIHRoaXN9LGVuYWJsZTpmdW5jdGlvbihpKXtpPXRoaXMuX2dldEluZGV4KGkpO3ZhciBiPXRoaXMub3B0aW9ucztpZihhLmluQXJyYXkoaSxiLmRpc2FibGVkKSE9LTEpe3RoaXMubGlzLmVxKGkpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpO2IuZGlzYWJsZWQ9YS5ncmVwKGIuZGlzYWJsZWQsZnVuY3Rpb24oaCl7cmV0dXJuIGghPWl9KTt0aGlzLl90cmlnZ2VyKCJlbmFibGUiLG51bGwsCnRoaXMuX3VpKHRoaXMuYW5jaG9yc1tpXSx0aGlzLnBhbmVsc1tpXSkpO3JldHVybiB0aGlzfX0sZGlzYWJsZTpmdW5jdGlvbihpKXtpPXRoaXMuX2dldEluZGV4KGkpO3ZhciBiPXRoaXMub3B0aW9ucztpZihpIT1iLnNlbGVjdGVkKXt0aGlzLmxpcy5lcShpKS5hZGRDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKTtiLmRpc2FibGVkLnB1c2goaSk7Yi5kaXNhYmxlZC5zb3J0KCk7dGhpcy5fdHJpZ2dlcigiZGlzYWJsZSIsbnVsbCx0aGlzLl91aSh0aGlzLmFuY2hvcnNbaV0sdGhpcy5wYW5lbHNbaV0pKX1yZXR1cm4gdGhpc30sc2VsZWN0OmZ1bmN0aW9uKGkpe2k9dGhpcy5fZ2V0SW5kZXgoaSk7aWYoaT09LTEpaWYodGhpcy5vcHRpb25zLmNvbGxhcHNpYmxlJiZ0aGlzLm9wdGlvbnMuc2VsZWN0ZWQhPS0xKWk9dGhpcy5vcHRpb25zLnNlbGVjdGVkO2Vsc2UgcmV0dXJuIHRoaXM7dGhpcy5hbmNob3JzLmVxKGkpLnRyaWdnZXIodGhpcy5vcHRpb25zLmV2ZW50KyIudGFicyIpO3JldHVybiB0aGlzfSwKbG9hZDpmdW5jdGlvbihpKXtpPXRoaXMuX2dldEluZGV4KGkpO3ZhciBiPXRoaXMsaD10aGlzLm9wdGlvbnMsaj10aGlzLmFuY2hvcnMuZXEoaSlbMF0sbD1hLmRhdGEoaiwibG9hZC50YWJzIik7dGhpcy5hYm9ydCgpO2lmKCFsfHx0aGlzLmVsZW1lbnQucXVldWUoInRhYnMiKS5sZW5ndGghPT0wJiZhLmRhdGEoaiwiY2FjaGUudGFicyIpKXRoaXMuZWxlbWVudC5kZXF1ZXVlKCJ0YWJzIik7ZWxzZXt0aGlzLmxpcy5lcShpKS5hZGRDbGFzcygidWktc3RhdGUtcHJvY2Vzc2luZyIpO2lmKGguc3Bpbm5lcil7dmFyIG89YSgic3BhbiIsaik7by5kYXRhKCJsYWJlbC50YWJzIixvLmh0bWwoKSkuaHRtbChoLnNwaW5uZXIpfXRoaXMueGhyPWEuYWpheChhLmV4dGVuZCh7fSxoLmFqYXhPcHRpb25zLHt1cmw6bCxzdWNjZXNzOmZ1bmN0aW9uKG4sayl7Yi5lbGVtZW50LmZpbmQoYi5fc2FuaXRpemVTZWxlY3RvcihqLmhhc2gpKS5odG1sKG4pO2IuX2NsZWFudXAoKTtoLmNhY2hlJiZhLmRhdGEoaiwKImNhY2hlLnRhYnMiLHRydWUpO2IuX3RyaWdnZXIoImxvYWQiLG51bGwsYi5fdWkoYi5hbmNob3JzW2ldLGIucGFuZWxzW2ldKSk7dHJ5e2guYWpheE9wdGlvbnMuc3VjY2VzcyhuLGspfWNhdGNoKG0pe319LGVycm9yOmZ1bmN0aW9uKG4sayl7Yi5fY2xlYW51cCgpO2IuX3RyaWdnZXIoImxvYWQiLG51bGwsYi5fdWkoYi5hbmNob3JzW2ldLGIucGFuZWxzW2ldKSk7dHJ5e2guYWpheE9wdGlvbnMuZXJyb3IobixrLGksail9Y2F0Y2gobSl7fX19KSk7Yi5lbGVtZW50LmRlcXVldWUoInRhYnMiKTtyZXR1cm4gdGhpc319LGFib3J0OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnF1ZXVlKFtdKTt0aGlzLnBhbmVscy5zdG9wKGZhbHNlLHRydWUpO3RoaXMuZWxlbWVudC5xdWV1ZSgidGFicyIsdGhpcy5lbGVtZW50LnF1ZXVlKCJ0YWJzIikuc3BsaWNlKC0yLDIpKTtpZih0aGlzLnhocil7dGhpcy54aHIuYWJvcnQoKTtkZWxldGUgdGhpcy54aHJ9dGhpcy5fY2xlYW51cCgpO3JldHVybiB0aGlzfSwKdXJsOmZ1bmN0aW9uKGksYil7dGhpcy5hbmNob3JzLmVxKGkpLnJlbW92ZURhdGEoImNhY2hlLnRhYnMiKS5kYXRhKCJsb2FkLnRhYnMiLGIpO3JldHVybiB0aGlzfSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbmNob3JzLmxlbmd0aH19KTthLmV4dGVuZChhLnVpLnRhYnMse3ZlcnNpb246IjEuOC4xMyJ9KTthLmV4dGVuZChhLnVpLnRhYnMucHJvdG90eXBlLHtyb3RhdGlvbjpudWxsLHJvdGF0ZTpmdW5jdGlvbihpLGIpe3ZhciBoPXRoaXMsaj10aGlzLm9wdGlvbnMsbD1oLl9yb3RhdGV8fChoLl9yb3RhdGU9ZnVuY3Rpb24obyl7Y2xlYXJUaW1lb3V0KGgucm90YXRpb24pO2gucm90YXRpb249c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBuPWouc2VsZWN0ZWQ7aC5zZWxlY3QoKytuPGguYW5jaG9ycy5sZW5ndGg/bjowKX0saSk7byYmby5zdG9wUHJvcGFnYXRpb24oKX0pO2I9aC5fdW5yb3RhdGV8fChoLl91bnJvdGF0ZT0hYj9mdW5jdGlvbihvKXtvLmNsaWVudFgmJgpoLnJvdGF0ZShudWxsKX06ZnVuY3Rpb24oKXt0PWouc2VsZWN0ZWQ7bCgpfSk7aWYoaSl7dGhpcy5lbGVtZW50LmJpbmQoInRhYnNzaG93IixsKTt0aGlzLmFuY2hvcnMuYmluZChqLmV2ZW50KyIudGFicyIsYik7bCgpfWVsc2V7Y2xlYXJUaW1lb3V0KGgucm90YXRpb24pO3RoaXMuZWxlbWVudC51bmJpbmQoInRhYnNzaG93IixsKTt0aGlzLmFuY2hvcnMudW5iaW5kKGouZXZlbnQrIi50YWJzIixiKTtkZWxldGUgdGhpcy5fcm90YXRlO2RlbGV0ZSB0aGlzLl91bnJvdGF0ZX1yZXR1cm4gdGhpc319KX0pKGpRdWVyeSk7Cg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>